const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-Bb7JKHHB.js","assets/webworkerAll-Bj7_zXhw.js","assets/colorToUniform-C2GHuDhf.js","assets/CanvasPool-CTIzSpIT.js","assets/WebGPURenderer-28YVd3Ch.js","assets/SharedSystems-BIac1orM.js","assets/WebGLRenderer-BcHe1Smf.js"])))=>i.map(i=>d[i]);
var GS=Object.defineProperty;var LS=(r,t,e)=>t in r?GS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var G=(r,t,e)=>LS(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function Gf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ed={exports:{}},xo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function qS(){if(xy)return xo;xy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:l}}return xo.Fragment=t,xo.jsx=e,xo.jsxs=e,xo}var Sy;function FS(){return Sy||(Sy=1,Ed.exports=qS()),Ed.exports}var Bo=FS(),kd={exports:{}},So={},Rd={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function YS(){return Ty||(Ty=1,function(r){function t(T,E){var D=T.length;T.push(E);t:for(;0<D;){var P=D-1>>>1,C=T[P];if(0<a(C,E))T[P]=E,T[D]=C,D=P;else break t}}function e(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var E=T[0],D=T.pop();if(D!==E){T[0]=D;t:for(var P=0,C=T.length,B=C>>>1;P<B;){var Y=2*(P+1)-1,Q=T[Y],K=Y+1,J=T[K];if(0>a(Q,D))K<C&&0>a(J,Q)?(T[P]=J,T[K]=D,P=K):(T[P]=Q,T[Y]=D,P=Y);else if(K<C&&0>a(J,D))T[P]=J,T[K]=D,P=K;else break t}}return E}function a(T,E){var D=T.sortIndex-E.sortIndex;return D!==0?D:T.id-E.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],p=[],m=1,_=null,v=3,y=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(T){for(var E=e(p);E!==null;){if(E.callback===null)i(p);else if(E.startTime<=T)i(p),E.sortIndex=E.expirationTime,t(d,E);else break;E=e(p)}}function V(T){if(w=!1,O(T),!x)if(e(d)!==null)x=!0,ot();else{var E=e(p);E!==null&&ut(V,E.startTime-T)}}var k=!1,N=-1,H=5,I=-1;function F(){return!(r.unstable_now()-I<H)}function L(){if(k){var T=r.unstable_now();I=T;var E=!0;try{t:{x=!1,w&&(w=!1,A(N),N=-1),y=!0;var D=v;try{e:{for(O(T),_=e(d);_!==null&&!(_.expirationTime>T&&F());){var P=_.callback;if(typeof P=="function"){_.callback=null,v=_.priorityLevel;var C=P(_.expirationTime<=T);if(T=r.unstable_now(),typeof C=="function"){_.callback=C,O(T),E=!0;break e}_===e(d)&&i(d),O(T)}else i(d);_=e(d)}if(_!==null)E=!0;else{var B=e(p);B!==null&&ut(V,B.startTime-T),E=!1}}break t}finally{_=null,v=D,y=!1}E=void 0}}finally{E?j():k=!1}}}var j;if(typeof R=="function")j=function(){R(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,rt=$.port2;$.port1.onmessage=L,j=function(){rt.postMessage(null)}}else j=function(){S(L,0)};function ot(){k||(k=!0,j())}function ut(T,E){N=S(function(){T(r.unstable_now())},E)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_continueExecution=function(){x||y||(x=!0,ot())},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return e(d)},r.unstable_next=function(T){switch(v){case 1:case 2:case 3:var E=3;break;default:E=v}var D=v;v=E;try{return T()}finally{v=D}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(T,E){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var D=v;v=T;try{return E()}finally{v=D}},r.unstable_scheduleCallback=function(T,E,D){var P=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?P+D:P):D=P,T){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=D+C,T={id:m++,callback:E,priorityLevel:T,startTime:D,expirationTime:C,sortIndex:-1},D>P?(T.sortIndex=D,t(p,T),e(d)===null&&T===e(p)&&(w?(A(N),N=-1):w=!0,ut(V,D-P))):(T.sortIndex=C,t(d,T),x||y||(x=!0,ot())),T},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(T){var E=v;return function(){var D=v;v=E;try{return T.apply(this,arguments)}finally{v=D}}}}(Dd)),Dd}var wy;function XS(){return wy||(wy=1,Rd.exports=YS()),Rd.exports}var Od={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function jS(){if(Cy)return St;Cy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function v(C){return C===null||typeof C!="object"?null:(C=_&&C[_]||C["@@iterator"],typeof C=="function"?C:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(C,B,Y){this.props=C,this.context=B,this.refs=w,this.updater=Y||y}S.prototype.isReactComponent={},S.prototype.setState=function(C,B){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,B,"setState")},S.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function A(){}A.prototype=S.prototype;function R(C,B,Y){this.props=C,this.context=B,this.refs=w,this.updater=Y||y}var O=R.prototype=new A;O.constructor=R,x(O,S.prototype),O.isPureReactComponent=!0;var V=Array.isArray,k={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function H(C,B,Y,Q,K,J){return Y=J.ref,{$$typeof:r,type:C,key:B,ref:Y!==void 0?Y:null,props:J}}function I(C,B){return H(C.type,B,void 0,void 0,void 0,C.props)}function F(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function L(C){var B={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Y){return B[Y]})}var j=/\/+/g;function $(C,B){return typeof C=="object"&&C!==null&&C.key!=null?L(""+C.key):B.toString(36)}function rt(){}function ot(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(rt,rt):(C.status="pending",C.then(function(B){C.status==="pending"&&(C.status="fulfilled",C.value=B)},function(B){C.status==="pending"&&(C.status="rejected",C.reason=B)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function ut(C,B,Y,Q,K){var J=typeof C;(J==="undefined"||J==="boolean")&&(C=null);var lt=!1;if(C===null)lt=!0;else switch(J){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(C.$$typeof){case r:case t:lt=!0;break;case m:return lt=C._init,ut(lt(C._payload),B,Y,Q,K)}}if(lt)return K=K(C),lt=Q===""?"."+$(C,0):Q,V(K)?(Y="",lt!=null&&(Y=lt.replace(j,"$&/")+"/"),ut(K,B,Y,"",function(_t){return _t})):K!=null&&(F(K)&&(K=I(K,Y+(K.key==null||C&&C.key===K.key?"":(""+K.key).replace(j,"$&/")+"/")+lt)),B.push(K)),1;lt=0;var ft=Q===""?".":Q+":";if(V(C))for(var nt=0;nt<C.length;nt++)Q=C[nt],J=ft+$(Q,nt),lt+=ut(Q,B,Y,J,K);else if(nt=v(C),typeof nt=="function")for(C=nt.call(C),nt=0;!(Q=C.next()).done;)Q=Q.value,J=ft+$(Q,nt++),lt+=ut(Q,B,Y,J,K);else if(J==="object"){if(typeof C.then=="function")return ut(ot(C),B,Y,Q,K);throw B=String(C),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return lt}function T(C,B,Y){if(C==null)return C;var Q=[],K=0;return ut(C,Q,"","",function(J){return B.call(Y,J,K++)}),Q}function E(C){if(C._status===-1){var B=C._result;B=B(),B.then(function(Y){(C._status===0||C._status===-1)&&(C._status=1,C._result=Y)},function(Y){(C._status===0||C._status===-1)&&(C._status=2,C._result=Y)}),C._status===-1&&(C._status=0,C._result=B)}if(C._status===1)return C._result.default;throw C._result}var D=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function P(){}return St.Children={map:T,forEach:function(C,B,Y){T(C,function(){B.apply(this,arguments)},Y)},count:function(C){var B=0;return T(C,function(){B++}),B},toArray:function(C){return T(C,function(B){return B})||[]},only:function(C){if(!F(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},St.Component=S,St.Fragment=e,St.Profiler=a,St.PureComponent=R,St.StrictMode=i,St.Suspense=d,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,St.act=function(){throw Error("act(...) is not supported in production builds of React.")},St.cache=function(C){return function(){return C.apply(null,arguments)}},St.cloneElement=function(C,B,Y){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var Q=x({},C.props),K=C.key,J=void 0;if(B!=null)for(lt in B.ref!==void 0&&(J=void 0),B.key!==void 0&&(K=""+B.key),B)!N.call(B,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&B.ref===void 0||(Q[lt]=B[lt]);var lt=arguments.length-2;if(lt===1)Q.children=Y;else if(1<lt){for(var ft=Array(lt),nt=0;nt<lt;nt++)ft[nt]=arguments[nt+2];Q.children=ft}return H(C.type,K,void 0,void 0,J,Q)},St.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},St.createElement=function(C,B,Y){var Q,K={},J=null;if(B!=null)for(Q in B.key!==void 0&&(J=""+B.key),B)N.call(B,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(K[Q]=B[Q]);var lt=arguments.length-2;if(lt===1)K.children=Y;else if(1<lt){for(var ft=Array(lt),nt=0;nt<lt;nt++)ft[nt]=arguments[nt+2];K.children=ft}if(C&&C.defaultProps)for(Q in lt=C.defaultProps,lt)K[Q]===void 0&&(K[Q]=lt[Q]);return H(C,J,void 0,void 0,null,K)},St.createRef=function(){return{current:null}},St.forwardRef=function(C){return{$$typeof:h,render:C}},St.isValidElement=F,St.lazy=function(C){return{$$typeof:m,_payload:{_status:-1,_result:C},_init:E}},St.memo=function(C,B){return{$$typeof:p,type:C,compare:B===void 0?null:B}},St.startTransition=function(C){var B=k.T,Y={};k.T=Y;try{var Q=C(),K=k.S;K!==null&&K(Y,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(P,D)}catch(J){D(J)}finally{k.T=B}},St.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},St.use=function(C){return k.H.use(C)},St.useActionState=function(C,B,Y){return k.H.useActionState(C,B,Y)},St.useCallback=function(C,B){return k.H.useCallback(C,B)},St.useContext=function(C){return k.H.useContext(C)},St.useDebugValue=function(){},St.useDeferredValue=function(C,B){return k.H.useDeferredValue(C,B)},St.useEffect=function(C,B){return k.H.useEffect(C,B)},St.useId=function(){return k.H.useId()},St.useImperativeHandle=function(C,B,Y){return k.H.useImperativeHandle(C,B,Y)},St.useInsertionEffect=function(C,B){return k.H.useInsertionEffect(C,B)},St.useLayoutEffect=function(C,B){return k.H.useLayoutEffect(C,B)},St.useMemo=function(C,B){return k.H.useMemo(C,B)},St.useOptimistic=function(C,B){return k.H.useOptimistic(C,B)},St.useReducer=function(C,B,Y){return k.H.useReducer(C,B,Y)},St.useRef=function(C){return k.H.useRef(C)},St.useState=function(C){return k.H.useState(C)},St.useSyncExternalStore=function(C,B,Y){return k.H.useSyncExternalStore(C,B,Y)},St.useTransition=function(){return k.H.useTransition()},St.version="19.0.0",St}var Ay;function Lf(){return Ay||(Ay=1,Od.exports=jS()),Od.exports}var Nd={exports:{}},Fe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function WS(){if(My)return Fe;My=1;var r=Lf();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:d,containerInfo:p,implementation:m}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Fe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Fe.createPortal=function(d,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(d,p,null,m)},Fe.flushSync=function(d){var p=u.T,m=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=p,i.p=m,i.d.f()}},Fe.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},Fe.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Fe.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var m=p.as,_=h(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,y=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:v,fetchPriority:y}):m==="script"&&i.d.X(d,{crossOrigin:_,integrity:v,fetchPriority:y,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Fe.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},Fe.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,_=h(m,p.crossOrigin);i.d.L(d,m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Fe.preloadModule=function(d,p){if(typeof d=="string")if(p){var m=h(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},Fe.requestFormReset=function(d){i.d.r(d)},Fe.unstable_batchedUpdates=function(d,p){return d(p)},Fe.useFormState=function(d,p,m){return u.H.useFormState(d,p,m)},Fe.useFormStatus=function(){return u.H.useHostTransitionStatus()},Fe.version="19.0.0",Fe}var Ey;function ZS(){if(Ey)return Nd.exports;Ey=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Nd.exports=WS(),Nd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function QS(){if(ky)return So;ky=1;var r=XS(),t=Lf(),e=ZS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function N(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var H=Symbol.for("react.client.reference");function I(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===H?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case d:return"Fragment";case h:return"Portal";case m:return"Profiler";case p:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case y:return(n.displayName||"Context")+".Provider";case v:return(n._context.displayName||"Context")+".Consumer";case x:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return s=n.displayName||null,s!==null?s:I(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return I(n(s))}catch{}}return null}var F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.assign,j,$;function rt(n){if(j===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||"",$=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+n+$}var ot=!1;function ut(n,s){if(!n||ot)return"";ot=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(tt){var Z=tt}Reflect.construct(n,[],at)}else{try{at.call()}catch(tt){Z=tt}n.call(at.prototype)}}else{try{throw Error()}catch(tt){Z=tt}(at=n())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(tt){if(tt&&Z&&typeof tt.stack=="string")return[tt.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],M=g[1];if(b&&M){var z=b.split(`
`),q=M.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===q.length)for(c=z.length-1,f=q.length-1;1<=c&&0<=f&&z[c]!==q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==q[f]){var et=`
`+z[c].replace(" at new "," at ");return n.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",n.displayName)),et}while(1<=c&&0<=f);break}}}finally{ot=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?rt(o):""}function T(n){switch(n.tag){case 26:case 27:case 5:return rt(n.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return n=ut(n.type,!1),n;case 11:return n=ut(n.type.render,!1),n;case 1:return n=ut(n.type,!0),n;default:return""}}function E(n){try{var s="";do s+=T(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function D(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function P(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function C(n){if(D(n)!==n)throw Error(i(188))}function B(n){var s=n.alternate;if(!s){if(s=D(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,c=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return C(f),n;if(g===c)return C(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=g;else{for(var b=!1,M=f.child;M;){if(M===o){b=!0,o=f,c=g;break}if(M===c){b=!0,c=f,o=g;break}M=M.sibling}if(!b){for(M=g.child;M;){if(M===o){b=!0,o=g,c=f;break}if(M===c){b=!0,c=g,o=f;break}M=M.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function Y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=Y(n),s!==null)return s;n=n.sibling}return null}var Q=Array.isArray,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},lt=[],ft=-1;function nt(n){return{current:n}}function _t(n){0>ft||(n.current=lt[ft],lt[ft]=null,ft--)}function ht(n,s){ft++,lt[ft]=n.current,n.current=s}var qt=nt(null),jt=nt(null),fe=nt(null),ze=nt(null);function it(n,s){switch(ht(fe,s),ht(jt,n),ht(qt,null),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?Q_(s):0;break;default:if(n=n===8?s.parentNode:s,s=n.tagName,n=n.namespaceURI)n=Q_(n),s=$_(n,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}_t(qt),ht(qt,s)}function ct(){_t(qt),_t(jt),_t(fe)}function Wt(n){n.memoizedState!==null&&ht(ze,n);var s=qt.current,o=$_(s,n.type);s!==o&&(ht(jt,n),ht(qt,o))}function Ht(n){jt.current===n&&(_t(qt),_t(jt)),ze.current===n&&(_t(ze),go._currentValue=J)}var kt=Object.prototype.hasOwnProperty,Zt=r.unstable_scheduleCallback,Ge=r.unstable_cancelCallback,ai=r.unstable_shouldYield,Ms=r.unstable_requestPaint,rn=r.unstable_now,Su=r.unstable_getCurrentPriorityLevel,nl=r.unstable_ImmediatePriority,Up=r.unstable_UserBlockingPriority,il=r.unstable_NormalPriority,Sx=r.unstable_LowPriority,Gp=r.unstable_IdlePriority,Tx=r.log,wx=r.unstable_setDisableYieldValue,wa=null,dn=null;function Cx(n){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(wa,n,void 0,(n.current.flags&128)===128)}catch{}}function Wi(n){if(typeof Tx=="function"&&wx(n),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(wa,n)}catch{}}var fn=Math.clz32?Math.clz32:Ex,Ax=Math.log,Mx=Math.LN2;function Ex(n){return n>>>=0,n===0?32:31-(Ax(n)/Mx|0)|0}var sl=128,rl=4194304;function Es(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function al(n,s){var o=n.pendingLanes;if(o===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,b=n.warmLanes;n=n.finishedLanes!==0;var M=o&134217727;return M!==0?(o=M&~f,o!==0?c=Es(o):(g&=M,g!==0?c=Es(g):n||(b=M&~b,b!==0&&(c=Es(b))))):(M=o&~f,M!==0?c=Es(M):g!==0?c=Es(g):n||(b=o&~b,b!==0&&(c=Es(b)))),c===0?0:s!==0&&s!==c&&(s&f)===0&&(f=c&-c,b=s&-s,f>=b||f===32&&(b&4194176)!==0)?s:c}function Ca(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function kx(n,s){switch(n){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lp(){var n=sl;return sl<<=1,(sl&4194176)===0&&(sl=128),n}function qp(){var n=rl;return rl<<=1,(rl&62914560)===0&&(rl=4194304),n}function Tu(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Aa(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Rx(n,s,o,c,f,g){var b=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var M=n.entanglements,z=n.expirationTimes,q=n.hiddenUpdates;for(o=b&~o;0<o;){var et=31-fn(o),at=1<<et;M[et]=0,z[et]=-1;var Z=q[et];if(Z!==null)for(q[et]=null,et=0;et<Z.length;et++){var tt=Z[et];tt!==null&&(tt.lane&=-536870913)}o&=~at}c!==0&&Fp(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(b&~s))}function Fp(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-fn(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194218}function Yp(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-fn(o),f=1<<c;f&s|n[c]&s&&(n[c]|=s),o&=~f}}function Xp(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function jp(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:my(n.type))}function Dx(n,s){var o=K.p;try{return K.p=n,s()}finally{K.p=o}}var Zi=Math.random().toString(36).slice(2),Le="__reactFiber$"+Zi,an="__reactProps$"+Zi,gr="__reactContainer$"+Zi,wu="__reactEvents$"+Zi,Ox="__reactListeners$"+Zi,Nx="__reactHandles$"+Zi,Wp="__reactResources$"+Zi,Ma="__reactMarker$"+Zi;function Cu(n){delete n[Le],delete n[an],delete n[wu],delete n[Ox],delete n[Nx]}function ks(n){var s=n[Le];if(s)return s;for(var o=n.parentNode;o;){if(s=o[gr]||o[Le]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=ty(n);n!==null;){if(o=n[Le])return o;n=ty(n)}return s}n=o,o=n.parentNode}return null}function _r(n){if(n=n[Le]||n[gr]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ea(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function yr(n){var s=n[Wp];return s||(s=n[Wp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ae(n){n[Ma]=!0}var Zp=new Set,Qp={};function Rs(n,s){vr(n,s),vr(n+"Capture",s)}function vr(n,s){for(Qp[n]=s,n=0;n<s.length;n++)Zp.add(s[n])}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$p={},Kp={};function Bx(n){return kt.call(Kp,n)?!0:kt.call($p,n)?!1:zx.test(n)?Kp[n]=!0:($p[n]=!0,!1)}function ol(n,s,o){if(Bx(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function ll(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Ti(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function Mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Jp(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Hx(n){var s=Jp(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function cl(n){n._valueTracker||(n._valueTracker=Hx(n))}function tm(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Jp(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function ul(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Px=/[\n"\\]/g;function En(n){return n.replace(Px,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Au(n,s,o,c,f,g,b,M){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Mn(s)):n.value!==""+Mn(s)&&(n.value=""+Mn(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?Mu(n,b,Mn(s)):o!=null?Mu(n,b,Mn(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.name=""+Mn(M):n.removeAttribute("name")}function em(n,s,o,c,f,g,b,M){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+Mn(o):"",s=s!=null?""+Mn(s):o,M||s===n.value||(n.value=s),n.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=M?n.checked:!!c,n.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b)}function Mu(n,s,o){s==="number"&&ul(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function br(n,s,o,c){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Mn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function nm(n,s,o){if(s!=null&&(s=""+Mn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Mn(o):""}function im(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(Q(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=Mn(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function xr(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Vx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sm(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||Vx.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function rm(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&o[f]!==c&&sm(n,f,c)}else for(var g in s)s.hasOwnProperty(g)&&sm(n,g,s[g])}function Eu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ux=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(n){return Ux.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ku=null;function Ru(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sr=null,Tr=null;function am(n){var s=_r(n);if(s&&(n=s.stateNode)){var o=n[an]||null;t:switch(n=s.stateNode,s.type){case"input":if(Au(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+En(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var f=c[an]||null;if(!f)throw Error(i(90));Au(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&tm(c)}break t;case"textarea":nm(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&br(n,!!o.multiple,s,!1)}}}var Du=!1;function om(n,s,o){if(Du)return n(s,o);Du=!0;try{var c=n(s);return c}finally{if(Du=!1,(Sr!==null||Tr!==null)&&(Wl(),Sr&&(s=Sr,n=Tr,Tr=Sr=null,am(s),n)))for(s=0;s<n.length;s++)am(n[s])}}function ka(n,s){var o=n.stateNode;if(o===null)return null;var c=o[an]||null;if(c===null)return null;o=c[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Ou=!1;if(Si)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Ou=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Ou=!1}var Qi=null,Nu=null,dl=null;function lm(){if(dl)return dl;var n,s=Nu,o=s.length,c,f="value"in Qi?Qi.value:Qi.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var b=o-n;for(c=1;c<=b&&s[o-c]===f[g-c];c++);return dl=f.slice(n,1<c?1-c:void 0)}function fl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function pl(){return!0}function cm(){return!1}function on(n){function s(o,c,f,g,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(o=n[M],this[M]=o?o(g):g[M]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pl:cm,this.isPropagationStopped=cm,this}return L(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),s}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=on(Ds),Da=L({},Ds,{view:0,detail:0}),Gx=on(Da),zu,Bu,Oa,gl=L({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oa&&(Oa&&n.type==="mousemove"?(zu=n.screenX-Oa.screenX,Bu=n.screenY-Oa.screenY):Bu=zu=0,Oa=n),zu)},movementY:function(n){return"movementY"in n?n.movementY:Bu}}),um=on(gl),Lx=L({},gl,{dataTransfer:0}),qx=on(Lx),Fx=L({},Da,{relatedTarget:0}),Hu=on(Fx),Yx=L({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Xx=on(Yx),jx=L({},Ds,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wx=on(jx),Zx=L({},Ds,{data:0}),hm=on(Zx),Qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$x={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Kx[n])?!!s[n]:!1}function Pu(){return Jx}var t1=L({},Da,{key:function(n){if(n.key){var s=Qx[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=fl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$x[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(n){return n.type==="keypress"?fl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),e1=on(t1),n1=L({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=on(n1),i1=L({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),s1=on(i1),r1=L({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),a1=on(r1),o1=L({},gl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),l1=on(o1),c1=L({},Ds,{newState:0,oldState:0}),u1=on(c1),h1=[9,13,27,32],Vu=Si&&"CompositionEvent"in window,Na=null;Si&&"documentMode"in document&&(Na=document.documentMode);var d1=Si&&"TextEvent"in window&&!Na,fm=Si&&(!Vu||Na&&8<Na&&11>=Na),pm=" ",mm=!1;function gm(n,s){switch(n){case"keyup":return h1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _m(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wr=!1;function f1(n,s){switch(n){case"compositionend":return _m(s);case"keypress":return s.which!==32?null:(mm=!0,pm);case"textInput":return n=s.data,n===pm&&mm?null:n;default:return null}}function p1(n,s){if(wr)return n==="compositionend"||!Vu&&gm(n,s)?(n=lm(),dl=Nu=Qi=null,wr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fm&&s.locale!=="ko"?null:s.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!m1[n.type]:s==="textarea"}function vm(n,s,o,c){Sr?Tr?Tr.push(c):Tr=[c]:Sr=c,s=Jl(s,"onChange"),0<s.length&&(o=new ml("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var za=null,Ba=null;function g1(n){Y_(n,0)}function _l(n){var s=Ea(n);if(tm(s))return n}function bm(n,s){if(n==="change")return s}var xm=!1;if(Si){var Iu;if(Si){var Uu="oninput"in document;if(!Uu){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),Uu=typeof Sm.oninput=="function"}Iu=Uu}else Iu=!1;xm=Iu&&(!document.documentMode||9<document.documentMode)}function Tm(){za&&(za.detachEvent("onpropertychange",wm),Ba=za=null)}function wm(n){if(n.propertyName==="value"&&_l(Ba)){var s=[];vm(s,Ba,n,Ru(n)),om(g1,s)}}function _1(n,s,o){n==="focusin"?(Tm(),za=s,Ba=o,za.attachEvent("onpropertychange",wm)):n==="focusout"&&Tm()}function y1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _l(Ba)}function v1(n,s){if(n==="click")return _l(s)}function b1(n,s){if(n==="input"||n==="change")return _l(s)}function x1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var pn=typeof Object.is=="function"?Object.is:x1;function Ha(n,s){if(pn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!kt.call(s,f)||!pn(n[f],s[f]))return!1}return!0}function Cm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Am(n,s){var o=Cm(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Cm(o)}}function Mm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Mm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Em(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ul(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=ul(n.document)}return s}function Gu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function S1(n,s){var o=Em(s);s=n.focusedElem;var c=n.selectionRange;if(o!==s&&s&&s.ownerDocument&&Mm(s.ownerDocument.documentElement,s)){if(c!==null&&Gu(s)){if(n=c.start,o=c.end,o===void 0&&(o=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(o,s.value.length);else if(o=(n=s.ownerDocument||document)&&n.defaultView||window,o.getSelection){o=o.getSelection();var f=s.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!o.extend&&g>c&&(f=c,c=g,g=f),f=Am(s,g);var b=Am(s,c);f&&b&&(o.rangeCount!==1||o.anchorNode!==f.node||o.anchorOffset!==f.offset||o.focusNode!==b.node||o.focusOffset!==b.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),o.removeAllRanges(),g>c?(o.addRange(n),o.extend(b.node,b.offset)):(n.setEnd(b.node,b.offset),o.addRange(n)))}}for(n=[],o=s;o=o.parentNode;)o.nodeType===1&&n.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)o=n[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var T1=Si&&"documentMode"in document&&11>=document.documentMode,Cr=null,Lu=null,Pa=null,qu=!1;function km(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;qu||Cr==null||Cr!==ul(c)||(c=Cr,"selectionStart"in c&&Gu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pa&&Ha(Pa,c)||(Pa=c,c=Jl(Lu,"onSelect"),0<c.length&&(s=new ml("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Cr)))}function Os(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Ar={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},Fu={},Rm={};Si&&(Rm=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function Ns(n){if(Fu[n])return Fu[n];if(!Ar[n])return n;var s=Ar[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Rm)return Fu[n]=s[o];return n}var Dm=Ns("animationend"),Om=Ns("animationiteration"),Nm=Ns("animationstart"),w1=Ns("transitionrun"),C1=Ns("transitionstart"),A1=Ns("transitioncancel"),zm=Ns("transitionend"),Bm=new Map,Hm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Fn(n,s){Bm.set(n,s),Rs(s,[n])}var kn=[],Mr=0,Yu=0;function yl(){for(var n=Mr,s=Yu=Mr=0;s<n;){var o=kn[s];kn[s++]=null;var c=kn[s];kn[s++]=null;var f=kn[s];kn[s++]=null;var g=kn[s];if(kn[s++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}g!==0&&Pm(o,f,g)}}function vl(n,s,o,c){kn[Mr++]=n,kn[Mr++]=s,kn[Mr++]=o,kn[Mr++]=c,Yu|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Xu(n,s,o,c){return vl(n,s,o,c),bl(n)}function $i(n,s){return vl(n,null,null,s),bl(n)}function Pm(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;f&&s!==null&&n.tag===3&&(g=n.stateNode,f=31-fn(o),g=g.hiddenUpdates,n=g[f],n===null?g[f]=[s]:n.push(s),s.lane=o|536870912)}function bl(n){if(50<lo)throw lo=0,Kh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Er={},Vm=new WeakMap;function Rn(n,s){if(typeof n=="object"&&n!==null){var o=Vm.get(n);return o!==void 0?o:(s={value:n,source:s,stack:E(s)},Vm.set(n,s),s)}return{value:n,source:s,stack:E(s)}}var kr=[],Rr=0,xl=null,Sl=0,Dn=[],On=0,zs=null,wi=1,Ci="";function Bs(n,s){kr[Rr++]=Sl,kr[Rr++]=xl,xl=n,Sl=s}function Im(n,s,o){Dn[On++]=wi,Dn[On++]=Ci,Dn[On++]=zs,zs=n;var c=wi;n=Ci;var f=32-fn(c)-1;c&=~(1<<f),o+=1;var g=32-fn(s)+f;if(30<g){var b=f-f%5;g=(c&(1<<b)-1).toString(32),c>>=b,f-=b,wi=1<<32-fn(s)+f|o<<f|c,Ci=g+n}else wi=1<<g|o<<f|c,Ci=n}function ju(n){n.return!==null&&(Bs(n,1),Im(n,1,0))}function Wu(n){for(;n===xl;)xl=kr[--Rr],kr[Rr]=null,Sl=kr[--Rr],kr[Rr]=null;for(;n===zs;)zs=Dn[--On],Dn[On]=null,Ci=Dn[--On],Dn[On]=null,wi=Dn[--On],Dn[On]=null}var $e=null,Be=null,zt=!1,Yn=null,oi=!1,Zu=Error(i(519));function Hs(n){var s=Error(i(418,""));throw Ua(Rn(s,n)),Zu}function Um(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Le]=n,s[an]=c,o){case"dialog":Dt("cancel",s),Dt("close",s);break;case"iframe":case"object":case"embed":Dt("load",s);break;case"video":case"audio":for(o=0;o<uo.length;o++)Dt(uo[o],s);break;case"source":Dt("error",s);break;case"img":case"image":case"link":Dt("error",s),Dt("load",s);break;case"details":Dt("toggle",s);break;case"input":Dt("invalid",s),em(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),cl(s);break;case"select":Dt("invalid",s);break;case"textarea":Dt("invalid",s),im(s,c.value,c.defaultValue,c.children),cl(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||Z_(s.textContent,o)?(c.popover!=null&&(Dt("beforetoggle",s),Dt("toggle",s)),c.onScroll!=null&&Dt("scroll",s),c.onScrollEnd!=null&&Dt("scrollend",s),c.onClick!=null&&(s.onclick=tc),s=!0):s=!1,s||Hs(n)}function Gm(n){for($e=n.return;$e;)switch($e.tag){case 3:case 27:oi=!0;return;case 5:case 13:oi=!1;return;default:$e=$e.return}}function Va(n){if(n!==$e)return!1;if(!zt)return Gm(n),zt=!0,!1;var s=!1,o;if((o=n.tag!==3&&n.tag!==27)&&((o=n.tag===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||md(n.type,n.memoizedProps)),o=!o),o&&(s=!0),s&&Be&&Hs(n),Gm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){Be=jn(n.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}Be=null}}else Be=$e?jn(n.stateNode.nextSibling):null;return!0}function Ia(){Be=$e=null,zt=!1}function Ua(n){Yn===null?Yn=[n]:Yn.push(n)}var Ga=Error(i(460)),Lm=Error(i(474)),Qu={then:function(){}};function qm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tl(){}function Fm(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Tl,Tl),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Ga?Error(i(483)):n;default:if(typeof s.status=="string")s.then(Tl,Tl);else{if(n=Qt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,n===Ga?Error(i(483)):n}throw La=s,Ga}}var La=null;function Ym(){if(La===null)throw Error(i(459));var n=La;return La=null,n}var Dr=null,qa=0;function wl(n){var s=qa;return qa+=1,Dr===null&&(Dr=[]),Fm(Dr,n,s)}function Fa(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Cl(n,s){throw s.$$typeof===l?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Xm(n){var s=n._init;return s(n._payload)}function jm(n){function s(X,U){if(n){var W=X.deletions;W===null?(X.deletions=[U],X.flags|=16):W.push(U)}}function o(X,U){if(!n)return null;for(;U!==null;)s(X,U),U=U.sibling;return null}function c(X){for(var U=new Map;X!==null;)X.key!==null?U.set(X.key,X):U.set(X.index,X),X=X.sibling;return U}function f(X,U){return X=cs(X,U),X.index=0,X.sibling=null,X}function g(X,U,W){return X.index=W,n?(W=X.alternate,W!==null?(W=W.index,W<U?(X.flags|=33554434,U):W):(X.flags|=33554434,U)):(X.flags|=1048576,U)}function b(X){return n&&X.alternate===null&&(X.flags|=33554434),X}function M(X,U,W,st){return U===null||U.tag!==6?(U=Fh(W,X.mode,st),U.return=X,U):(U=f(U,W),U.return=X,U)}function z(X,U,W,st){var dt=W.type;return dt===d?et(X,U,W.props.children,st,W.key):U!==null&&(U.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===R&&Xm(dt)===U.type)?(U=f(U,W.props),Fa(U,W),U.return=X,U):(U=ql(W.type,W.key,W.props,null,X.mode,st),Fa(U,W),U.return=X,U)}function q(X,U,W,st){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=Yh(W,X.mode,st),U.return=X,U):(U=f(U,W.children||[]),U.return=X,U)}function et(X,U,W,st,dt){return U===null||U.tag!==7?(U=Xs(W,X.mode,st,dt),U.return=X,U):(U=f(U,W),U.return=X,U)}function at(X,U,W){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Fh(""+U,X.mode,W),U.return=X,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case u:return W=ql(U.type,U.key,U.props,null,X.mode,W),Fa(W,U),W.return=X,W;case h:return U=Yh(U,X.mode,W),U.return=X,U;case R:var st=U._init;return U=st(U._payload),at(X,U,W)}if(Q(U)||N(U))return U=Xs(U,X.mode,W,null),U.return=X,U;if(typeof U.then=="function")return at(X,wl(U),W);if(U.$$typeof===y)return at(X,Ul(X,U),W);Cl(X,U)}return null}function Z(X,U,W,st){var dt=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return dt!==null?null:M(X,U,""+W,st);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case u:return W.key===dt?z(X,U,W,st):null;case h:return W.key===dt?q(X,U,W,st):null;case R:return dt=W._init,W=dt(W._payload),Z(X,U,W,st)}if(Q(W)||N(W))return dt!==null?null:et(X,U,W,st,null);if(typeof W.then=="function")return Z(X,U,wl(W),st);if(W.$$typeof===y)return Z(X,U,Ul(X,W),st);Cl(X,W)}return null}function tt(X,U,W,st,dt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return X=X.get(W)||null,M(U,X,""+st,dt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case u:return X=X.get(st.key===null?W:st.key)||null,z(U,X,st,dt);case h:return X=X.get(st.key===null?W:st.key)||null,q(U,X,st,dt);case R:var Ct=st._init;return st=Ct(st._payload),tt(X,U,W,st,dt)}if(Q(st)||N(st))return X=X.get(W)||null,et(U,X,st,dt,null);if(typeof st.then=="function")return tt(X,U,W,wl(st),dt);if(st.$$typeof===y)return tt(X,U,W,Ul(U,st),dt);Cl(U,st)}return null}function pt(X,U,W,st){for(var dt=null,Ct=null,gt=U,yt=U=0,ke=null;gt!==null&&yt<W.length;yt++){gt.index>yt?(ke=gt,gt=null):ke=gt.sibling;var Bt=Z(X,gt,W[yt],st);if(Bt===null){gt===null&&(gt=ke);break}n&&gt&&Bt.alternate===null&&s(X,gt),U=g(Bt,U,yt),Ct===null?dt=Bt:Ct.sibling=Bt,Ct=Bt,gt=ke}if(yt===W.length)return o(X,gt),zt&&Bs(X,yt),dt;if(gt===null){for(;yt<W.length;yt++)gt=at(X,W[yt],st),gt!==null&&(U=g(gt,U,yt),Ct===null?dt=gt:Ct.sibling=gt,Ct=gt);return zt&&Bs(X,yt),dt}for(gt=c(gt);yt<W.length;yt++)ke=tt(gt,X,yt,W[yt],st),ke!==null&&(n&&ke.alternate!==null&&gt.delete(ke.key===null?yt:ke.key),U=g(ke,U,yt),Ct===null?dt=ke:Ct.sibling=ke,Ct=ke);return n&&gt.forEach(function(gs){return s(X,gs)}),zt&&Bs(X,yt),dt}function bt(X,U,W,st){if(W==null)throw Error(i(151));for(var dt=null,Ct=null,gt=U,yt=U=0,ke=null,Bt=W.next();gt!==null&&!Bt.done;yt++,Bt=W.next()){gt.index>yt?(ke=gt,gt=null):ke=gt.sibling;var gs=Z(X,gt,Bt.value,st);if(gs===null){gt===null&&(gt=ke);break}n&&gt&&gs.alternate===null&&s(X,gt),U=g(gs,U,yt),Ct===null?dt=gs:Ct.sibling=gs,Ct=gs,gt=ke}if(Bt.done)return o(X,gt),zt&&Bs(X,yt),dt;if(gt===null){for(;!Bt.done;yt++,Bt=W.next())Bt=at(X,Bt.value,st),Bt!==null&&(U=g(Bt,U,yt),Ct===null?dt=Bt:Ct.sibling=Bt,Ct=Bt);return zt&&Bs(X,yt),dt}for(gt=c(gt);!Bt.done;yt++,Bt=W.next())Bt=tt(gt,X,yt,Bt.value,st),Bt!==null&&(n&&Bt.alternate!==null&&gt.delete(Bt.key===null?yt:Bt.key),U=g(Bt,U,yt),Ct===null?dt=Bt:Ct.sibling=Bt,Ct=Bt);return n&&gt.forEach(function(US){return s(X,US)}),zt&&Bs(X,yt),dt}function le(X,U,W,st){if(typeof W=="object"&&W!==null&&W.type===d&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case u:t:{for(var dt=W.key;U!==null;){if(U.key===dt){if(dt=W.type,dt===d){if(U.tag===7){o(X,U.sibling),st=f(U,W.props.children),st.return=X,X=st;break t}}else if(U.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===R&&Xm(dt)===U.type){o(X,U.sibling),st=f(U,W.props),Fa(st,W),st.return=X,X=st;break t}o(X,U);break}else s(X,U);U=U.sibling}W.type===d?(st=Xs(W.props.children,X.mode,st,W.key),st.return=X,X=st):(st=ql(W.type,W.key,W.props,null,X.mode,st),Fa(st,W),st.return=X,X=st)}return b(X);case h:t:{for(dt=W.key;U!==null;){if(U.key===dt)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){o(X,U.sibling),st=f(U,W.children||[]),st.return=X,X=st;break t}else{o(X,U);break}else s(X,U);U=U.sibling}st=Yh(W,X.mode,st),st.return=X,X=st}return b(X);case R:return dt=W._init,W=dt(W._payload),le(X,U,W,st)}if(Q(W))return pt(X,U,W,st);if(N(W)){if(dt=N(W),typeof dt!="function")throw Error(i(150));return W=dt.call(W),bt(X,U,W,st)}if(typeof W.then=="function")return le(X,U,wl(W),st);if(W.$$typeof===y)return le(X,U,Ul(X,W),st);Cl(X,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,U!==null&&U.tag===6?(o(X,U.sibling),st=f(U,W),st.return=X,X=st):(o(X,U),st=Fh(W,X.mode,st),st.return=X,X=st),b(X)):o(X,U)}return function(X,U,W,st){try{qa=0;var dt=le(X,U,W,st);return Dr=null,dt}catch(gt){if(gt===Ga)throw gt;var Ct=Hn(29,gt,null,X.mode);return Ct.lanes=st,Ct.return=X,Ct}finally{}}}var Ps=jm(!0),Wm=jm(!1),Or=nt(null),Al=nt(0);function Zm(n,s){n=Hi,ht(Al,n),ht(Or,s),Hi=n|s.baseLanes}function $u(){ht(Al,Hi),ht(Or,Or.current)}function Ku(){Hi=Al.current,_t(Or),_t(Al)}var Nn=nt(null),li=null;function Ki(n){var s=n.alternate;ht(Te,Te.current&1),ht(Nn,n),li===null&&(s===null||Or.current!==null||s.memoizedState!==null)&&(li=n)}function Qm(n){if(n.tag===22){if(ht(Te,Te.current),ht(Nn,n),li===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(li=n)}}else Ji()}function Ji(){ht(Te,Te.current),ht(Nn,Nn.current)}function Ai(n){_t(Nn),li===n&&(li=null),_t(Te)}var Te=nt(0);function Ml(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var M1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},E1=r.unstable_scheduleCallback,k1=r.unstable_NormalPriority,we={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ju(){return{controller:new M1,data:new Map,refCount:0}}function Ya(n){n.refCount--,n.refCount===0&&E1(k1,function(){n.controller.abort()})}var Xa=null,th=0,Nr=0,zr=null;function R1(n,s){if(Xa===null){var o=Xa=[];th=0,Nr=ad(),zr={status:"pending",value:void 0,then:function(c){o.push(c)}}}return th++,s.then($m,$m),s}function $m(){if(--th===0&&Xa!==null){zr!==null&&(zr.status="fulfilled");var n=Xa;Xa=null,Nr=0,zr=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function D1(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Km=F.S;F.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&R1(n,s),Km!==null&&Km(n,s)};var Vs=nt(null);function eh(){var n=Vs.current;return n!==null?n:Qt.pooledCache}function El(n,s){s===null?ht(Vs,Vs.current):ht(Vs,s.pool)}function Jm(){var n=eh();return n===null?null:{parent:we._currentValue,pool:n}}var ts=0,Tt=null,Ut=null,ge=null,kl=!1,Br=!1,Is=!1,Rl=0,ja=0,Hr=null,O1=0;function pe(){throw Error(i(321))}function nh(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!pn(n[o],s[o]))return!1;return!0}function ih(n,s,o,c,f,g){return ts=g,Tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=n===null||n.memoizedState===null?Us:es,Is=!1,g=o(c,f),Is=!1,Br&&(g=eg(s,o,c,f)),tg(n),g}function tg(n){F.H=ci;var s=Ut!==null&&Ut.next!==null;if(ts=0,ge=Ut=Tt=null,kl=!1,ja=0,Hr=null,s)throw Error(i(300));n===null||Me||(n=n.dependencies,n!==null&&Il(n)&&(Me=!0))}function eg(n,s,o,c){Tt=n;var f=0;do{if(Br&&(Hr=null),ja=0,Br=!1,25<=f)throw Error(i(301));if(f+=1,ge=Ut=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}F.H=Gs,g=s(o,c)}while(Br);return g}function N1(){var n=F.H,s=n.useState()[0];return s=typeof s.then=="function"?Wa(s):s,n=n.useState()[0],(Ut!==null?Ut.memoizedState:null)!==n&&(Tt.flags|=1024),s}function sh(){var n=Rl!==0;return Rl=0,n}function rh(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function ah(n){if(kl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kl=!1}ts=0,ge=Ut=Tt=null,Br=!1,ja=Rl=0,Hr=null}function ln(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?Tt.memoizedState=ge=n:ge=ge.next=n,ge}function _e(){if(Ut===null){var n=Tt.alternate;n=n!==null?n.memoizedState:null}else n=Ut.next;var s=ge===null?Tt.memoizedState:ge.next;if(s!==null)ge=s,Ut=n;else{if(n===null)throw Tt.alternate===null?Error(i(467)):Error(i(310));Ut=n,n={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},ge===null?Tt.memoizedState=ge=n:ge=ge.next=n}return ge}var Dl;Dl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Wa(n){var s=ja;return ja+=1,Hr===null&&(Hr=[]),n=Fm(Hr,n,s),s=Tt,(ge===null?s.memoizedState:ge.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?Us:es),n}function Ol(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wa(n);if(n.$$typeof===y)return qe(n)}throw Error(i(438,String(n)))}function oh(n){var s=null,o=Tt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Dl(),Tt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=V;return s.index++,o}function Mi(n,s){return typeof s=="function"?s(n):s}function Nl(n){var s=_e();return lh(s,Ut,n)}function lh(n,s,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}s.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var M=b=null,z=null,q=s,et=!1;do{var at=q.lane&-536870913;if(at!==q.lane?(Ot&at)===at:(ts&at)===at){var Z=q.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),at===Nr&&(et=!0);else if((ts&Z)===Z){q=q.next,Z===Nr&&(et=!0);continue}else at={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},z===null?(M=z=at,b=g):z=z.next=at,Tt.lanes|=Z,us|=Z;at=q.action,Is&&o(g,at),g=q.hasEagerState?q.eagerState:o(g,at)}else Z={lane:at,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},z===null?(M=z=Z,b=g):z=z.next=Z,Tt.lanes|=at,us|=at;q=q.next}while(q!==null&&q!==s);if(z===null?b=g:z.next=M,!pn(g,n.memoizedState)&&(Me=!0,et&&(o=zr,o!==null)))throw o;n.memoizedState=g,n.baseState=b,n.baseQueue=z,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function ch(n){var s=_e(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do g=n(g,b.action),b=b.next;while(b!==f);pn(g,s.memoizedState)||(Me=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function ng(n,s,o){var c=Tt,f=_e(),g=zt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var b=!pn((Ut||f).memoizedState,o);if(b&&(f.memoizedState=o,Me=!0),f=f.queue,dh(rg.bind(null,c,f,n),[n]),f.getSnapshot!==s||b||ge!==null&&ge.memoizedState.tag&1){if(c.flags|=2048,Pr(9,sg.bind(null,c,f,o,s),{destroy:void 0},null),Qt===null)throw Error(i(349));g||(ts&60)!==0||ig(c,s,o)}return o}function ig(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Tt.updateQueue,s===null?(s=Dl(),Tt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function sg(n,s,o,c){s.value=o,s.getSnapshot=c,ag(s)&&og(n)}function rg(n,s,o){return o(function(){ag(s)&&og(n)})}function ag(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!pn(n,o)}catch{return!0}}function og(n){var s=$i(n,2);s!==null&&Ke(s,n,2)}function uh(n){var s=ln();if(typeof n=="function"){var o=n;if(n=o(),Is){Wi(!0);try{o()}finally{Wi(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:n},s}function lg(n,s,o,c){return n.baseState=o,lh(n,Ut,typeof c=="function"?c:Mi)}function z1(n,s,o,c,f){if(Hl(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};F.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,cg(s,g)):(g.next=o.next,s.pending=o.next=g)}}function cg(n,s){var o=s.action,c=s.payload,f=n.state;if(s.isTransition){var g=F.T,b={};F.T=b;try{var M=o(f,c),z=F.S;z!==null&&z(b,M),ug(n,s,M)}catch(q){hh(n,s,q)}finally{F.T=g}}else try{g=o(f,c),ug(n,s,g)}catch(q){hh(n,s,q)}}function ug(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){hg(n,s,c)},function(c){return hh(n,s,c)}):hg(n,s,o)}function hg(n,s,o){s.status="fulfilled",s.value=o,dg(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,cg(n,o)))}function hh(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,dg(s),s=s.next;while(s!==c)}n.action=null}function dg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function fg(n,s){return s}function pg(n,s){if(zt){var o=Qt.formState;if(o!==null){t:{var c=Tt;if(zt){if(Be){e:{for(var f=Be,g=oi;f.nodeType!==8;){if(!g){f=null;break e}if(f=jn(f.nextSibling),f===null){f=null;break e}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Be=jn(f.nextSibling),c=f.data==="F!";break t}}Hs(c)}c=!1}c&&(s=o[0])}}return o=ln(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:s},o.queue=c,o=Og.bind(null,Tt,c),c.dispatch=o,c=uh(!1),g=_h.bind(null,Tt,!1,c.queue),c=ln(),f={state:s,dispatch:null,action:n,pending:null},c.queue=f,o=z1.bind(null,Tt,f,g,o),f.dispatch=o,c.memoizedState=n,[s,o,!1]}function mg(n){var s=_e();return gg(s,Ut,n)}function gg(n,s,o){s=lh(n,s,fg)[0],n=Nl(Mi)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Wa(s):s;var c=_e(),f=c.queue,g=f.dispatch;return o!==c.memoizedState&&(Tt.flags|=2048,Pr(9,B1.bind(null,f,o),{destroy:void 0},null)),[s,g,n]}function B1(n,s){n.action=s}function _g(n){var s=_e(),o=Ut;if(o!==null)return gg(s,o,n);_e(),s=s.memoizedState,o=_e();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function Pr(n,s,o,c){return n={tag:n,create:s,inst:o,deps:c,next:null},s=Tt.updateQueue,s===null&&(s=Dl(),Tt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function yg(){return _e().memoizedState}function zl(n,s,o,c){var f=ln();Tt.flags|=n,f.memoizedState=Pr(1|s,o,{destroy:void 0},c===void 0?null:c)}function Bl(n,s,o,c){var f=_e();c=c===void 0?null:c;var g=f.memoizedState.inst;Ut!==null&&c!==null&&nh(c,Ut.memoizedState.deps)?f.memoizedState=Pr(s,o,g,c):(Tt.flags|=n,f.memoizedState=Pr(1|s,o,g,c))}function vg(n,s){zl(8390656,8,n,s)}function dh(n,s){Bl(2048,8,n,s)}function bg(n,s){return Bl(4,2,n,s)}function xg(n,s){return Bl(4,4,n,s)}function Sg(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Tg(n,s,o){o=o!=null?o.concat([n]):null,Bl(4,4,Sg.bind(null,s,n),o)}function fh(){}function wg(n,s){var o=_e();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&nh(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function Cg(n,s){var o=_e();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&nh(s,c[1]))return c[0];if(c=n(),Is){Wi(!0);try{n()}finally{Wi(!1)}}return o.memoizedState=[c,s],c}function ph(n,s,o){return o===void 0||(ts&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=M_(),Tt.lanes|=n,us|=n,o)}function Ag(n,s,o,c){return pn(o,s)?o:Or.current!==null?(n=ph(n,o,c),pn(n,s)||(Me=!0),n):(ts&42)===0?(Me=!0,n.memoizedState=o):(n=M_(),Tt.lanes|=n,us|=n,s)}function Mg(n,s,o,c,f){var g=K.p;K.p=g!==0&&8>g?g:8;var b=F.T,M={};F.T=M,_h(n,!1,s,o);try{var z=f(),q=F.S;if(q!==null&&q(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var et=D1(z,c);Za(n,s,et,yn(n))}else Za(n,s,c,yn(n))}catch(at){Za(n,s,{then:function(){},status:"rejected",reason:at},yn())}finally{K.p=g,F.T=b}}function H1(){}function mh(n,s,o,c){if(n.tag!==5)throw Error(i(476));var f=Eg(n).queue;Mg(n,f,s,J,o===null?H1:function(){return kg(n),o(c)})}function Eg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:J},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function kg(n){var s=Eg(n).next.queue;Za(n,s,{},yn())}function gh(){return qe(go)}function Rg(){return _e().memoizedState}function Dg(){return _e().memoizedState}function P1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=yn();n=ss(o);var c=rs(s,n,o);c!==null&&(Ke(c,s,o),Ka(c,s,o)),s={cache:Ju()},n.payload=s;return}s=s.return}}function V1(n,s,o){var c=yn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Hl(n)?Ng(s,o):(o=Xu(n,s,o,c),o!==null&&(Ke(o,n,c),zg(o,s,c)))}function Og(n,s,o){var c=yn();Za(n,s,o,c)}function Za(n,s,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Hl(n))Ng(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var b=s.lastRenderedState,M=g(b,o);if(f.hasEagerState=!0,f.eagerState=M,pn(M,b))return vl(n,s,f,0),Qt===null&&yl(),!1}catch{}finally{}if(o=Xu(n,s,f,c),o!==null)return Ke(o,n,c),zg(o,s,c),!0}return!1}function _h(n,s,o,c){if(c={lane:2,revertLane:ad(),action:c,hasEagerState:!1,eagerState:null,next:null},Hl(n)){if(s)throw Error(i(479))}else s=Xu(n,o,c,2),s!==null&&Ke(s,n,2)}function Hl(n){var s=n.alternate;return n===Tt||s!==null&&s===Tt}function Ng(n,s){Br=kl=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function zg(n,s,o){if((o&4194176)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Yp(n,o)}}var ci={readContext:qe,use:Ol,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useLayoutEffect:pe,useInsertionEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useSyncExternalStore:pe,useId:pe};ci.useCacheRefresh=pe,ci.useMemoCache=pe,ci.useHostTransitionStatus=pe,ci.useFormState=pe,ci.useActionState=pe,ci.useOptimistic=pe;var Us={readContext:qe,use:Ol,useCallback:function(n,s){return ln().memoizedState=[n,s===void 0?null:s],n},useContext:qe,useEffect:vg,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,zl(4194308,4,Sg.bind(null,s,n),o)},useLayoutEffect:function(n,s){return zl(4194308,4,n,s)},useInsertionEffect:function(n,s){zl(4,2,n,s)},useMemo:function(n,s){var o=ln();s=s===void 0?null:s;var c=n();if(Is){Wi(!0);try{n()}finally{Wi(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=ln();if(o!==void 0){var f=o(s);if(Is){Wi(!0);try{o(s)}finally{Wi(!1)}}}else f=s;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=V1.bind(null,Tt,n),[c.memoizedState,n]},useRef:function(n){var s=ln();return n={current:n},s.memoizedState=n},useState:function(n){n=uh(n);var s=n.queue,o=Og.bind(null,Tt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:fh,useDeferredValue:function(n,s){var o=ln();return ph(o,n,s)},useTransition:function(){var n=uh(!1);return n=Mg.bind(null,Tt,n.queue,!0,!1),ln().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Tt,f=ln();if(zt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Qt===null)throw Error(i(349));(Ot&60)!==0||ig(c,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,vg(rg.bind(null,c,g,n),[n]),c.flags|=2048,Pr(9,sg.bind(null,c,g,o,s),{destroy:void 0},null),o},useId:function(){var n=ln(),s=Qt.identifierPrefix;if(zt){var o=Ci,c=wi;o=(c&~(1<<32-fn(c)-1)).toString(32)+o,s=":"+s+"R"+o,o=Rl++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=O1++,s=":"+s+"r"+o.toString(32)+":";return n.memoizedState=s},useCacheRefresh:function(){return ln().memoizedState=P1.bind(null,Tt)}};Us.useMemoCache=oh,Us.useHostTransitionStatus=gh,Us.useFormState=pg,Us.useActionState=pg,Us.useOptimistic=function(n){var s=ln();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=_h.bind(null,Tt,!0,o),o.dispatch=s,[n,s]};var es={readContext:qe,use:Ol,useCallback:wg,useContext:qe,useEffect:dh,useImperativeHandle:Tg,useInsertionEffect:bg,useLayoutEffect:xg,useMemo:Cg,useReducer:Nl,useRef:yg,useState:function(){return Nl(Mi)},useDebugValue:fh,useDeferredValue:function(n,s){var o=_e();return Ag(o,Ut.memoizedState,n,s)},useTransition:function(){var n=Nl(Mi)[0],s=_e().memoizedState;return[typeof n=="boolean"?n:Wa(n),s]},useSyncExternalStore:ng,useId:Rg};es.useCacheRefresh=Dg,es.useMemoCache=oh,es.useHostTransitionStatus=gh,es.useFormState=mg,es.useActionState=mg,es.useOptimistic=function(n,s){var o=_e();return lg(o,Ut,n,s)};var Gs={readContext:qe,use:Ol,useCallback:wg,useContext:qe,useEffect:dh,useImperativeHandle:Tg,useInsertionEffect:bg,useLayoutEffect:xg,useMemo:Cg,useReducer:ch,useRef:yg,useState:function(){return ch(Mi)},useDebugValue:fh,useDeferredValue:function(n,s){var o=_e();return Ut===null?ph(o,n,s):Ag(o,Ut.memoizedState,n,s)},useTransition:function(){var n=ch(Mi)[0],s=_e().memoizedState;return[typeof n=="boolean"?n:Wa(n),s]},useSyncExternalStore:ng,useId:Rg};Gs.useCacheRefresh=Dg,Gs.useMemoCache=oh,Gs.useHostTransitionStatus=gh,Gs.useFormState=_g,Gs.useActionState=_g,Gs.useOptimistic=function(n,s){var o=_e();return Ut!==null?lg(o,Ut,n,s):(o.baseState=n,[n,o.queue.dispatch])};function yh(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:L({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var vh={isMounted:function(n){return(n=n._reactInternals)?D(n)===n:!1},enqueueSetState:function(n,s,o){n=n._reactInternals;var c=yn(),f=ss(c);f.payload=s,o!=null&&(f.callback=o),s=rs(n,f,c),s!==null&&(Ke(s,n,c),Ka(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=yn(),f=ss(c);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=rs(n,f,c),s!==null&&(Ke(s,n,c),Ka(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=yn(),c=ss(o);c.tag=2,s!=null&&(c.callback=s),s=rs(n,c,o),s!==null&&(Ke(s,n,o),Ka(s,n,o))}};function Bg(n,s,o,c,f,g,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,b):s.prototype&&s.prototype.isPureReactComponent?!Ha(o,c)||!Ha(f,g):!0}function Hg(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&vh.enqueueReplaceState(s,s.state,null)}function Ls(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=L({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Pl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Pg(n){Pl(n)}function Vg(n){console.error(n)}function Ig(n){Pl(n)}function Vl(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Ug(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function bh(n,s,o){return o=ss(o),o.tag=3,o.payload={element:null},o.callback=function(){Vl(n,s)},o}function Gg(n){return n=ss(n),n.tag=3,n}function Lg(n,s,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){Ug(s,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){Ug(s,o,c),typeof f!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})})}function I1(n,s,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&$a(s,o,f,!0),o=Nn.current,o!==null){switch(o.tag){case 13:return li===null?ed():o.alternate===null&&oe===0&&(oe=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Qu?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),id(n,c,f)),!1;case 22:return o.flags|=65536,c===Qu?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),id(n,c,f)),!1}throw Error(i(435,o.tag))}return id(n,c,f),ed(),!1}if(zt)return s=Nn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==Zu&&(n=Error(i(422),{cause:c}),Ua(Rn(n,o)))):(c!==Zu&&(s=Error(i(423),{cause:c}),Ua(Rn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Rn(c,o),f=bh(n.stateNode,c,f),Bh(n,f),oe!==4&&(oe=2)),!1;var g=Error(i(520),{cause:c});if(g=Rn(g,o),ao===null?ao=[g]:ao.push(g),oe!==4&&(oe=2),s===null)return!0;c=Rn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=bh(o.stateNode,c,n),Bh(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(hs===null||!hs.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Gg(f),Lg(f,n,o,c),Bh(o,f),!1}o=o.return}while(o!==null);return!1}var qg=Error(i(461)),Me=!1;function He(n,s,o,c){s.child=n===null?Wm(s,null,o,c):Ps(s,n.child,o,c)}function Fg(n,s,o,c,f){o=o.render;var g=s.ref;if("ref"in c){var b={};for(var M in c)M!=="ref"&&(b[M]=c[M])}else b=c;return Fs(s),c=ih(n,s,o,b,g,f),M=sh(),n!==null&&!Me?(rh(n,s,f),Ei(n,s,f)):(zt&&M&&ju(s),s.flags|=1,He(n,s,c,f),s.child)}function Yg(n,s,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!qh(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Xg(n,s,g,c,f)):(n=ql(o.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!kh(n,f)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ha,o(b,c)&&n.ref===s.ref)return Ei(n,s,f)}return s.flags|=1,n=cs(g,c),n.ref=s.ref,n.return=s,s.child=n}function Xg(n,s,o,c,f){if(n!==null){var g=n.memoizedProps;if(Ha(g,c)&&n.ref===s.ref)if(Me=!1,s.pendingProps=c=g,kh(n,f))(n.flags&131072)!==0&&(Me=!0);else return s.lanes=n.lanes,Ei(n,s,f)}return xh(n,s,o,c,f)}function jg(n,s,o){var c=s.pendingProps,f=c.children,g=(s.stateNode._pendingVisibility&2)!==0,b=n!==null?n.memoizedState:null;if(Qa(n,s),c.mode==="hidden"||g){if((s.flags&128)!==0){if(c=b!==null?b.baseLanes|o:o,n!==null){for(f=s.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return Wg(n,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&El(s,b!==null?b.cachePool:null),b!==null?Zm(s,b):$u(),Qm(s);else return s.lanes=s.childLanes=536870912,Wg(n,s,b!==null?b.baseLanes|o:o,o)}else b!==null?(El(s,b.cachePool),Zm(s,b),Ji(),s.memoizedState=null):(n!==null&&El(s,null),$u(),Ji());return He(n,s,f,o),s.child}function Wg(n,s,o,c){var f=eh();return f=f===null?null:{parent:we._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&El(s,null),$u(),Qm(s),n!==null&&$a(n,s,c,!0),null}function Qa(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=2097664)}}function xh(n,s,o,c,f){return Fs(s),o=ih(n,s,o,c,void 0,f),c=sh(),n!==null&&!Me?(rh(n,s,f),Ei(n,s,f)):(zt&&c&&ju(s),s.flags|=1,He(n,s,o,f),s.child)}function Zg(n,s,o,c,f,g){return Fs(s),s.updateQueue=null,o=eg(s,c,o,f),tg(n),c=sh(),n!==null&&!Me?(rh(n,s,g),Ei(n,s,g)):(zt&&c&&ju(s),s.flags|=1,He(n,s,o,g),s.child)}function Qg(n,s,o,c,f){if(Fs(s),s.stateNode===null){var g=Er,b=o.contextType;typeof b=="object"&&b!==null&&(g=qe(b)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=vh,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Nh(s),b=o.contextType,g.context=typeof b=="object"&&b!==null?qe(b):Er,g.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(yh(s,o,b,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&vh.enqueueReplaceState(g,g.state,null),to(s,c,g,f),Ja(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){g=s.stateNode;var M=s.memoizedProps,z=Ls(o,M);g.props=z;var q=g.context,et=o.contextType;b=Er,typeof et=="object"&&et!==null&&(b=qe(et));var at=o.getDerivedStateFromProps;et=typeof at=="function"||typeof g.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,et||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(M||q!==b)&&Hg(s,g,c,b),is=!1;var Z=s.memoizedState;g.state=Z,to(s,c,g,f),Ja(),q=s.memoizedState,M||Z!==q||is?(typeof at=="function"&&(yh(s,o,at,c),q=s.memoizedState),(z=is||Bg(s,o,z,c,Z,q,b))?(et||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=q),g.props=c,g.state=q,g.context=b,c=z):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,zh(n,s),b=s.memoizedProps,et=Ls(o,b),g.props=et,at=s.pendingProps,Z=g.context,q=o.contextType,z=Er,typeof q=="object"&&q!==null&&(z=qe(q)),M=o.getDerivedStateFromProps,(q=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==at||Z!==z)&&Hg(s,g,c,z),is=!1,Z=s.memoizedState,g.state=Z,to(s,c,g,f),Ja();var tt=s.memoizedState;b!==at||Z!==tt||is||n!==null&&n.dependencies!==null&&Il(n.dependencies)?(typeof M=="function"&&(yh(s,o,M,c),tt=s.memoizedState),(et=is||Bg(s,o,et,c,Z,tt,z)||n!==null&&n.dependencies!==null&&Il(n.dependencies))?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,tt,z),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,tt,z)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=tt),g.props=c,g.state=tt,g.context=z,c=et):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),c=!1)}return g=c,Qa(n,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&c?(s.child=Ps(s,n.child,null,f),s.child=Ps(s,null,o,f)):He(n,s,o,f),s.memoizedState=g.state,n=s.child):n=Ei(n,s,f),n}function $g(n,s,o,c){return Ia(),s.flags|=256,He(n,s,o,c),s.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function Th(n){return{baseLanes:n,cachePool:Jm()}}function wh(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Pn),n}function Kg(n,s,o){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,b;if((b=g)||(b=n!==null&&n.memoizedState===null?!1:(Te.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(zt){if(f?Ki(s):Ji(),zt){var M=Be,z;if(z=M){t:{for(z=M,M=oi;z.nodeType!==8;){if(!M){M=null;break t}if(z=jn(z.nextSibling),z===null){M=null;break t}}M=z}M!==null?(s.memoizedState={dehydrated:M,treeContext:zs!==null?{id:wi,overflow:Ci}:null,retryLane:536870912},z=Hn(18,null,null,0),z.stateNode=M,z.return=s,s.child=z,$e=s,Be=null,z=!0):z=!1}z||Hs(s)}if(M=s.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return M.data==="$!"?s.lanes=16:s.lanes=536870912,null;Ai(s)}return M=c.children,c=c.fallback,f?(Ji(),f=s.mode,M=Ah({mode:"hidden",children:M},f),c=Xs(c,f,o,null),M.return=s,c.return=s,M.sibling=c,s.child=M,f=s.child,f.memoizedState=Th(o),f.childLanes=wh(n,b,o),s.memoizedState=Sh,c):(Ki(s),Ch(s,M))}if(z=n.memoizedState,z!==null&&(M=z.dehydrated,M!==null)){if(g)s.flags&256?(Ki(s),s.flags&=-257,s=Mh(n,s,o)):s.memoizedState!==null?(Ji(),s.child=n.child,s.flags|=128,s=null):(Ji(),f=c.fallback,M=s.mode,c=Ah({mode:"visible",children:c.children},M),f=Xs(f,M,o,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,Ps(s,n.child,null,o),c=s.child,c.memoizedState=Th(o),c.childLanes=wh(n,b,o),s.memoizedState=Sh,s=f);else if(Ki(s),M.data==="$!"){if(b=M.nextSibling&&M.nextSibling.dataset,b)var q=b.dgst;b=q,c=Error(i(419)),c.stack="",c.digest=b,Ua({value:c,source:null,stack:null}),s=Mh(n,s,o)}else if(Me||$a(n,s,o,!1),b=(o&n.childLanes)!==0,Me||b){if(b=Qt,b!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(b.suspendedLanes|o))!==0?0:c,c!==0&&c!==z.retryLane)throw z.retryLane=c,$i(n,c),Ke(b,n,c),qg}M.data==="$?"||ed(),s=Mh(n,s,o)}else M.data==="$?"?(s.flags|=128,s.child=n.child,s=tS.bind(null,n),M._reactRetry=s,s=null):(n=z.treeContext,Be=jn(M.nextSibling),$e=s,zt=!0,Yn=null,oi=!1,n!==null&&(Dn[On++]=wi,Dn[On++]=Ci,Dn[On++]=zs,wi=n.id,Ci=n.overflow,zs=s),s=Ch(s,c.children),s.flags|=4096);return s}return f?(Ji(),f=c.fallback,M=s.mode,z=n.child,q=z.sibling,c=cs(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&31457280,q!==null?f=cs(q,f):(f=Xs(f,M,o,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,M=n.child.memoizedState,M===null?M=Th(o):(z=M.cachePool,z!==null?(q=we._currentValue,z=z.parent!==q?{parent:q,pool:q}:z):z=Jm(),M={baseLanes:M.baseLanes|o,cachePool:z}),f.memoizedState=M,f.childLanes=wh(n,b,o),s.memoizedState=Sh,c):(Ki(s),o=n.child,n=o.sibling,o=cs(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=o,s.memoizedState=null,o)}function Ch(n,s){return s=Ah({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ah(n,s){return w_(n,s,0,null)}function Mh(n,s,o){return Ps(s,n.child,null,o),n=Ch(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Jg(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Dh(n.return,s,o)}function Eh(n,s,o,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=f)}function t_(n,s,o){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(He(n,s,c.children,o),c=Te.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Jg(n,o,s);else if(n.tag===19)Jg(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(ht(Te,c),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Ml(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Eh(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Ml(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Eh(s,!0,o,null,g);break;case"together":Eh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ei(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),us|=s.lanes,(o&s.childLanes)===0)if(n!==null){if($a(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=cs(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=cs(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function kh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Il(n)))}function U1(n,s,o){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),ns(s,we,n.memoizedState.cache),Ia();break;case 27:case 5:Wt(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:ns(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ki(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Kg(n,s,o):(Ki(s),n=Ei(n,s,o),n!==null?n.sibling:null);Ki(s);break;case 19:var f=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||($a(n,s,o,!1),c=(o&s.childLanes)!==0),f){if(c)return t_(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ht(Te,Te.current),c)break;return null;case 22:case 23:return s.lanes=0,jg(n,s,o);case 24:ns(s,we,n.memoizedState.cache)}return Ei(n,s,o)}function e_(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Me=!0;else{if(!kh(n,o)&&(s.flags&128)===0)return Me=!1,U1(n,s,o);Me=(n.flags&131072)!==0}else Me=!1,zt&&(s.flags&1048576)!==0&&Im(s,Sl,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")qh(c)?(n=Ls(c,n),s.tag=1,s=Qg(null,s,c,n,o)):(s.tag=0,s=xh(null,s,c,n,o));else{if(c!=null){if(f=c.$$typeof,f===x){s.tag=11,s=Fg(null,s,c,n,o);break t}else if(f===A){s.tag=14,s=Yg(null,s,c,n,o);break t}}throw s=I(c)||c,Error(i(306,s,""))}}return s;case 0:return xh(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,f=Ls(c,s.pendingProps),Qg(n,s,c,f,o);case 3:t:{if(it(s,s.stateNode.containerInfo),n===null)throw Error(i(387));var g=s.pendingProps;f=s.memoizedState,c=f.element,zh(n,s),to(s,g,null,o);var b=s.memoizedState;if(g=b.cache,ns(s,we,g),g!==f.cache&&Oh(s,[we],o,!0),Ja(),g=b.element,f.isDehydrated)if(f={element:g,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=$g(n,s,g,o);break t}else if(g!==c){c=Rn(Error(i(424)),s),Ua(c),s=$g(n,s,g,o);break t}else for(Be=jn(s.stateNode.containerInfo.firstChild),$e=s,zt=!0,Yn=null,oi=!0,o=Wm(s,null,g,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ia(),g===c){s=Ei(n,s,o);break t}He(n,s,g,o)}s=s.child}return s;case 26:return Qa(n,s),n===null?(o=sy(s.type,null,s.pendingProps,null))?s.memoizedState=o:zt||(o=s.type,n=s.pendingProps,c=ec(fe.current).createElement(o),c[Le]=s,c[an]=n,Pe(c,o,n),Ae(c),s.stateNode=c):s.memoizedState=sy(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Wt(s),n===null&&zt&&(c=s.stateNode=ey(s.type,s.pendingProps,fe.current),$e=s,oi=!0,Be=jn(c.firstChild)),c=s.pendingProps.children,n!==null||zt?He(n,s,c,o):s.child=Ps(s,null,c,o),Qa(n,s),s.child;case 5:return n===null&&zt&&((f=c=Be)&&(c=gS(c,s.type,s.pendingProps,oi),c!==null?(s.stateNode=c,$e=s,Be=jn(c.firstChild),oi=!1,f=!0):f=!1),f||Hs(s)),Wt(s),f=s.type,g=s.pendingProps,b=n!==null?n.memoizedProps:null,c=g.children,md(f,g)?c=null:b!==null&&md(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=ih(n,s,N1,null,null,o),go._currentValue=f),Qa(n,s),He(n,s,c,o),s.child;case 6:return n===null&&zt&&((n=o=Be)&&(o=_S(o,s.pendingProps,oi),o!==null?(s.stateNode=o,$e=s,Be=null,n=!0):n=!1),n||Hs(s)),null;case 13:return Kg(n,s,o);case 4:return it(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ps(s,null,c,o):He(n,s,c,o),s.child;case 11:return Fg(n,s,s.type,s.pendingProps,o);case 7:return He(n,s,s.pendingProps,o),s.child;case 8:return He(n,s,s.pendingProps.children,o),s.child;case 12:return He(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,ns(s,s.type,c.value),He(n,s,c.children,o),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,Fs(s),f=qe(f),c=c(f),s.flags|=1,He(n,s,c,o),s.child;case 14:return Yg(n,s,s.type,s.pendingProps,o);case 15:return Xg(n,s,s.type,s.pendingProps,o);case 19:return t_(n,s,o);case 22:return jg(n,s,o);case 24:return Fs(s),c=qe(we),n===null?(f=eh(),f===null&&(f=Qt,g=Ju(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:c,cache:f},Nh(s),ns(s,we,f)):((n.lanes&o)!==0&&(zh(n,s),to(s,null,null,o),Ja()),f=n.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ns(s,we,c)):(c=g.cache,ns(s,we,c),c!==f.cache&&Oh(s,[we],o,!0))),He(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var Rh=nt(null),qs=null,ki=null;function ns(n,s,o){ht(Rh,s._currentValue),s._currentValue=o}function Ri(n){n._currentValue=Rh.current,_t(Rh)}function Dh(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function Oh(n,s,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;t:for(;g!==null;){var M=g;g=f;for(var z=0;z<s.length;z++)if(M.context===s[z]){g.lanes|=o,M=g.alternate,M!==null&&(M.lanes|=o),Dh(g.return,o,n),c||(b=null);break t}g=M.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),Dh(b,o,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function $a(n,s,o,c){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var M=f.type;pn(f.pendingProps.value,b.value)||(n!==null?n.push(M):n=[M])}}else if(f===ze.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(go):n=[go])}f=f.return}n!==null&&Oh(s,n,o,c),s.flags|=262144}function Il(n){for(n=n.firstContext;n!==null;){if(!pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fs(n){qs=n,ki=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function qe(n){return n_(qs,n)}function Ul(n,s){return qs===null&&Fs(n),n_(n,s)}function n_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ki===null){if(n===null)throw Error(i(308));ki=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ki=ki.next=s;return o}var is=!1;function Nh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ss(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function rs(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ie&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=bl(n),Pm(n,null,o),s}return vl(n,c,s,o),bl(n)}function Ka(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194176)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Yp(n,o)}}function Bh(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Hh=!1;function Ja(){if(Hh){var n=zr;if(n!==null)throw n}}function to(n,s,o,c){Hh=!1;var f=n.updateQueue;is=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,M=f.shared.pending;if(M!==null){f.shared.pending=null;var z=M,q=z.next;z.next=null,b===null?g=q:b.next=q,b=z;var et=n.alternate;et!==null&&(et=et.updateQueue,M=et.lastBaseUpdate,M!==b&&(M===null?et.firstBaseUpdate=q:M.next=q,et.lastBaseUpdate=z))}if(g!==null){var at=f.baseState;b=0,et=q=z=null,M=g;do{var Z=M.lane&-536870913,tt=Z!==M.lane;if(tt?(Ot&Z)===Z:(c&Z)===Z){Z!==0&&Z===Nr&&(Hh=!0),et!==null&&(et=et.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var pt=n,bt=M;Z=s;var le=o;switch(bt.tag){case 1:if(pt=bt.payload,typeof pt=="function"){at=pt.call(le,at,Z);break t}at=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=bt.payload,Z=typeof pt=="function"?pt.call(le,at,Z):pt,Z==null)break t;at=L({},at,Z);break t;case 2:is=!0}}Z=M.callback,Z!==null&&(n.flags|=64,tt&&(n.flags|=8192),tt=f.callbacks,tt===null?f.callbacks=[Z]:tt.push(Z))}else tt={lane:Z,tag:M.tag,payload:M.payload,callback:M.callback,next:null},et===null?(q=et=tt,z=at):et=et.next=tt,b|=Z;if(M=M.next,M===null){if(M=f.shared.pending,M===null)break;tt=M,M=tt.next,tt.next=null,f.lastBaseUpdate=tt,f.shared.pending=null}}while(!0);et===null&&(z=at),f.baseState=z,f.firstBaseUpdate=q,f.lastBaseUpdate=et,g===null&&(f.shared.lanes=0),us|=b,n.lanes=b,n.memoizedState=at}}function i_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function s_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)i_(o[n],s)}function eo(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,b=o.inst;c=g(),b.destroy=c}o=o.next}while(o!==f)}}catch(M){Ft(s,s.return,M)}}function as(n,s,o){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var b=c.inst,M=b.destroy;if(M!==void 0){b.destroy=void 0,f=s;var z=o;try{M()}catch(q){Ft(f,z,q)}}}c=c.next}while(c!==g)}}catch(q){Ft(s,s.return,q)}}function r_(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{s_(s,o)}catch(c){Ft(n,n.return,c)}}}function a_(n,s,o){o.props=Ls(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Ft(n,s,c)}}function Ys(n,s){try{var o=n.ref;if(o!==null){var c=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=c;break;default:f=c}typeof o=="function"?n.refCleanup=o(f):o.current=f}}catch(g){Ft(n,s,g)}}function mn(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){Ft(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ft(n,s,f)}else o.current=null}function o_(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){Ft(n,n.return,f)}}function l_(n,s,o){try{var c=n.stateNode;hS(c,n.type,o,s),c[an]=s}catch(f){Ft(n,n.return,f)}}function c_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Ph(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||c_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vh(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(n,s):o.insertBefore(n,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(n,o)):(s=o,s.appendChild(n)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=tc));else if(c!==4&&c!==27&&(n=n.child,n!==null))for(Vh(n,s,o),n=n.sibling;n!==null;)Vh(n,s,o),n=n.sibling}function Gl(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&c!==27&&(n=n.child,n!==null))for(Gl(n,s,o),n=n.sibling;n!==null;)Gl(n,s,o),n=n.sibling}var Di=!1,ae=!1,Ih=!1,u_=typeof WeakSet=="function"?WeakSet:Set,Ee=null,h_=!1;function G1(n,s){if(n=n.containerInfo,fd=oc,n=Em(n),Gu(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var b=0,M=-1,z=-1,q=0,et=0,at=n,Z=null;e:for(;;){for(var tt;at!==o||f!==0&&at.nodeType!==3||(M=b+f),at!==g||c!==0&&at.nodeType!==3||(z=b+c),at.nodeType===3&&(b+=at.nodeValue.length),(tt=at.firstChild)!==null;)Z=at,at=tt;for(;;){if(at===n)break e;if(Z===o&&++q===f&&(M=b),Z===g&&++et===c&&(z=b),(tt=at.nextSibling)!==null)break;at=Z,Z=at.parentNode}at=tt}o=M===-1||z===-1?null:{start:M,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(pd={focusedElem:n,selectionRange:o},oc=!1,Ee=s;Ee!==null;)if(s=Ee,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ee=n;else for(;Ee!==null;){switch(s=Ee,g=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var pt=Ls(o.type,f,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(pt,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(bt){Ft(o,o.return,bt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)yd(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":yd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ee=n;break}Ee=s.return}return pt=h_,h_=!1,pt}function d_(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ni(n,o),c&4&&eo(5,o);break;case 1:if(Ni(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(M){Ft(o,o.return,M)}else{var f=Ls(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(M){Ft(o,o.return,M)}}c&64&&r_(o),c&512&&Ys(o,o.return);break;case 3:if(Ni(n,o),c&64&&(c=o.updateQueue,c!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{s_(c,n)}catch(M){Ft(o,o.return,M)}}break;case 26:Ni(n,o),c&512&&Ys(o,o.return);break;case 27:case 5:Ni(n,o),s===null&&c&4&&o_(o),c&512&&Ys(o,o.return);break;case 12:Ni(n,o);break;case 13:Ni(n,o),c&4&&m_(n,o);break;case 22:if(f=o.memoizedState!==null||Di,!f){s=s!==null&&s.memoizedState!==null||ae;var g=Di,b=ae;Di=f,(ae=s)&&!b?os(n,o,(o.subtreeFlags&8772)!==0):Ni(n,o),Di=g,ae=b}c&512&&(o.memoizedProps.mode==="manual"?Ys(o,o.return):mn(o,o.return));break;default:Ni(n,o)}}function f_(n){var s=n.alternate;s!==null&&(n.alternate=null,f_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Cu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ye=null,gn=!1;function Oi(n,s,o){for(o=o.child;o!==null;)p_(n,s,o),o=o.sibling}function p_(n,s,o){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(wa,o)}catch{}switch(o.tag){case 26:ae||mn(o,s),Oi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ae||mn(o,s);var c=ye,f=gn;for(ye=o.stateNode,Oi(n,s,o),o=o.stateNode,s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Cu(o),ye=c,gn=f;break;case 5:ae||mn(o,s);case 6:f=ye;var g=gn;if(ye=null,Oi(n,s,o),ye=f,gn=g,ye!==null)if(gn)try{n=ye,c=o.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)}catch(b){Ft(o,s,b)}else try{ye.removeChild(o.stateNode)}catch(b){Ft(o,s,b)}break;case 18:ye!==null&&(gn?(s=ye,o=o.stateNode,s.nodeType===8?_d(s.parentNode,o):s.nodeType===1&&_d(s,o),bo(s)):_d(ye,o.stateNode));break;case 4:c=ye,f=gn,ye=o.stateNode.containerInfo,gn=!0,Oi(n,s,o),ye=c,gn=f;break;case 0:case 11:case 14:case 15:ae||as(2,o,s),ae||as(4,o,s),Oi(n,s,o);break;case 1:ae||(mn(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&a_(o,s,c)),Oi(n,s,o);break;case 21:Oi(n,s,o);break;case 22:ae||mn(o,s),ae=(c=ae)||o.memoizedState!==null,Oi(n,s,o),ae=c;break;default:Oi(n,s,o)}}function m_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{bo(n)}catch(o){Ft(s,s.return,o)}}function L1(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new u_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new u_),s;default:throw Error(i(435,n.tag))}}function Uh(n,s){var o=L1(n);s.forEach(function(c){var f=eS.bind(null,n,c);o.has(c)||(o.add(c),c.then(f,f))})}function zn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,b=s,M=b;t:for(;M!==null;){switch(M.tag){case 27:case 5:ye=M.stateNode,gn=!1;break t;case 3:ye=M.stateNode.containerInfo,gn=!0;break t;case 4:ye=M.stateNode.containerInfo,gn=!0;break t}M=M.return}if(ye===null)throw Error(i(160));p_(g,b,f),ye=null,gn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)g_(s,n),s=s.sibling}var Xn=null;function g_(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:zn(s,n),Bn(n),c&4&&(as(3,n,n.return),eo(3,n),as(5,n,n.return));break;case 1:zn(s,n),Bn(n),c&512&&(ae||o===null||mn(o,o.return)),c&64&&Di&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Xn;if(zn(s,n),Bn(n),c&512&&(ae||o===null||mn(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){t:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ma]||g[Le]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),Pe(g,c,o),g[Le]=n,Ae(g),c=g;break t;case"link":var b=oy("link","href",f).get(c+(o.href||""));if(b){for(var M=0;M<b.length;M++)if(g=b[M],g.getAttribute("href")===(o.href==null?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(M,1);break e}}g=f.createElement(c),Pe(g,c,o),f.head.appendChild(g);break;case"meta":if(b=oy("meta","content",f).get(c+(o.content||""))){for(M=0;M<b.length;M++)if(g=b[M],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(M,1);break e}}g=f.createElement(c),Pe(g,c,o),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[Le]=n,Ae(g),c=g}n.stateNode=c}else ly(f,n.type,n.stateNode);else n.stateNode=ay(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?ly(f,n.type,n.stateNode):ay(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&l_(n,n.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&n.alternate===null){f=n.stateNode,g=n.memoizedProps;try{for(var z=f.firstChild;z;){var q=z.nextSibling,et=z.nodeName;z[Ma]||et==="HEAD"||et==="BODY"||et==="SCRIPT"||et==="STYLE"||et==="LINK"&&z.rel.toLowerCase()==="stylesheet"||f.removeChild(z),z=q}for(var at=n.type,Z=f.attributes;Z.length;)f.removeAttributeNode(Z[0]);Pe(f,at,g),f[Le]=n,f[an]=g}catch(pt){Ft(n,n.return,pt)}}case 5:if(zn(s,n),Bn(n),c&512&&(ae||o===null||mn(o,o.return)),n.flags&32){f=n.stateNode;try{xr(f,"")}catch(pt){Ft(n,n.return,pt)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,l_(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Ih=!0);break;case 6:if(zn(s,n),Bn(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(pt){Ft(n,n.return,pt)}}break;case 3:if(sc=null,f=Xn,Xn=nc(s.containerInfo),zn(s,n),Xn=f,Bn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{bo(s.containerInfo)}catch(pt){Ft(n,n.return,pt)}Ih&&(Ih=!1,__(n));break;case 4:c=Xn,Xn=nc(n.stateNode.containerInfo),zn(s,n),Bn(n),Xn=c;break;case 12:zn(s,n),Bn(n);break;case 13:zn(s,n),Bn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zh=rn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Uh(n,c)));break;case 22:if(c&512&&(ae||o===null||mn(o,o.return)),z=n.memoizedState!==null,q=o!==null&&o.memoizedState!==null,et=Di,at=ae,Di=et||z,ae=at||q,zn(s,n),ae=at,Di=et,Bn(n),s=n.stateNode,s._current=n,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,c&8192&&(s._visibility=z?s._visibility&-2:s._visibility|1,z&&(s=Di||ae,o===null||q||s||Vr(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))t:for(o=null,s=n;;){if(s.tag===5||s.tag===26||s.tag===27){if(o===null){q=o=s;try{if(f=q.stateNode,z)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=q.stateNode,M=q.memoizedProps.style;var tt=M!=null&&M.hasOwnProperty("display")?M.display:null;b.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(pt){Ft(q,q.return,pt)}}}else if(s.tag===6){if(o===null){q=s;try{q.stateNode.nodeValue=z?"":q.memoizedProps}catch(pt){Ft(q,q.return,pt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Uh(n,o))));break;case 19:zn(s,n),Bn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Uh(n,c)));break;case 21:break;default:zn(s,n),Bn(n)}}function Bn(n){var s=n.flags;if(s&2){try{if(n.tag!==27){t:{for(var o=n.return;o!==null;){if(c_(o)){var c=o;break t}o=o.return}throw Error(i(160))}switch(c.tag){case 27:var f=c.stateNode,g=Ph(n);Gl(n,g,f);break;case 5:var b=c.stateNode;c.flags&32&&(xr(b,""),c.flags&=-33);var M=Ph(n);Gl(n,M,b);break;case 3:case 4:var z=c.stateNode.containerInfo,q=Ph(n);Vh(n,q,z);break;default:throw Error(i(161))}}}catch(et){Ft(n,n.return,et)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function __(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;__(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ni(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)d_(n,s.alternate,s),s=s.sibling}function Vr(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:as(4,s,s.return),Vr(s);break;case 1:mn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&a_(s,s.return,o),Vr(s);break;case 26:case 27:case 5:mn(s,s.return),Vr(s);break;case 22:mn(s,s.return),s.memoizedState===null&&Vr(s);break;default:Vr(s)}n=n.sibling}}function os(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=n,g=s,b=g.flags;switch(g.tag){case 0:case 11:case 15:os(f,g,o),eo(4,g);break;case 1:if(os(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Ft(c,c.return,q)}if(c=g,f=c.updateQueue,f!==null){var M=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)i_(z[f],M)}catch(q){Ft(c,c.return,q)}}o&&b&64&&r_(g),Ys(g,g.return);break;case 26:case 27:case 5:os(f,g,o),o&&c===null&&b&4&&o_(g),Ys(g,g.return);break;case 12:os(f,g,o);break;case 13:os(f,g,o),o&&b&4&&m_(f,g);break;case 22:g.memoizedState===null&&os(f,g,o),Ys(g,g.return);break;default:os(f,g,o)}s=s.sibling}}function Gh(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Ya(o))}function Lh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ya(n))}function ls(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)y_(n,s,o,c),s=s.sibling}function y_(n,s,o,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ls(n,s,o,c),f&2048&&eo(9,s);break;case 3:ls(n,s,o,c),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ya(n)));break;case 12:if(f&2048){ls(n,s,o,c),n=s.stateNode;try{var g=s.memoizedProps,b=g.id,M=g.onPostCommit;typeof M=="function"&&M(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){Ft(s,s.return,z)}}else ls(n,s,o,c);break;case 23:break;case 22:g=s.stateNode,s.memoizedState!==null?g._visibility&4?ls(n,s,o,c):no(n,s):g._visibility&4?ls(n,s,o,c):(g._visibility|=4,Ir(n,s,o,c,(s.subtreeFlags&10256)!==0)),f&2048&&Gh(s.alternate,s);break;case 24:ls(n,s,o,c),f&2048&&Lh(s.alternate,s);break;default:ls(n,s,o,c)}}function Ir(n,s,o,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=n,b=s,M=o,z=c,q=b.flags;switch(b.tag){case 0:case 11:case 15:Ir(g,b,M,z,f),eo(8,b);break;case 23:break;case 22:var et=b.stateNode;b.memoizedState!==null?et._visibility&4?Ir(g,b,M,z,f):no(g,b):(et._visibility|=4,Ir(g,b,M,z,f)),f&&q&2048&&Gh(b.alternate,b);break;case 24:Ir(g,b,M,z,f),f&&q&2048&&Lh(b.alternate,b);break;default:Ir(g,b,M,z,f)}s=s.sibling}}function no(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,f=c.flags;switch(c.tag){case 22:no(o,c),f&2048&&Gh(c.alternate,c);break;case 24:no(o,c),f&2048&&Lh(c.alternate,c);break;default:no(o,c)}s=s.sibling}}var io=8192;function Ur(n){if(n.subtreeFlags&io)for(n=n.child;n!==null;)v_(n),n=n.sibling}function v_(n){switch(n.tag){case 26:Ur(n),n.flags&io&&n.memoizedState!==null&&RS(Xn,n.memoizedState,n.memoizedProps);break;case 5:Ur(n);break;case 3:case 4:var s=Xn;Xn=nc(n.stateNode.containerInfo),Ur(n),Xn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=io,io=16777216,Ur(n),io=s):Ur(n));break;default:Ur(n)}}function b_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function so(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Ee=c,S_(c,n)}b_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)x_(n),n=n.sibling}function x_(n){switch(n.tag){case 0:case 11:case 15:so(n),n.flags&2048&&as(9,n,n.return);break;case 3:so(n);break;case 12:so(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&4&&(n.return===null||n.return.tag!==13)?(s._visibility&=-5,Ll(n)):so(n);break;default:so(n)}}function Ll(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Ee=c,S_(c,n)}b_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:as(8,s,s.return),Ll(s);break;case 22:o=s.stateNode,o._visibility&4&&(o._visibility&=-5,Ll(s));break;default:Ll(s)}n=n.sibling}}function S_(n,s){for(;Ee!==null;){var o=Ee;switch(o.tag){case 0:case 11:case 15:as(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ya(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Ee=c;else t:for(o=n;Ee!==null;){c=Ee;var f=c.sibling,g=c.return;if(f_(c),c===o){Ee=null;break t}if(f!==null){f.return=g,Ee=f;break t}Ee=g}}}function q1(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(n,s,o,c){return new q1(n,s,o,c)}function qh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cs(n,s){var o=n.alternate;return o===null?(o=Hn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&31457280,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function T_(n,s){n.flags&=31457282;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function ql(n,s,o,c,f,g){var b=0;if(c=n,typeof n=="function")qh(n)&&(b=1);else if(typeof n=="string")b=ES(n,o,qt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case d:return Xs(o.children,f,g,s);case p:b=8,f|=24;break;case m:return n=Hn(12,o,s,f|2),n.elementType=m,n.lanes=g,n;case w:return n=Hn(13,o,s,f),n.elementType=w,n.lanes=g,n;case S:return n=Hn(19,o,s,f),n.elementType=S,n.lanes=g,n;case O:return w_(o,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _:case y:b=10;break t;case v:b=9;break t;case x:b=11;break t;case A:b=14;break t;case R:b=16,c=null;break t}b=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=Hn(b,o,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function Xs(n,s,o,c){return n=Hn(7,n,c,s),n.lanes=o,n}function w_(n,s,o,c){n=Hn(22,n,c,s),n.elementType=O,n.lanes=o;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=f._current;if(g===null)throw Error(i(456));if((f._pendingVisibility&2)===0){var b=$i(g,2);b!==null&&(f._pendingVisibility|=2,Ke(b,g,2))}},attach:function(){var g=f._current;if(g===null)throw Error(i(456));if((f._pendingVisibility&2)!==0){var b=$i(g,2);b!==null&&(f._pendingVisibility&=-3,Ke(b,g,2))}}};return n.stateNode=f,n}function Fh(n,s,o){return n=Hn(6,n,null,s),n.lanes=o,n}function Yh(n,s,o){return s=Hn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function zi(n){n.flags|=4}function C_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cy(s)){if(s=Nn.current,s!==null&&((Ot&4194176)===Ot?li!==null:(Ot&62914560)!==Ot&&(Ot&536870912)===0||s!==li))throw La=Qu,Lm;n.flags|=8192}}function Fl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?qp():536870912,n.lanes|=s,Lr|=s)}function ro(n,s){if(!zt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ne(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&31457280,c|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function F1(n,s,o){var c=s.pendingProps;switch(Wu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ne(s),null;case 1:return ne(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ri(we),ct(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Va(s)?zi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yn!==null&&(Jh(Yn),Yn=null))),ne(s),null;case 26:return o=s.memoizedState,n===null?(zi(s),o!==null?(ne(s),C_(s,o)):(ne(s),s.flags&=-16777217)):o?o!==n.memoizedState?(zi(s),ne(s),C_(s,o)):(ne(s),s.flags&=-16777217):(n.memoizedProps!==c&&zi(s),ne(s),s.flags&=-16777217),null;case 27:Ht(s),o=fe.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&zi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ne(s),null}n=qt.current,Va(s)?Um(s):(n=ey(f,c,o),s.stateNode=n,zi(s))}return ne(s),null;case 5:if(Ht(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&zi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ne(s),null}if(n=qt.current,Va(s))Um(s);else{switch(f=ec(fe.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}n[Le]=s,n[an]=c;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;t:switch(Pe(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&zi(s)}}return ne(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&zi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=fe.current,Va(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,f=$e,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Le]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Z_(n.nodeValue,o)),n||Hs(s)}else n=ec(n).createTextNode(c),n[Le]=s,s.stateNode=n}return ne(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Va(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Le]=s}else Ia(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ne(s),f=!1}else Yn!==null&&(Jh(Yn),Yn=null),f=!0;if(!f)return s.flags&256?(Ai(s),s):(Ai(s),null)}if(Ai(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Fl(s,s.updateQueue),ne(s),null;case 4:return ct(),n===null&&ud(s.stateNode.containerInfo),ne(s),null;case 10:return Ri(s.type),ne(s),null;case 19:if(_t(Te),f=s.memoizedState,f===null)return ne(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)ro(f,!1);else{if(oe!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=Ml(n),g!==null){for(s.flags|=128,ro(f,!1),n=g.updateQueue,s.updateQueue=n,Fl(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)T_(o,n),o=o.sibling;return ht(Te,Te.current&1|2),s.child}n=n.sibling}f.tail!==null&&rn()>Yl&&(s.flags|=128,c=!0,ro(f,!1),s.lanes=4194304)}else{if(!c)if(n=Ml(g),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,Fl(s,n),ro(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!zt)return ne(s),null}else 2*rn()-f.renderingStartTime>Yl&&o!==536870912&&(s.flags|=128,c=!0,ro(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(n=f.last,n!==null?n.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=rn(),s.sibling=null,n=Te.current,ht(Te,c?n&1|2:n&1),s):(ne(s),null);case 22:case 23:return Ai(s),Ku(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(ne(s),s.subtreeFlags&6&&(s.flags|=8192)):ne(s),o=s.updateQueue,o!==null&&Fl(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&_t(Vs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ri(we),ne(s),null;case 25:return null}throw Error(i(156,s.tag))}function Y1(n,s){switch(Wu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ri(we),ct(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ht(s),null;case 13:if(Ai(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ia()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return _t(Te),null;case 4:return ct(),null;case 10:return Ri(s.type),null;case 22:case 23:return Ai(s),Ku(),n!==null&&_t(Vs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ri(we),null;case 25:return null;default:return null}}function A_(n,s){switch(Wu(s),s.tag){case 3:Ri(we),ct();break;case 26:case 27:case 5:Ht(s);break;case 4:ct();break;case 13:Ai(s);break;case 19:_t(Te);break;case 10:Ri(s.type);break;case 22:case 23:Ai(s),Ku(),n!==null&&_t(Vs);break;case 24:Ri(we)}}var X1={getCacheForType:function(n){var s=qe(we),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},j1=typeof WeakMap=="function"?WeakMap:Map,ie=0,Qt=null,Mt=null,Ot=0,$t=0,_n=null,Bi=!1,Gr=!1,Xh=!1,Hi=0,oe=0,us=0,js=0,jh=0,Pn=0,Lr=0,ao=null,ui=null,Wh=!1,Zh=0,Yl=1/0,Xl=null,hs=null,jl=!1,Ws=null,oo=0,Qh=0,$h=null,lo=0,Kh=null;function yn(){if((ie&2)!==0&&Ot!==0)return Ot&-Ot;if(F.T!==null){var n=Nr;return n!==0?n:ad()}return jp()}function M_(){Pn===0&&(Pn=(Ot&536870912)===0||zt?Lp():536870912);var n=Nn.current;return n!==null&&(n.flags|=32),Pn}function Ke(n,s,o){(n===Qt&&$t===2||n.cancelPendingCommit!==null)&&(qr(n,0),Pi(n,Ot,Pn,!1)),Aa(n,o),((ie&2)===0||n!==Qt)&&(n===Qt&&((ie&2)===0&&(js|=o),oe===4&&Pi(n,Ot,Pn,!1)),hi(n))}function E_(n,s,o){if((ie&6)!==0)throw Error(i(327));var c=!o&&(s&60)===0&&(s&n.expiredLanes)===0||Ca(n,s),f=c?Q1(n,s):nd(n,s,!0),g=c;do{if(f===0){Gr&&!c&&Pi(n,s,0,!1);break}else if(f===6)Pi(n,s,0,!Bi);else{if(o=n.current.alternate,g&&!W1(o)){f=nd(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var M=n;f=ao;var z=M.current.memoizedState.isDehydrated;if(z&&(qr(M,b).flags|=256),b=nd(M,b,!1),b!==2){if(Xh&&!z){M.errorRecoveryDisabledLanes|=g,js|=g,f=4;break t}g=ui,ui=f,g!==null&&Jh(g)}f=b}if(g=!1,f!==2)continue}}if(f===1){qr(n,0),Pi(n,s,0,!0);break}t:{switch(c=n,f){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){Pi(c,s,Pn,!Bi);break t}break;case 2:ui=null;break;case 3:case 5:break;default:throw Error(i(329))}if(c.finishedWork=o,c.finishedLanes=s,(s&62914560)===s&&(g=Zh+300-rn(),10<g)){if(Pi(c,s,Pn,!Bi),al(c,0)!==0)break t;c.timeoutHandle=K_(k_.bind(null,c,o,ui,Xl,Wh,s,Pn,js,Lr,Bi,2,-0,0),g);break t}k_(c,o,ui,Xl,Wh,s,Pn,js,Lr,Bi,0,-0,0)}}break}while(!0);hi(n)}function Jh(n){ui===null?ui=n:ui.push.apply(ui,n)}function k_(n,s,o,c,f,g,b,M,z,q,et,at,Z){var tt=s.subtreeFlags;if((tt&8192||(tt&16785408)===16785408)&&(mo={stylesheets:null,count:0,unsuspend:kS},v_(s),s=DS(),s!==null)){n.cancelPendingCommit=s(H_.bind(null,n,o,c,f,b,M,z,1,at,Z)),Pi(n,g,b,!q);return}H_(n,o,c,f,b,M,z,et,at,Z)}function W1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!pn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Pi(n,s,o,c){s&=~jh,s&=~js,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var f=s;0<f;){var g=31-fn(f),b=1<<g;c[g]=-1,f&=~b}o!==0&&Fp(n,o,s)}function Wl(){return(ie&6)===0?(co(0),!1):!0}function td(){if(Mt!==null){if($t===0)var n=Mt.return;else n=Mt,ki=qs=null,ah(n),Dr=null,qa=0,n=Mt;for(;n!==null;)A_(n.alternate,n),n=n.return;Mt=null}}function qr(n,s){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,fS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),td(),Qt=n,Mt=o=cs(n.current,null),Ot=s,$t=0,_n=null,Bi=!1,Gr=Ca(n,s),Xh=!1,Lr=Pn=jh=js=us=oe=0,ui=ao=null,Wh=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var f=31-fn(c),g=1<<f;s|=n[f],c&=~g}return Hi=s,yl(),o}function R_(n,s){Tt=null,F.H=ci,s===Ga?(s=Ym(),$t=3):s===Lm?(s=Ym(),$t=4):$t=s===qg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,_n=s,Mt===null&&(oe=1,Vl(n,Rn(s,n.current)))}function D_(){var n=F.H;return F.H=ci,n===null?ci:n}function O_(){var n=F.A;return F.A=X1,n}function ed(){oe=4,Bi||(Ot&4194176)!==Ot&&Nn.current!==null||(Gr=!0),(us&134217727)===0&&(js&134217727)===0||Qt===null||Pi(Qt,Ot,Pn,!1)}function nd(n,s,o){var c=ie;ie|=2;var f=D_(),g=O_();(Qt!==n||Ot!==s)&&(Xl=null,qr(n,s)),s=!1;var b=oe;t:do try{if($t!==0&&Mt!==null){var M=Mt,z=_n;switch($t){case 8:td(),b=6;break t;case 3:case 2:case 6:Nn.current===null&&(s=!0);var q=$t;if($t=0,_n=null,Fr(n,M,z,q),o&&Gr){b=0;break t}break;default:q=$t,$t=0,_n=null,Fr(n,M,z,q)}}Z1(),b=oe;break}catch(et){R_(n,et)}while(!0);return s&&n.shellSuspendCounter++,ki=qs=null,ie=c,F.H=f,F.A=g,Mt===null&&(Qt=null,Ot=0,yl()),b}function Z1(){for(;Mt!==null;)N_(Mt)}function Q1(n,s){var o=ie;ie|=2;var c=D_(),f=O_();Qt!==n||Ot!==s?(Xl=null,Yl=rn()+500,qr(n,s)):Gr=Ca(n,s);t:do try{if($t!==0&&Mt!==null){s=Mt;var g=_n;e:switch($t){case 1:$t=0,_n=null,Fr(n,s,g,1);break;case 2:if(qm(g)){$t=0,_n=null,z_(s);break}s=function(){$t===2&&Qt===n&&($t=7),hi(n)},g.then(s,s);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:qm(g)?($t=0,_n=null,z_(s)):($t=0,_n=null,Fr(n,s,g,7));break;case 5:var b=null;switch(Mt.tag){case 26:b=Mt.memoizedState;case 5:case 27:var M=Mt;if(!b||cy(b)){$t=0,_n=null;var z=M.sibling;if(z!==null)Mt=z;else{var q=M.return;q!==null?(Mt=q,Zl(q)):Mt=null}break e}}$t=0,_n=null,Fr(n,s,g,5);break;case 6:$t=0,_n=null,Fr(n,s,g,6);break;case 8:td(),oe=6;break t;default:throw Error(i(462))}}$1();break}catch(et){R_(n,et)}while(!0);return ki=qs=null,F.H=c,F.A=f,ie=o,Mt!==null?0:(Qt=null,Ot=0,yl(),oe)}function $1(){for(;Mt!==null&&!ai();)N_(Mt)}function N_(n){var s=e_(n.alternate,n,Hi);n.memoizedProps=n.pendingProps,s===null?Zl(n):Mt=s}function z_(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Zg(o,s,s.pendingProps,s.type,void 0,Ot);break;case 11:s=Zg(o,s,s.pendingProps,s.type.render,s.ref,Ot);break;case 5:ah(s);default:A_(o,s),s=Mt=T_(s,Hi),s=e_(o,s,Hi)}n.memoizedProps=n.pendingProps,s===null?Zl(n):Mt=s}function Fr(n,s,o,c){ki=qs=null,ah(s),Dr=null,qa=0;var f=s.return;try{if(I1(n,f,s,o,Ot)){oe=1,Vl(n,Rn(o,n.current)),Mt=null;return}}catch(g){if(f!==null)throw Mt=f,g;oe=1,Vl(n,Rn(o,n.current)),Mt=null;return}s.flags&32768?(zt||c===1?n=!0:Gr||(Ot&536870912)!==0?n=!1:(Bi=n=!0,(c===2||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),B_(s,n)):Zl(s)}function Zl(n){var s=n;do{if((s.flags&32768)!==0){B_(s,Bi);return}n=s.return;var o=F1(s.alternate,s,Hi);if(o!==null){Mt=o;return}if(s=s.sibling,s!==null){Mt=s;return}Mt=s=n}while(s!==null);oe===0&&(oe=5)}function B_(n,s){do{var o=Y1(n.alternate,n);if(o!==null){o.flags&=32767,Mt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Mt=n;return}Mt=n=o}while(n!==null);oe=6,Mt=null}function H_(n,s,o,c,f,g,b,M,z,q){var et=F.T,at=K.p;try{K.p=2,F.T=null,K1(n,s,o,c,at,f,g,b,M,z,q)}finally{F.T=et,K.p=at}}function K1(n,s,o,c,f,g,b,M){do Yr();while(Ws!==null);if((ie&6)!==0)throw Error(i(327));var z=n.finishedWork;if(c=n.finishedLanes,z===null)return null;if(n.finishedWork=null,n.finishedLanes=0,z===n.current)throw Error(i(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var q=z.lanes|z.childLanes;if(q|=Yu,Rx(n,c,q,g,b,M),n===Qt&&(Mt=Qt=null,Ot=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||jl||(jl=!0,Qh=q,$h=o,nS(il,function(){return Yr(),null})),o=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||o?(o=F.T,F.T=null,g=K.p,K.p=2,b=ie,ie|=4,G1(n,z),g_(z,n),S1(pd,n.containerInfo),oc=!!fd,pd=fd=null,n.current=z,d_(n,z.alternate,z),Ms(),ie=b,K.p=g,F.T=o):n.current=z,jl?(jl=!1,Ws=n,oo=c):P_(n,q),q=n.pendingLanes,q===0&&(hs=null),Cx(z.stateNode),hi(n),s!==null)for(f=n.onRecoverableError,z=0;z<s.length;z++)q=s[z],f(q.value,{componentStack:q.stack});return(oo&3)!==0&&Yr(),q=n.pendingLanes,(c&4194218)!==0&&(q&42)!==0?n===Kh?lo++:(lo=0,Kh=n):lo=0,co(0),null}function P_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ya(s)))}function Yr(){if(Ws!==null){var n=Ws,s=Qh;Qh=0;var o=Xp(oo),c=F.T,f=K.p;try{if(K.p=32>o?32:o,F.T=null,Ws===null)var g=!1;else{o=$h,$h=null;var b=Ws,M=oo;if(Ws=null,oo=0,(ie&6)!==0)throw Error(i(331));var z=ie;if(ie|=4,x_(b.current),y_(b,b.current,M,o),ie=z,co(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(wa,b)}catch{}g=!0}return g}finally{K.p=f,F.T=c,P_(n,s)}}return!1}function V_(n,s,o){s=Rn(o,s),s=bh(n.stateNode,s,2),n=rs(n,s,2),n!==null&&(Aa(n,2),hi(n))}function Ft(n,s,o){if(n.tag===3)V_(n,n,o);else for(;s!==null;){if(s.tag===3){V_(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(hs===null||!hs.has(c))){n=Rn(o,n),o=Gg(2),c=rs(s,o,2),c!==null&&(Lg(o,c,s,n),Aa(c,2),hi(c));break}}s=s.return}}function id(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new j1;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(o)||(Xh=!0,f.add(o),n=J1.bind(null,n,s,o),s.then(n,n))}function J1(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Qt===n&&(Ot&o)===o&&(oe===4||oe===3&&(Ot&62914560)===Ot&&300>rn()-Zh?(ie&2)===0&&qr(n,0):jh|=o,Lr===Ot&&(Lr=0)),hi(n)}function I_(n,s){s===0&&(s=qp()),n=$i(n,s),n!==null&&(Aa(n,s),hi(n))}function tS(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),I_(n,o)}function eS(n,s){var o=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),I_(n,o)}function nS(n,s){return Zt(n,s)}var Ql=null,Xr=null,sd=!1,$l=!1,rd=!1,Zs=0;function hi(n){n!==Xr&&n.next===null&&(Xr===null?Ql=Xr=n:Xr=Xr.next=n),$l=!0,sd||(sd=!0,sS(iS))}function co(n,s){if(!rd&&$l){rd=!0;do for(var o=!1,c=Ql;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var b=c.suspendedLanes,M=c.pingedLanes;g=(1<<31-fn(42|n)+1)-1,g&=f&~(b&~M),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(o=!0,L_(c,g))}else g=Ot,g=al(c,c===Qt?g:0),(g&3)===0||Ca(c,g)||(o=!0,L_(c,g));c=c.next}while(o);rd=!1}}function iS(){$l=sd=!1;var n=0;Zs!==0&&(dS()&&(n=Zs),Zs=0);for(var s=rn(),o=null,c=Ql;c!==null;){var f=c.next,g=U_(c,s);g===0?(c.next=null,o===null?Ql=f:o.next=f,f===null&&(Xr=o)):(o=c,(n!==0||(g&3)!==0)&&($l=!0)),c=f}co(n)}function U_(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var b=31-fn(g),M=1<<b,z=f[b];z===-1?((M&o)===0||(M&c)!==0)&&(f[b]=kx(M,s)):z<=s&&(n.expiredLanes|=M),g&=~M}if(s=Qt,o=Ot,o=al(n,n===s?o:0),c=n.callbackNode,o===0||n===s&&$t===2||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ge(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ca(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Ge(c),Xp(o)){case 2:case 8:o=Up;break;case 32:o=il;break;case 268435456:o=Gp;break;default:o=il}return c=G_.bind(null,n),o=Zt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Ge(c),n.callbackPriority=2,n.callbackNode=null,2}function G_(n,s){var o=n.callbackNode;if(Yr()&&n.callbackNode!==o)return null;var c=Ot;return c=al(n,n===Qt?c:0),c===0?null:(E_(n,c,s),U_(n,rn()),n.callbackNode!=null&&n.callbackNode===o?G_.bind(null,n):null)}function L_(n,s){if(Yr())return null;E_(n,s,!0)}function sS(n){pS(function(){(ie&6)!==0?Zt(nl,n):n()})}function ad(){return Zs===0&&(Zs=Lp()),Zs}function q_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:hl(""+n)}function F_(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function rS(n,s,o,c,f){if(s==="submit"&&o&&o.stateNode===f){var g=q_((f[an]||null).action),b=c.submitter;b&&(s=(s=b[an]||null)?q_(s.formAction):b.getAttribute("formAction"),s!==null&&(g=s,b=null));var M=new ml("action","action",null,c,f);n.push({event:M,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Zs!==0){var z=b?F_(f,b):new FormData(f);mh(o,{pending:!0,data:z,method:f.method,action:g},null,z)}}else typeof g=="function"&&(M.preventDefault(),z=b?F_(f,b):new FormData(f),mh(o,{pending:!0,data:z,method:f.method,action:g},g,z))},currentTarget:f}]})}}for(var od=0;od<Hm.length;od++){var ld=Hm[od],aS=ld.toLowerCase(),oS=ld[0].toUpperCase()+ld.slice(1);Fn(aS,"on"+oS)}Fn(Dm,"onAnimationEnd"),Fn(Om,"onAnimationIteration"),Fn(Nm,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(w1,"onTransitionRun"),Fn(C1,"onTransitionStart"),Fn(A1,"onTransitionCancel"),Fn(zm,"onTransitionEnd"),vr("onMouseEnter",["mouseout","mouseover"]),vr("onMouseLeave",["mouseout","mouseover"]),vr("onPointerEnter",["pointerout","pointerover"]),vr("onPointerLeave",["pointerout","pointerover"]),Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uo));function Y_(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;t:{var g=void 0;if(s)for(var b=c.length-1;0<=b;b--){var M=c[b],z=M.instance,q=M.currentTarget;if(M=M.listener,z!==g&&f.isPropagationStopped())break t;g=M,f.currentTarget=q;try{g(f)}catch(et){Pl(et)}f.currentTarget=null,g=z}else for(b=0;b<c.length;b++){if(M=c[b],z=M.instance,q=M.currentTarget,M=M.listener,z!==g&&f.isPropagationStopped())break t;g=M,f.currentTarget=q;try{g(f)}catch(et){Pl(et)}f.currentTarget=null,g=z}}}}function Dt(n,s){var o=s[wu];o===void 0&&(o=s[wu]=new Set);var c=n+"__bubble";o.has(c)||(X_(s,n,2,!1),o.add(c))}function cd(n,s,o){var c=0;s&&(c|=4),X_(o,n,c,s)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function ud(n){if(!n[Kl]){n[Kl]=!0,Zp.forEach(function(o){o!=="selectionchange"&&(lS.has(o)||cd(o,!1,n),cd(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Kl]||(s[Kl]=!0,cd("selectionchange",!1,s))}}function X_(n,s,o,c){switch(my(s)){case 2:var f=zS;break;case 8:f=BS;break;default:f=Td}o=f.bind(null,s,o,n),f=void 0,!Ou||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function hd(n,s,o,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)t:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var M=c.stateNode.containerInfo;if(M===f||M.nodeType===8&&M.parentNode===f)break;if(b===4)for(b=c.return;b!==null;){var z=b.tag;if((z===3||z===4)&&(z=b.stateNode.containerInfo,z===f||z.nodeType===8&&z.parentNode===f))return;b=b.return}for(;M!==null;){if(b=ks(M),b===null)return;if(z=b.tag,z===5||z===6||z===26||z===27){c=g=b;continue t}M=M.parentNode}}c=c.return}om(function(){var q=g,et=Ru(o),at=[];t:{var Z=Bm.get(n);if(Z!==void 0){var tt=ml,pt=n;switch(n){case"keypress":if(fl(o)===0)break t;case"keydown":case"keyup":tt=e1;break;case"focusin":pt="focus",tt=Hu;break;case"focusout":pt="blur",tt=Hu;break;case"beforeblur":case"afterblur":tt=Hu;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=s1;break;case Dm:case Om:case Nm:tt=Xx;break;case zm:tt=a1;break;case"scroll":case"scrollend":tt=Gx;break;case"wheel":tt=l1;break;case"copy":case"cut":case"paste":tt=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=dm;break;case"toggle":case"beforetoggle":tt=u1}var bt=(s&4)!==0,le=!bt&&(n==="scroll"||n==="scrollend"),X=bt?Z!==null?Z+"Capture":null:Z;bt=[];for(var U=q,W;U!==null;){var st=U;if(W=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||W===null||X===null||(st=ka(U,X),st!=null&&bt.push(ho(U,st,W))),le)break;U=U.return}0<bt.length&&(Z=new tt(Z,pt,null,o,et),at.push({event:Z,listeners:bt}))}}if((s&7)===0){t:{if(Z=n==="mouseover"||n==="pointerover",tt=n==="mouseout"||n==="pointerout",Z&&o!==ku&&(pt=o.relatedTarget||o.fromElement)&&(ks(pt)||pt[gr]))break t;if((tt||Z)&&(Z=et.window===et?et:(Z=et.ownerDocument)?Z.defaultView||Z.parentWindow:window,tt?(pt=o.relatedTarget||o.toElement,tt=q,pt=pt?ks(pt):null,pt!==null&&(le=D(pt),bt=pt.tag,pt!==le||bt!==5&&bt!==27&&bt!==6)&&(pt=null)):(tt=null,pt=q),tt!==pt)){if(bt=um,st="onMouseLeave",X="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(bt=dm,st="onPointerLeave",X="onPointerEnter",U="pointer"),le=tt==null?Z:Ea(tt),W=pt==null?Z:Ea(pt),Z=new bt(st,U+"leave",tt,o,et),Z.target=le,Z.relatedTarget=W,st=null,ks(et)===q&&(bt=new bt(X,U+"enter",pt,o,et),bt.target=W,bt.relatedTarget=le,st=bt),le=st,tt&&pt)e:{for(bt=tt,X=pt,U=0,W=bt;W;W=jr(W))U++;for(W=0,st=X;st;st=jr(st))W++;for(;0<U-W;)bt=jr(bt),U--;for(;0<W-U;)X=jr(X),W--;for(;U--;){if(bt===X||X!==null&&bt===X.alternate)break e;bt=jr(bt),X=jr(X)}bt=null}else bt=null;tt!==null&&j_(at,Z,tt,bt,!1),pt!==null&&le!==null&&j_(at,le,pt,bt,!0)}}t:{if(Z=q?Ea(q):window,tt=Z.nodeName&&Z.nodeName.toLowerCase(),tt==="select"||tt==="input"&&Z.type==="file")var dt=bm;else if(ym(Z))if(xm)dt=b1;else{dt=y1;var Ct=_1}else tt=Z.nodeName,!tt||tt.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?q&&Eu(q.elementType)&&(dt=bm):dt=v1;if(dt&&(dt=dt(n,q))){vm(at,dt,o,et);break t}Ct&&Ct(n,Z,q),n==="focusout"&&q&&Z.type==="number"&&q.memoizedProps.value!=null&&Mu(Z,"number",Z.value)}switch(Ct=q?Ea(q):window,n){case"focusin":(ym(Ct)||Ct.contentEditable==="true")&&(Cr=Ct,Lu=q,Pa=null);break;case"focusout":Pa=Lu=Cr=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,km(at,o,et);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":km(at,o,et)}var gt;if(Vu)t:{switch(n){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else wr?gm(n,o)&&(yt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(fm&&o.locale!=="ko"&&(wr||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&wr&&(gt=lm()):(Qi=et,Nu="value"in Qi?Qi.value:Qi.textContent,wr=!0)),Ct=Jl(q,yt),0<Ct.length&&(yt=new hm(yt,n,null,o,et),at.push({event:yt,listeners:Ct}),gt?yt.data=gt:(gt=_m(o),gt!==null&&(yt.data=gt)))),(gt=d1?f1(n,o):p1(n,o))&&(yt=Jl(q,"onBeforeInput"),0<yt.length&&(Ct=new hm("onBeforeInput","beforeinput",null,o,et),at.push({event:Ct,listeners:yt}),Ct.data=gt)),rS(at,n,q,o,et)}Y_(at,s)})}function ho(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Jl(n,s){for(var o=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ka(n,o),f!=null&&c.unshift(ho(n,f,g)),f=ka(n,s),f!=null&&c.push(ho(n,f,g))),n=n.return}return c}function jr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function j_(n,s,o,c,f){for(var g=s._reactName,b=[];o!==null&&o!==c;){var M=o,z=M.alternate,q=M.stateNode;if(M=M.tag,z!==null&&z===c)break;M!==5&&M!==26&&M!==27||q===null||(z=q,f?(q=ka(o,g),q!=null&&b.unshift(ho(o,q,z))):f||(q=ka(o,g),q!=null&&b.push(ho(o,q,z)))),o=o.return}b.length!==0&&n.push({event:s,listeners:b})}var cS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function W_(n){return(typeof n=="string"?n:""+n).replace(cS,`
`).replace(uS,"")}function Z_(n,s){return s=W_(s),W_(n)===s}function tc(){}function Gt(n,s,o,c,f,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||xr(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&xr(n,""+c);break;case"className":ll(n,"class",c);break;case"tabIndex":ll(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(n,o,c);break;case"style":rm(n,c,g);break;case"data":if(s!=="object"){ll(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=hl(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Gt(n,s,"name",f.name,f,null),Gt(n,s,"formEncType",f.formEncType,f,null),Gt(n,s,"formMethod",f.formMethod,f,null),Gt(n,s,"formTarget",f.formTarget,f,null)):(Gt(n,s,"encType",f.encType,f,null),Gt(n,s,"method",f.method,f,null),Gt(n,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=hl(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=tc);break;case"onScroll":c!=null&&Dt("scroll",n);break;case"onScrollEnd":c!=null&&Dt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=hl(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Dt("beforetoggle",n),Dt("toggle",n),ol(n,"popover",c);break;case"xlinkActuate":Ti(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ti(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ti(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ti(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ti(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ti(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ti(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ti(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ti(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ol(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ix.get(o)||o,ol(n,o,c))}}function dd(n,s,o,c,f,g){switch(o){case"style":rm(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?xr(n,c):(typeof c=="number"||typeof c=="bigint")&&xr(n,""+c);break;case"onScroll":c!=null&&Dt("scroll",n);break;case"onScrollEnd":c!=null&&Dt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qp.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[an]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,f);break t}o in n?n[o]=c:c===!0?n.setAttribute(o,""):ol(n,o,c)}}}function Pe(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",n),Dt("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Gt(n,s,g,b,o,null)}}f&&Gt(n,s,"srcSet",o.srcSet,o,null),c&&Gt(n,s,"src",o.src,o,null);return;case"input":Dt("invalid",n);var M=g=b=f=null,z=null,q=null;for(c in o)if(o.hasOwnProperty(c)){var et=o[c];if(et!=null)switch(c){case"name":f=et;break;case"type":b=et;break;case"checked":z=et;break;case"defaultChecked":q=et;break;case"value":g=et;break;case"defaultValue":M=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,s));break;default:Gt(n,s,c,et,o,null)}}em(n,g,M,z,q,b,f,!1),cl(n);return;case"select":Dt("invalid",n),c=b=g=null;for(f in o)if(o.hasOwnProperty(f)&&(M=o[f],M!=null))switch(f){case"value":g=M;break;case"defaultValue":b=M;break;case"multiple":c=M;default:Gt(n,s,f,M,o,null)}s=g,o=b,n.multiple=!!c,s!=null?br(n,!!c,s,!1):o!=null&&br(n,!!c,o,!0);return;case"textarea":Dt("invalid",n),g=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(M=o[b],M!=null))switch(b){case"value":c=M;break;case"defaultValue":f=M;break;case"children":g=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Gt(n,s,b,M,o,null)}im(n,c,f,g),cl(n);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(c=o[z],c!=null))switch(z){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Gt(n,s,z,c,o,null)}return;case"dialog":Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":Dt("load",n);break;case"video":case"audio":for(c=0;c<uo.length;c++)Dt(uo[c],n);break;case"image":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"embed":case"source":case"link":Dt("error",n),Dt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(c=o[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Gt(n,s,q,c,o,null)}return;default:if(Eu(s)){for(et in o)o.hasOwnProperty(et)&&(c=o[et],c!==void 0&&dd(n,s,et,c,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(c=o[M],c!=null&&Gt(n,s,M,c,o,null))}function hS(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,M=null,z=null,q=null,et=null;for(tt in o){var at=o[tt];if(o.hasOwnProperty(tt)&&at!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":z=at;default:c.hasOwnProperty(tt)||Gt(n,s,tt,null,c,at)}}for(var Z in c){var tt=c[Z];if(at=o[Z],c.hasOwnProperty(Z)&&(tt!=null||at!=null))switch(Z){case"type":g=tt;break;case"name":f=tt;break;case"checked":q=tt;break;case"defaultChecked":et=tt;break;case"value":b=tt;break;case"defaultValue":M=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,s));break;default:tt!==at&&Gt(n,s,Z,tt,c,at)}}Au(n,b,M,z,q,et,g,f);return;case"select":tt=b=M=Z=null;for(g in o)if(z=o[g],o.hasOwnProperty(g)&&z!=null)switch(g){case"value":break;case"multiple":tt=z;default:c.hasOwnProperty(g)||Gt(n,s,g,null,c,z)}for(f in c)if(g=c[f],z=o[f],c.hasOwnProperty(f)&&(g!=null||z!=null))switch(f){case"value":Z=g;break;case"defaultValue":M=g;break;case"multiple":b=g;default:g!==z&&Gt(n,s,f,g,c,z)}s=M,o=b,c=tt,Z!=null?br(n,!!o,Z,!1):!!c!=!!o&&(s!=null?br(n,!!o,s,!0):br(n,!!o,o?[]:"",!1));return;case"textarea":tt=Z=null;for(M in o)if(f=o[M],o.hasOwnProperty(M)&&f!=null&&!c.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Gt(n,s,M,null,c,f)}for(b in c)if(f=c[b],g=o[b],c.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":Z=f;break;case"defaultValue":tt=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&Gt(n,s,b,f,c,g)}nm(n,Z,tt);return;case"option":for(var pt in o)if(Z=o[pt],o.hasOwnProperty(pt)&&Z!=null&&!c.hasOwnProperty(pt))switch(pt){case"selected":n.selected=!1;break;default:Gt(n,s,pt,null,c,Z)}for(z in c)if(Z=c[z],tt=o[z],c.hasOwnProperty(z)&&Z!==tt&&(Z!=null||tt!=null))switch(z){case"selected":n.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Gt(n,s,z,Z,c,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in o)Z=o[bt],o.hasOwnProperty(bt)&&Z!=null&&!c.hasOwnProperty(bt)&&Gt(n,s,bt,null,c,Z);for(q in c)if(Z=c[q],tt=o[q],c.hasOwnProperty(q)&&Z!==tt&&(Z!=null||tt!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Gt(n,s,q,Z,c,tt)}return;default:if(Eu(s)){for(var le in o)Z=o[le],o.hasOwnProperty(le)&&Z!==void 0&&!c.hasOwnProperty(le)&&dd(n,s,le,void 0,c,Z);for(et in c)Z=c[et],tt=o[et],!c.hasOwnProperty(et)||Z===tt||Z===void 0&&tt===void 0||dd(n,s,et,Z,c,tt);return}}for(var X in o)Z=o[X],o.hasOwnProperty(X)&&Z!=null&&!c.hasOwnProperty(X)&&Gt(n,s,X,null,c,Z);for(at in c)Z=c[at],tt=o[at],!c.hasOwnProperty(at)||Z===tt||Z==null&&tt==null||Gt(n,s,at,Z,c,tt)}var fd=null,pd=null;function ec(n){return n.nodeType===9?n:n.ownerDocument}function Q_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function md(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var gd=null;function dS(){var n=window.event;return n&&n.type==="popstate"?n===gd?!1:(gd=n,!0):(gd=null,!1)}var K_=typeof setTimeout=="function"?setTimeout:void 0,fS=typeof clearTimeout=="function"?clearTimeout:void 0,J_=typeof Promise=="function"?Promise:void 0,pS=typeof queueMicrotask=="function"?queueMicrotask:typeof J_<"u"?function(n){return J_.resolve(null).then(n).catch(mS)}:K_;function mS(n){setTimeout(function(){throw n})}function _d(n,s){var o=s,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){n.removeChild(f),bo(s);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);bo(s)}function yd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":yd(o),Cu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function gS(n,s,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ma])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=jn(n.nextSibling),n===null)break}return null}function _S(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=jn(n.nextSibling),n===null))return null;return n}function jn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}function ty(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function ey(n,s,o){switch(s=ec(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}var Vn=new Map,ny=new Set;function nc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var Vi=K.d;K.d={f:yS,r:vS,D:bS,C:xS,L:SS,m:TS,X:CS,S:wS,M:AS};function yS(){var n=Vi.f(),s=Wl();return n||s}function vS(n){var s=_r(n);s!==null&&s.tag===5&&s.type==="form"?kg(s):Vi.r(n)}var Wr=typeof document>"u"?null:document;function iy(n,s,o){var c=Wr;if(c&&typeof s=="string"&&s){var f=En(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ny.has(f)||(ny.add(f),n={rel:n,crossOrigin:o,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),Pe(s,"link",n),Ae(s),c.head.appendChild(s)))}}function bS(n){Vi.D(n),iy("dns-prefetch",n,null)}function xS(n,s){Vi.C(n,s),iy("preconnect",n,s)}function SS(n,s,o){Vi.L(n,s,o);var c=Wr;if(c&&n&&s){var f='link[rel="preload"][as="'+En(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+En(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+En(o.imageSizes)+'"]')):f+='[href="'+En(n)+'"]';var g=f;switch(s){case"style":g=Zr(n);break;case"script":g=Qr(n)}Vn.has(g)||(n=L({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Vn.set(g,n),c.querySelector(f)!==null||s==="style"&&c.querySelector(fo(g))||s==="script"&&c.querySelector(po(g))||(s=c.createElement("link"),Pe(s,"link",n),Ae(s),c.head.appendChild(s)))}}function TS(n,s){Vi.m(n,s);var o=Wr;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+En(c)+'"][href="'+En(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Qr(n)}if(!Vn.has(g)&&(n=L({rel:"modulepreload",href:n},s),Vn.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(po(g)))return}c=o.createElement("link"),Pe(c,"link",n),Ae(c),o.head.appendChild(c)}}}function wS(n,s,o){Vi.S(n,s,o);var c=Wr;if(c&&n){var f=yr(c).hoistableStyles,g=Zr(n);s=s||"default";var b=f.get(g);if(!b){var M={loading:0,preload:null};if(b=c.querySelector(fo(g)))M.loading=5;else{n=L({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Vn.get(g))&&vd(n,o);var z=b=c.createElement("link");Ae(z),Pe(z,"link",n),z._p=new Promise(function(q,et){z.onload=q,z.onerror=et}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,ic(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:M},f.set(g,b)}}}function CS(n,s){Vi.X(n,s);var o=Wr;if(o&&n){var c=yr(o).hoistableScripts,f=Qr(n),g=c.get(f);g||(g=o.querySelector(po(f)),g||(n=L({src:n,async:!0},s),(s=Vn.get(f))&&bd(n,s),g=o.createElement("script"),Ae(g),Pe(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function AS(n,s){Vi.M(n,s);var o=Wr;if(o&&n){var c=yr(o).hoistableScripts,f=Qr(n),g=c.get(f);g||(g=o.querySelector(po(f)),g||(n=L({src:n,async:!0,type:"module"},s),(s=Vn.get(f))&&bd(n,s),g=o.createElement("script"),Ae(g),Pe(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function sy(n,s,o,c){var f=(f=fe.current)?nc(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Zr(o.href),o=yr(f).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Zr(o.href);var g=yr(f).hoistableStyles,b=g.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,b),(g=f.querySelector(fo(n)))&&!g._p&&(b.instance=g,b.state.loading=5),Vn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vn.set(n,o),g||MS(f,n,o,b.state))),s&&c===null)throw Error(i(528,""));return b}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qr(o),o=yr(f).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Zr(n){return'href="'+En(n)+'"'}function fo(n){return'link[rel="stylesheet"]['+n+"]"}function ry(n){return L({},n,{"data-precedence":n.precedence,precedence:null})}function MS(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Pe(s,"link",o),Ae(s),n.head.appendChild(s))}function Qr(n){return'[src="'+En(n)+'"]'}function po(n){return"script[async]"+n}function ay(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+En(o.href)+'"]');if(c)return s.instance=c,Ae(c),c;var f=L({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ae(c),Pe(c,"style",f),ic(c,o.precedence,n),s.instance=c;case"stylesheet":f=Zr(o.href);var g=n.querySelector(fo(f));if(g)return s.state.loading|=4,s.instance=g,Ae(g),g;c=ry(o),(f=Vn.get(f))&&vd(c,f),g=(n.ownerDocument||n).createElement("link"),Ae(g);var b=g;return b._p=new Promise(function(M,z){b.onload=M,b.onerror=z}),Pe(g,"link",c),s.state.loading|=4,ic(g,o.precedence,n),s.instance=g;case"script":return g=Qr(o.src),(f=n.querySelector(po(g)))?(s.instance=f,Ae(f),f):(c=o,(f=Vn.get(g))&&(c=L({},o),bd(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ae(f),Pe(f,"link",c),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,ic(c,o.precedence,n));return s.instance}function ic(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,b=0;b<c.length;b++){var M=c[b];if(M.dataset.precedence===s)g=M;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function vd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function bd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var sc=null;function oy(n,s,o){if(sc===null){var c=new Map,f=sc=new Map;f.set(o,c)}else f=sc,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Ma]||g[Le]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(s)||"";b=n+b;var M=c.get(b);M?M.push(g):c.set(b,[g])}}return c}function ly(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function ES(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var mo=null;function kS(){}function RS(n,s,o){if(mo===null)throw Error(i(475));var c=mo;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Zr(o.href),g=n.querySelector(fo(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=rc.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=g,Ae(g);return}g=n.ownerDocument||n,o=ry(o),(f=Vn.get(f))&&vd(o,f),g=g.createElement("link"),Ae(g);var b=g;b._p=new Promise(function(M,z){b.onload=M,b.onerror=z}),Pe(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=rc.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function DS(){if(mo===null)throw Error(i(475));var n=mo;return n.stylesheets&&n.count===0&&xd(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&xd(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function rc(){if(this.count--,this.count===0){if(this.stylesheets)xd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ac=null;function xd(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ac=new Map,s.forEach(OS,n),ac=null,rc.call(n))}function OS(n,s){if(!(s.state.loading&4)){var o=ac.get(n);if(o)var c=o.get(null);else{o=new Map,ac.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=s.instance,b=f.getAttribute("data-precedence"),g=o.get(b)||c,g===c&&o.set(null,f),o.set(b,f),this.count++,c=rc.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var go={$$typeof:y,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function NS(n,s,o,c,f,g,b,M){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tu(0),this.hiddenUpdates=Tu(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function uy(n,s,o,c,f,g,b,M,z,q,et,at){return n=new NS(n,s,o,b,M,z,q,at),s=1,g===!0&&(s|=24),g=Hn(3,null,null,s),n.current=g,g.stateNode=n,s=Ju(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Nh(g),n}function hy(n){return n?(n=Er,n):Er}function dy(n,s,o,c,f,g){f=hy(f),c.context===null?c.context=f:c.pendingContext=f,c=ss(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=rs(n,c,s),o!==null&&(Ke(o,n,s),Ka(o,n,s))}function fy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Sd(n,s){fy(n,s),(n=n.alternate)&&fy(n,s)}function py(n){if(n.tag===13){var s=$i(n,67108864);s!==null&&Ke(s,n,67108864),Sd(n,67108864)}}var oc=!0;function zS(n,s,o,c){var f=F.T;F.T=null;var g=K.p;try{K.p=2,Td(n,s,o,c)}finally{K.p=g,F.T=f}}function BS(n,s,o,c){var f=F.T;F.T=null;var g=K.p;try{K.p=8,Td(n,s,o,c)}finally{K.p=g,F.T=f}}function Td(n,s,o,c){if(oc){var f=wd(c);if(f===null)hd(n,s,c,lc,o),gy(n,c);else if(PS(f,n,s,o,c))c.stopPropagation();else if(gy(n,c),s&4&&-1<HS.indexOf(n)){for(;f!==null;){var g=_r(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=Es(g.pendingLanes);if(b!==0){var M=g;for(M.pendingLanes|=2,M.entangledLanes|=2;b;){var z=1<<31-fn(b);M.entanglements[1]|=z,b&=~z}hi(g),(ie&6)===0&&(Yl=rn()+500,co(0))}}break;case 13:M=$i(g,2),M!==null&&Ke(M,g,2),Wl(),Sd(g,2)}if(g=wd(c),g===null&&hd(n,s,c,lc,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else hd(n,s,c,null,o)}}function wd(n){return n=Ru(n),Cd(n)}var lc=null;function Cd(n){if(lc=null,n=ks(n),n!==null){var s=D(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=P(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return lc=n,null}function my(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Su()){case nl:return 2;case Up:return 8;case il:case Sx:return 32;case Gp:return 268435456;default:return 32}default:return 32}}var Ad=!1,ds=null,fs=null,ps=null,_o=new Map,yo=new Map,ms=[],HS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gy(n,s){switch(n){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":_o.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(s.pointerId)}}function vo(n,s,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=_r(s),s!==null&&py(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function PS(n,s,o,c,f){switch(s){case"focusin":return ds=vo(ds,n,s,o,c,f),!0;case"dragenter":return fs=vo(fs,n,s,o,c,f),!0;case"mouseover":return ps=vo(ps,n,s,o,c,f),!0;case"pointerover":var g=f.pointerId;return _o.set(g,vo(_o.get(g)||null,n,s,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,yo.set(g,vo(yo.get(g)||null,n,s,o,c,f)),!0}return!1}function _y(n){var s=ks(n.target);if(s!==null){var o=D(s);if(o!==null){if(s=o.tag,s===13){if(s=P(o),s!==null){n.blockedOn=s,Dx(n.priority,function(){if(o.tag===13){var c=yn(),f=$i(o,c);f!==null&&Ke(f,o,c),Sd(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=wd(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);ku=c,o.target.dispatchEvent(c),ku=null}else return s=_r(o),s!==null&&py(s),n.blockedOn=o,!1;s.shift()}return!0}function yy(n,s,o){cc(n)&&o.delete(s)}function VS(){Ad=!1,ds!==null&&cc(ds)&&(ds=null),fs!==null&&cc(fs)&&(fs=null),ps!==null&&cc(ps)&&(ps=null),_o.forEach(yy),yo.forEach(yy)}function uc(n,s){n.blockedOn===s&&(n.blockedOn=null,Ad||(Ad=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,VS)))}var hc=null;function vy(n){hc!==n&&(hc=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){hc===n&&(hc=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],f=n[s+2];if(typeof c!="function"){if(Cd(c||o)===null)continue;break}var g=_r(o);g!==null&&(n.splice(s,3),s-=3,mh(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function bo(n){function s(z){return uc(z,n)}ds!==null&&uc(ds,n),fs!==null&&uc(fs,n),ps!==null&&uc(ps,n),_o.forEach(s),yo.forEach(s);for(var o=0;o<ms.length;o++){var c=ms[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ms.length&&(o=ms[0],o.blockedOn===null);)_y(o),o.blockedOn===null&&ms.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],b=f[an]||null;if(typeof g=="function")b||vy(o);else if(b){var M=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[an]||null)M=b.formAction;else if(Cd(f)!==null)continue}else M=b.action;typeof M=="function"?o[c+1]=M:(o.splice(c,3),c-=3),vy(o)}}}function Md(n){this._internalRoot=n}dc.prototype.render=Md.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=yn();dy(o,c,n,s,null,null)},dc.prototype.unmount=Md.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;n.tag===0&&Yr(),dy(n.current,2,null,n,null,null),Wl(),s[gr]=null}};function dc(n){this._internalRoot=n}dc.prototype.unstable_scheduleHydration=function(n){if(n){var s=jp();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ms.length&&s!==0&&s<ms[o].priority;o++);ms.splice(o,0,n),o===0&&_y(n)}};var by=t.version;if(by!=="19.0.0")throw Error(i(527,by,"19.0.0"));K.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=B(s),n=n!==null?Y(n):null,n=n===null?null:n.stateNode,n};var IS={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:F,findFiberByHostInstance:ks,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{wa=fc.inject(IS),dn=fc}catch{}}return So.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,c="",f=Pg,g=Vg,b=Ig,M=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(M=s.unstable_transitionCallbacks)),s=uy(n,1,!1,null,null,o,c,f,g,b,M,null),n[gr]=s.current,ud(n.nodeType===8?n.parentNode:n),new Md(s)},So.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var c=!1,f="",g=Pg,b=Vg,M=Ig,z=null,q=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(q=o.formState)),s=uy(n,1,!0,s,o??null,c,f,g,b,M,z,q),s.context=hy(null),o=s.current,c=yn(),f=ss(c),f.callback=null,rs(o,f,c),s.current.lanes=c,Aa(s,c),hi(s),n[gr]=s.current,ud(n),new dc(s)},So.version="19.0.0",So}var Ry;function $S(){if(Ry)return kd.exports;Ry=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),kd.exports=QS(),kd.exports}var KS=$S(),pc=Lf();const JS="modulepreload",tT=function(r){return"/pixijs_playground/"+r},Dy={},Hc=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(e.map(d=>{if(d=tT(d),d in Dy)return;Dy[d]=!0;const p=d.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":JS,p||(_.as="script"),_.crossOrigin="",_.href=d,h&&_.setAttribute("nonce",h),document.head.appendChild(_),p)return new Promise((v,y)=>{_.addEventListener("load",v),_.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})};var It=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(It||{});const lf=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},mc=(r,t)=>lf(r).priority??t,qn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(lf).forEach(t=>{t.type.forEach(e=>{var i,a;return(a=(i=this._removeHandlers)[e])==null?void 0:a.call(i,t)})}),this},add(...r){return r.map(lf).forEach(t=>{t.type.forEach(e=>{var l,u;const i=this._addHandlers,a=this._queue;i[e]?(u=i[e])==null||u.call(i,t):(a[e]=a[e]||[],(l=a[e])==null||l.push(t))})}),this},handle(r,t,e){var u;const i=this._addHandlers,a=this._removeHandlers;if(i[r]||a[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,a[r]=e;const l=this._queue;return l[r]&&((u=l[r])==null||u.forEach(h=>t(h)),delete l[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(r,t,e=-1){return this.handle(r,i=>{t.findIndex(l=>l.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((l,u)=>mc(u.value,e)-mc(l.value,e)))},i=>{const a=t.findIndex(l=>l.name===i.name);a!==-1&&t.splice(a,1)})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((a,l)=>mc(l,e)-mc(a,e)))},i=>{const a=t.indexOf(i.ref);a!==-1&&t.splice(a,1)})},mixin(r,...t){for(const e of t)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(e))}},eT={extension:{type:It.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Hc(()=>import("./browserAll-Bb7JKHHB.js"),__vite__mapDeps([0,1,2,3]))}},nT={extension:{type:It.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Hc(()=>import("./webworkerAll-Bj7_zXhw.js"),__vite__mapDeps([1,2,3]))}};class cn{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new cn(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var zd={exports:{}},Oy;function iT(){return Oy||(Oy=1,function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function a(d,p,m){this.fn=d,this.context=p,this.once=m||!1}function l(d,p,m,_,v){if(typeof m!="function")throw new TypeError("The listener must be a function");var y=new a(m,_||d,v),x=e?e+p:p;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],y]:d._events[x].push(y):(d._events[x]=y,d._eventsCount++),d}function u(d,p){--d._eventsCount===0?d._events=new i:delete d._events[p]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],m,_;if(this._eventsCount===0)return p;for(_ in m=this._events)t.call(m,_)&&p.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},h.prototype.listeners=function(p){var m=e?e+p:p,_=this._events[m];if(!_)return[];if(_.fn)return[_.fn];for(var v=0,y=_.length,x=new Array(y);v<y;v++)x[v]=_[v].fn;return x},h.prototype.listenerCount=function(p){var m=e?e+p:p,_=this._events[m];return _?_.fn?1:_.length:0},h.prototype.emit=function(p,m,_,v,y,x){var w=e?e+p:p;if(!this._events[w])return!1;var S=this._events[w],A=arguments.length,R,O;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,_),!0;case 4:return S.fn.call(S.context,m,_,v),!0;case 5:return S.fn.call(S.context,m,_,v,y),!0;case 6:return S.fn.call(S.context,m,_,v,y,x),!0}for(O=1,R=new Array(A-1);O<A;O++)R[O-1]=arguments[O];S.fn.apply(S.context,R)}else{var V=S.length,k;for(O=0;O<V;O++)switch(S[O].once&&this.removeListener(p,S[O].fn,void 0,!0),A){case 1:S[O].fn.call(S[O].context);break;case 2:S[O].fn.call(S[O].context,m);break;case 3:S[O].fn.call(S[O].context,m,_);break;case 4:S[O].fn.call(S[O].context,m,_,v);break;default:if(!R)for(k=1,R=new Array(A-1);k<A;k++)R[k-1]=arguments[k];S[O].fn.apply(S[O].context,R)}}return!0},h.prototype.on=function(p,m,_){return l(this,p,m,_,!1)},h.prototype.once=function(p,m,_){return l(this,p,m,_,!0)},h.prototype.removeListener=function(p,m,_,v){var y=e?e+p:p;if(!this._events[y])return this;if(!m)return u(this,y),this;var x=this._events[y];if(x.fn)x.fn===m&&(!v||x.once)&&(!_||x.context===_)&&u(this,y);else{for(var w=0,S=[],A=x.length;w<A;w++)(x[w].fn!==m||v&&!x[w].once||_&&x[w].context!==_)&&S.push(x[w]);S.length?this._events[y]=S.length===1?S[0]:S:u(this,y)}return this},h.prototype.removeAllListeners=function(p){var m;return p?(m=e?e+p:p,this._events[m]&&u(this,m)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,r.exports=h}(zd)),zd.exports}var sT=iT();const _i=Gf(sT),rT=Math.PI*2,aT=180/Math.PI,oT=Math.PI/180;class Ye{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Ye(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Bd.x=0,Bd.y=0,Bd}}const Bd=new Ye;class Nt{constructor(t=1,e=0,i=0,a=1,l=0,u=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=a,this.tx=l,this.ty=u}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,a,l,u){return this.a=t,this.b=e,this.c=i,this.d=a,this.tx=l,this.ty=u,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Ye;const i=t.x,a=t.y;return e.x=this.a*i+this.c*a+this.tx,e.y=this.b*i+this.d*a+this.ty,e}applyInverse(t,e){e=e||new Ye;const i=this.a,a=this.b,l=this.c,u=this.d,h=this.tx,d=this.ty,p=1/(i*u+l*-a),m=t.x,_=t.y;return e.x=u*p*m+-l*p*_+(d*l-h*u)*p,e.y=i*p*_+-a*p*m+(-d*i+h*a)*p,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),a=this.a,l=this.c,u=this.tx;return this.a=a*e-this.b*i,this.b=a*i+this.b*e,this.c=l*e-this.d*i,this.d=l*i+this.d*e,this.tx=u*e-this.ty*i,this.ty=u*i+this.ty*e,this}append(t){const e=this.a,i=this.b,a=this.c,l=this.d;return this.a=t.a*e+t.b*a,this.b=t.a*i+t.b*l,this.c=t.c*e+t.d*a,this.d=t.c*i+t.d*l,this.tx=t.tx*e+t.ty*a+this.tx,this.ty=t.tx*i+t.ty*l+this.ty,this}appendFrom(t,e){const i=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,d=t.ty,p=e.a,m=e.b,_=e.c,v=e.d;return this.a=i*p+a*_,this.b=i*m+a*v,this.c=l*p+u*_,this.d=l*m+u*v,this.tx=h*p+d*_+e.tx,this.ty=h*m+d*v+e.ty,this}setTransform(t,e,i,a,l,u,h,d,p){return this.a=Math.cos(h+p)*l,this.b=Math.sin(h+p)*l,this.c=-Math.sin(h-d)*u,this.d=Math.cos(h-d)*u,this.tx=t-(i*this.a+a*this.c),this.ty=e-(i*this.b+a*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,a=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=a*t.a+this.d*t.c,this.d=a*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,a=this.c,l=this.d,u=t.pivot,h=-Math.atan2(-a,l),d=Math.atan2(i,e),p=Math.abs(h+d);return p<1e-5||Math.abs(rT-p)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=d),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(a*a+l*l),t.position.x=this.tx+(u.x*e+u.y*a),t.position.y=this.ty+(u.x*i+u.y*l),t}invert(){const t=this.a,e=this.b,i=this.c,a=this.d,l=this.tx,u=t*a-e*i;return this.a=a/u,this.b=-e/u,this.c=-i/u,this.d=t/u,this.tx=(i*this.ty-a*l)/u,this.ty=-(t*this.ty-e*l)/u,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Nt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return cT.identity()}static get shared(){return lT.identity()}}const lT=new Nt,cT=new Nt,$s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ks=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Js=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],tr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],cf=[],nv=[],gc=Math.sign;function uT(){for(let r=0;r<16;r++){const t=[];cf.push(t);for(let e=0;e<16;e++){const i=gc($s[r]*$s[e]+Js[r]*Ks[e]),a=gc(Ks[r]*$s[e]+tr[r]*Ks[e]),l=gc($s[r]*Js[e]+Js[r]*tr[e]),u=gc(Ks[r]*Js[e]+tr[r]*tr[e]);for(let h=0;h<16;h++)if($s[h]===i&&Ks[h]===a&&Js[h]===l&&tr[h]===u){t.push(h);break}}}for(let r=0;r<16;r++){const t=new Nt;t.set($s[r],Ks[r],Js[r],tr[r],0,0),nv.push(t)}}uT();const se={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>$s[r],uY:r=>Ks[r],vX:r=>Js[r],vY:r=>tr[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>cf[r][t],sub:(r,t)=>cf[r][se.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?se.S:se.N:Math.abs(t)*2<=Math.abs(r)?r>0?se.E:se.W:t>0?r>0?se.SE:se.SW:r>0?se.NE:se.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const a=nv[se.inv(t)];a.tx=e,a.ty=i,r.append(a)}},_c=[new Ye,new Ye,new Ye,new Ye];class De{constructor(t=0,e=0,i=0,a=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(a)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new De(0,0,0,0)}clone(){return new De(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,a=.5){const{width:l,height:u}=this;if(l<=0||u<=0)return!1;const h=this.x,d=this.y,p=i*(1-a),m=i-p,_=h-p,v=h+l+p,y=d-p,x=d+u+p,w=h+m,S=h+l-m,A=d+m,R=d+u-m;return t>=_&&t<=v&&e>=y&&e<=x&&!(t>w&&t<S&&e>A&&e<R)}intersects(t,e){if(!e){const I=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=I)return!1;const L=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>L}const i=this.left,a=this.right,l=this.top,u=this.bottom;if(a<=i||u<=l)return!1;const h=_c[0].set(t.left,t.top),d=_c[1].set(t.left,t.bottom),p=_c[2].set(t.right,t.top),m=_c[3].set(t.right,t.bottom);if(p.x<=h.x||d.y<=h.y)return!1;const _=Math.sign(e.a*e.d-e.b*e.c);if(_===0||(e.apply(h,h),e.apply(d,d),e.apply(p,p),e.apply(m,m),Math.max(h.x,d.x,p.x,m.x)<=i||Math.min(h.x,d.x,p.x,m.x)>=a||Math.max(h.y,d.y,p.y,m.y)<=l||Math.min(h.y,d.y,p.y,m.y)>=u))return!1;const v=_*(d.y-h.y),y=_*(h.x-d.x),x=v*i+y*l,w=v*a+y*l,S=v*i+y*u,A=v*a+y*u;if(Math.max(x,w,S,A)<=v*h.x+y*h.y||Math.min(x,w,S,A)>=v*m.x+y*m.y)return!1;const R=_*(h.y-p.y),O=_*(p.x-h.x),V=R*i+O*l,k=R*a+O*l,N=R*i+O*u,H=R*a+O*u;return!(Math.max(V,k,N,H)<=R*h.x+O*h.y||Math.min(V,k,N,H)>=R*m.x+O*m.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),a=Math.max(this.y,t.y),l=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=a,this.height=Math.max(l-a,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,a=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=a-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),a=Math.min(this.y,t.y),l=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=a,this.height=l-a,this}getBounds(t){return t||(t=new De),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,a=t.x+t.width,l=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&a>=this.x&&a<this.x+this.width&&l>=this.y&&l<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Hd={default:-1};function xe(r="default"){return Hd[r]===void 0&&(Hd[r]=-1),++Hd[r]}const Ny={},ue="8.0.0",hT="8.3.4";function Yt(r,t,e=3){if(Ny[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),Ny[t]=!0}const iv=()=>{};function zy(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function By(r){return!(r&r-1)&&!!r}function sv(r){const t={};for(const e in r)r[e]!==void 0&&(t[e]=r[e]);return t}const Hy=Object.create(null);function dT(r){const t=Hy[r];return t===void 0&&(Hy[r]=xe("resource")),t}const rv=class av extends _i{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...av.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Yt(ue,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=dT(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};rv.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let fT=rv;const ov=class lv extends _i{constructor(t={}){super(),this.options=t,this.uid=xe("textureSource"),this._resourceType="textureSource",this._resourceId=xe("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...lv.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new fT(sv(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=xe("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const a=Math.round(t*i),l=Math.round(e*i);return this.width=a/i,this.height=l/i,this._resolution=i,this.pixelWidth===a&&this.pixelHeight===l?!1:(this._refreshPOT(),this.pixelWidth=a,this.pixelHeight=l,this.emit("resize",this),this._resourceId=xe("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=By(this.pixelWidth)&&By(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};ov.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let yi=ov;class qf extends yi{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}qf.extension=It.TextureSource;const Py=new Nt;class pT{constructor(t,e){this.mapCoord=new Nt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let a=0;a<t.length;a+=2){const l=t[a],u=t[a+1];e[a]=l*i.a+u*i.c+i.tx,e[a+1]=l*i.b+u*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,a=t.trim;a&&(Py.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Py));const l=t.source,u=this.uClampFrame,h=this.clampMargin/l._resolution,d=this.clampOffset/l._resolution;return u[0]=(t.frame.x+h+d)/l.width,u[1]=(t.frame.y+h+d)/l.height,u[2]=(t.frame.x+t.frame.width-h+d)/l.width,u[3]=(t.frame.y+t.frame.height-h+d)/l.height,this.uClampOffset[0]=this.clampOffset/l.pixelWidth,this.uClampOffset[1]=this.clampOffset/l.pixelHeight,this.isSimple=t.frame.width===l.width&&t.frame.height===l.height&&t.rotate===0,!0}}class Xt extends _i{constructor({source:t,label:e,frame:i,orig:a,trim:l,defaultAnchor:u,defaultBorders:h,rotate:d,dynamic:p}={}){if(super(),this.uid=xe("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new De,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new yi,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:m,height:_}=this._source;this.frame.width=m,this.frame.height=_}this.orig=a||this.frame,this.trim=l,this.rotate=d??0,this.defaultAnchor=u,this.defaultBorders=h,this.destroyed=!1,this.dynamic=p||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new pT(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:a}=this._source,l=e.x/i,u=e.y/a,h=e.width/i,d=e.height/a;let p=this.rotate;if(p){const m=h/2,_=d/2,v=l+m,y=u+_;p=se.add(p,se.NW),t.x0=v+m*se.uX(p),t.y0=y+_*se.uY(p),p=se.add(p,2),t.x1=v+m*se.uX(p),t.y1=y+_*se.uY(p),p=se.add(p,2),t.x2=v+m*se.uX(p),t.y2=y+_*se.uY(p),p=se.add(p,2),t.x3=v+m*se.uX(p),t.y3=y+_*se.uY(p)}else t.x0=l,t.y0=u,t.x1=l+h,t.y1=u,t.x2=l+h,t.y2=u+d,t.x3=l,t.y3=u+d}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Yt(ue,"Texture.baseTexture is now Texture.source"),this._source}}Xt.EMPTY=new Xt({label:"EMPTY",source:new yi({label:"EMPTY"})});Xt.EMPTY.destroy=iv;Xt.WHITE=new Xt({source:new qf({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Xt.WHITE.destroy=iv;function mT(r,t,e){const{width:i,height:a}=e.orig,l=e.trim;if(l){const u=l.width,h=l.height;r.minX=l.x-t._x*i,r.maxX=r.minX+u,r.minY=l.y-t._y*a,r.maxY=r.minY+h}else r.minX=-t._x*i,r.maxX=r.minX+i,r.minY=-t._y*a,r.maxY=r.minY+a}const Vy=new Nt;class ti{constructor(t=1/0,e=1/0,i=-1/0,a=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Vy,this.minX=t,this.minY=e,this.maxX=i,this.maxY=a}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new De);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Vy,this}set(t,e,i,a){this.minX=t,this.minY=e,this.maxX=i,this.maxY=a}addFrame(t,e,i,a,l){l||(l=this.matrix);const u=l.a,h=l.b,d=l.c,p=l.d,m=l.tx,_=l.ty;let v=this.minX,y=this.minY,x=this.maxX,w=this.maxY,S=u*t+d*e+m,A=h*t+p*e+_;S<v&&(v=S),A<y&&(y=A),S>x&&(x=S),A>w&&(w=A),S=u*i+d*e+m,A=h*i+p*e+_,S<v&&(v=S),A<y&&(y=A),S>x&&(x=S),A>w&&(w=A),S=u*t+d*a+m,A=h*t+p*a+_,S<v&&(v=S),A<y&&(y=A),S>x&&(x=S),A>w&&(w=A),S=u*i+d*a+m,A=h*i+p*a+_,S<v&&(v=S),A<y&&(y=A),S>x&&(x=S),A>w&&(w=A),this.minX=v,this.minY=y,this.maxX=x,this.maxY=w}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,a=this.maxX,l=this.maxY,{a:u,b:h,c:d,d:p,tx:m,ty:_}=t;let v=u*e+d*i+m,y=h*e+p*i+_;this.minX=v,this.minY=y,this.maxX=v,this.maxY=y,v=u*a+d*i+m,y=h*a+p*i+_,this.minX=v<this.minX?v:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=y>this.maxY?y:this.maxY,v=u*e+d*l+m,y=h*e+p*l+_,this.minX=v<this.minX?v:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=y>this.maxY?y:this.maxY,v=u*a+d*l+m,y=h*a+p*l+_,this.minX=v<this.minX?v:this.minX,this.minY=y<this.minY?y:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=y>this.maxY?y:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,a){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>a&&(this.maxY=a),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new ti(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,a){let l=this.minX,u=this.minY,h=this.maxX,d=this.maxY;a||(a=this.matrix);const p=a.a,m=a.b,_=a.c,v=a.d,y=a.tx,x=a.ty;for(let w=e;w<i;w+=2){const S=t[w],A=t[w+1],R=p*S+_*A+y,O=m*S+v*A+x;l=R<l?R:l,u=O<u?O:u,h=R>h?R:h,d=O>d?O:d}this.minX=l,this.minY=u,this.maxX=h,this.maxY=d}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var gT={grad:.9,turn:360,rad:360/(2*Math.PI)},Ii=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Re=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Un=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},cv=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Iy=function(r){return{r:Un(r.r,0,255),g:Un(r.g,0,255),b:Un(r.b,0,255),a:Un(r.a)}},Pd=function(r){return{r:Re(r.r),g:Re(r.g),b:Re(r.b),a:Re(r.a,3)}},_T=/^#([0-9a-f]{3,8})$/i,yc=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},uv=function(r){var t=r.r,e=r.g,i=r.b,a=r.a,l=Math.max(t,e,i),u=l-Math.min(t,e,i),h=u?l===t?(e-i)/u:l===e?2+(i-t)/u:4+(t-e)/u:0;return{h:60*(h<0?h+6:h),s:l?u/l*100:0,v:l/255*100,a}},hv=function(r){var t=r.h,e=r.s,i=r.v,a=r.a;t=t/360*6,e/=100,i/=100;var l=Math.floor(t),u=i*(1-e),h=i*(1-(t-l)*e),d=i*(1-(1-t+l)*e),p=l%6;return{r:255*[i,h,u,u,d,i][p],g:255*[d,i,i,h,u,u][p],b:255*[u,u,d,i,i,h][p],a}},Uy=function(r){return{h:cv(r.h),s:Un(r.s,0,100),l:Un(r.l,0,100),a:Un(r.a)}},Gy=function(r){return{h:Re(r.h),s:Re(r.s),l:Re(r.l),a:Re(r.a,3)}},Ly=function(r){return hv((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},Ro=function(r){return{h:(t=uv(r)).h,s:(a=(200-(e=t.s))*(i=t.v)/100)>0&&a<200?e*i/100/(a<=100?a:200-a)*100:0,l:a/2,a:t.a};var t,e,i,a},yT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uf={string:[[function(r){var t=_T.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Re(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Re(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=bT.exec(r)||xT.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Iy({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=yT.exec(r)||vT.exec(r);if(!t)return null;var e,i,a=Uy({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(gT[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ly(a)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,a=r.a,l=a===void 0?1:a;return Ii(t)&&Ii(e)&&Ii(i)?Iy({r:Number(t),g:Number(e),b:Number(i),a:Number(l)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,a=r.a,l=a===void 0?1:a;if(!Ii(t)||!Ii(e)||!Ii(i))return null;var u=Uy({h:Number(t),s:Number(e),l:Number(i),a:Number(l)});return Ly(u)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,a=r.a,l=a===void 0?1:a;if(!Ii(t)||!Ii(e)||!Ii(i))return null;var u=function(h){return{h:cv(h.h),s:Un(h.s,0,100),v:Un(h.v,0,100),a:Un(h.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(l)});return hv(u)},"hsv"]]},qy=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},ST=function(r){return typeof r=="string"?qy(r.trim(),uf.string):typeof r=="object"&&r!==null?qy(r,uf.object):[null,void 0]},Vd=function(r,t){var e=Ro(r);return{h:e.h,s:Un(e.s+100*t,0,100),l:e.l,a:e.a}},Id=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Fy=function(r,t){var e=Ro(r);return{h:e.h,s:e.s,l:Un(e.l+100*t,0,100),a:e.a}},hf=function(){function r(t){this.parsed=ST(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Re(Id(this.rgba),2)},r.prototype.isDark=function(){return Id(this.rgba)<.5},r.prototype.isLight=function(){return Id(this.rgba)>=.5},r.prototype.toHex=function(){return t=Pd(this.rgba),e=t.r,i=t.g,a=t.b,u=(l=t.a)<1?yc(Re(255*l)):"","#"+yc(e)+yc(i)+yc(a)+u;var t,e,i,a,l,u},r.prototype.toRgb=function(){return Pd(this.rgba)},r.prototype.toRgbString=function(){return t=Pd(this.rgba),e=t.r,i=t.g,a=t.b,(l=t.a)<1?"rgba("+e+", "+i+", "+a+", "+l+")":"rgb("+e+", "+i+", "+a+")";var t,e,i,a,l},r.prototype.toHsl=function(){return Gy(Ro(this.rgba))},r.prototype.toHslString=function(){return t=Gy(Ro(this.rgba)),e=t.h,i=t.s,a=t.l,(l=t.a)<1?"hsla("+e+", "+i+"%, "+a+"%, "+l+")":"hsl("+e+", "+i+"%, "+a+"%)";var t,e,i,a,l},r.prototype.toHsv=function(){return t=uv(this.rgba),{h:Re(t.h),s:Re(t.s),v:Re(t.v),a:Re(t.a,3)};var t},r.prototype.invert=function(){return di({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),di(Vd(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),di(Vd(this.rgba,-t))},r.prototype.grayscale=function(){return di(Vd(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),di(Fy(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),di(Fy(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?di({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Re(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=Ro(this.rgba);return typeof t=="number"?di({h:t,s:e.s,l:e.l,a:e.a}):Re(e.h)},r.prototype.isEqual=function(t){return this.toHex()===di(t).toHex()},r}(),di=function(r){return r instanceof hf?r:new hf(r)},Yy=[],TT=function(r){r.forEach(function(t){Yy.indexOf(t)<0&&(t(hf,uf),Yy.push(t))})};function wT(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var a in e)i[e[a]]=a;var l={};r.prototype.toName=function(u){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,p=i[this.toHex()];if(p)return p;if(u!=null&&u.closest){var m=this.toRgb(),_=1/0,v="black";if(!l.length)for(var y in e)l[y]=new r(e[y]).toRgb();for(var x in e){var w=(h=m,d=l[x],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));w<_&&(_=w,v=x)}return v}},t.string.push([function(u){var h=u.toLowerCase(),d=h==="transparent"?"#0000":e[h];return d?new r(d).toRgb():null},"name"])}TT([wT]);const la=class Mo{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Mo)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((l,u)=>l===e[u]);if(t!==null&&e!==null){const l=Object.keys(t),u=Object.keys(e);return l.length!==u.length?!1:l.every(h=>t[h]===e[h])}return t===e}toRgba(){const[t,e,i,a]=this._components;return{r:t,g:e,b:i,a}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,a]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(a*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,a,l]=this._components;return t[0]=e,t[1]=i,t[2]=a,t[3]=l,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,a]=this._components;return t[0]=e,t[1]=i,t[2]=a,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,a,l]=Mo._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=a,this._components[3]*=l,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,a=this._int>>8&255,l=this._int&255;return e&&(i=i*t+.5|0,a=a*t+.5|0,l=l*t+.5|0),(t*255<<24)+(i<<16)+(a<<8)+l}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,a,l;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const u=t;e=(u>>16&255)/255,i=(u>>8&255)/255,a=(u&255)/255,l=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,a,l=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,a,l=255]=t,e/=255,i/=255,a/=255,l/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=Mo.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const u=di(t);u.isValid()&&({r:e,g:i,b:a,a:l}=u.rgba,e/=255,i/=255,a/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=a,this._components[3]=l,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((a,l)=>{t[l]=Math.min(Math.max(a,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Mo||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};la.shared=new la;la._temp=new la;la.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Xe=la;const CT={cullArea:null,cullable:!1,cullableChildren:!0};class Ff{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class AT{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Ff(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const Gi=new AT,MT={get isCachedAsTexture(){var r;return!!((r=this.renderGroup)!=null&&r.isCachedAsTexture)},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){var r;(r=this.renderGroup)==null||r.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Yt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function ET(r,t,e){const i=r.length;let a;if(t>=i||e===0)return;e=t+e>i?i-t:e;const l=i-e;for(a=t;a<l;++a)r[a]=r[a+e];r.length=l}const kT={allowChildren:!0,removeChildren(r=0,t){const e=t??this.children.length,i=e-r,a=[];if(i>0&&i<=e){for(let u=e-1;u>=r;u--){const h=this.children[u];h&&(a.push(h),h.parent=null)}ET(this.children,r,e);const l=this.renderGroup||this.parentRenderGroup;l&&l.removeChildren(a);for(let u=0;u<a.length;++u)this.emit("childRemoved",a[u],this,u),a[u].emit("removed",this);return a.length>0&&this._didViewChangeTick++,a}else if(i===0&&this.children.length===0)return a;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const t=this.getChildAt(r);return this.removeChild(t)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,t)},getChildIndex(r){const t=this.children.indexOf(r);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(r,t){this.allowChildren||Yt(ue,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${r}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(r.parent){const a=r.parent.children.indexOf(r);if(r.parent===this&&a===t)return r;a!==-1&&r.parent.children.splice(a,1)}t===e.length?e.push(r):e.splice(t,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,t),r.emit("added",this),r},swapChildren(r,t){if(r===t)return;const e=this.getChildIndex(r),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=r;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var r;(r=this.parent)==null||r.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(t=>this.reparentChildAt(t,this.children.length)),r[0])},reparentChildAt(r,t){if(r.parent===this)return this.setChildIndex(r,t),r;const e=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),r.setFromMatrix(e),r}},RT={collectRenderables(r,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,t,e))},collectRenderablesSimple(r,t,e){const i=this.children,a=i.length;for(let l=0;l<a;l++)i[l].collectRenderables(r,t,e)},collectRenderablesWithEffects(r,t,e){const{renderPipes:i}=t;for(let a=0;a<this.effects.length;a++){const l=this.effects[a];i[l.pipe].push(l,this,r)}this.collectRenderablesSimple(r,t,e);for(let a=this.effects.length-1;a>=0;a--){const l=this.effects[a];i[l.pipe].pop(l,this,r)}}};class Xy{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class DT{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return Gi.get(i.maskClass,t)}return t}returnMaskEffect(t){Gi.return(t)}}const df=new DT;qn.handleByList(It.MaskEffect,df._effectClasses);const OT={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const t=this.effects.indexOf(r);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const t=this._maskEffect;(t==null?void 0:t.mask)!==r&&(t&&(this.removeEffect(t),df.returnMaskEffect(t),this._maskEffect=null),r!=null&&(this._maskEffect=df.getMaskEffect(r),this.addEffect(this._maskEffect)))},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},get mask(){var r;return(r=this._maskEffect)==null?void 0:r.mask},set filters(r){var l;!Array.isArray(r)&&r&&(r=[r]);const t=this._filterEffect||(this._filterEffect=new Xy);r=r;const e=(r==null?void 0:r.length)>0,i=((l=t.filters)==null?void 0:l.length)>0,a=e!==i;r=Array.isArray(r)?r.slice(0):r,t.filters=Object.freeze(r),a&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=r??null))},get filters(){var r;return(r=this._filterEffect)==null?void 0:r.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new Xy),this._filterEffect.filterArea=r},get filterArea(){var r;return(r=this._filterEffect)==null?void 0:r.filterArea}},NT={label:null,get name(){return Yt(ue,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Yt(ue,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,t=!1){return this.getChildByLabel(r,t)},getChildByLabel(r,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const a=e[i];if(a.label===r||r instanceof RegExp&&r.test(a.label))return a}if(t)for(let i=0;i<e.length;i++){const l=e[i].getChildByLabel(r,!0);if(l)return l}return null},getChildrenByLabel(r,t=!1,e=[]){const i=this.children;for(let a=0;a<i.length;a++){const l=i[a];(l.label===r||r instanceof RegExp&&r.test(l.label))&&e.push(l)}if(t)for(let a=0;a<i.length;a++)i[a].getChildrenByLabel(r,!0,e);return e}},en=new Ff(Nt),Li=new Ff(ti),zT=new Nt,BT={getFastGlobalBounds(r,t){t||(t=new ti),t.clear(),this._getGlobalBoundsRecursive(!!r,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(r,t,e){let i=t;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const a=!!this.effects.length;if((this.renderGroup||a)&&(i=Li.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const u=this.bounds;i.addFrame(u.minX,u.minY,u.maxX,u.maxY,this.groupTransform)}const l=this.children;for(let u=0;u<l.length;u++)l[u]._getGlobalBoundsRecursive(r,i,e)}if(a){let l=!1;const u=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(l||(l=!0,i.applyMatrix(u.worldTransform)),this.effects[h].addBounds(i,!0));l&&(i.applyMatrix(u.worldTransform.copyTo(zT).invert()),t.addBounds(i,this.relativeGroupTransform)),t.addBounds(i),Li.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),Li.return(i))}};function dv(r,t,e){e.clear();let i,a;return r.parent?t?i=r.parent.worldTransform:(a=en.get().identity(),i=Yf(r,a)):i=Nt.IDENTITY,fv(r,e,i,t),a&&en.return(a),e.isValid||e.set(0,0,0,0),e}function fv(r,t,e,i){var h,d;if(!r.visible||!r.measurable)return;let a;i?a=r.worldTransform:(r.updateLocalTransform(),a=en.get(),a.appendFrom(r.localTransform,e));const l=t,u=!!r.effects.length;if(u&&(t=Li.get().clear()),r.boundsArea)t.addRect(r.boundsArea,a);else{r.bounds&&(t.matrix=a,t.addBounds(r.bounds));for(let p=0;p<r.children.length;p++)fv(r.children[p],t,a,i)}if(u){for(let p=0;p<r.effects.length;p++)(d=(h=r.effects[p]).addBounds)==null||d.call(h,t);l.addBounds(t,Nt.IDENTITY),Li.return(t)}i||en.return(a)}function Yf(r,t){const e=r.parent;return e&&(Yf(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function pv(r,t){if(r===16777215||!t)return t;if(t===16777215||!r)return r;const e=r>>16&255,i=r>>8&255,a=r&255,l=t>>16&255,u=t>>8&255,h=t&255,d=e*l/255|0,p=i*u/255|0,m=a*h/255|0;return(d<<16)+(p<<8)+m}const jy=16777215;function Wy(r,t){return r===jy?t:t===jy?r:pv(r,t)}function Rc(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const HT={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(r,t){if(t)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const e=Yf(this,en.get().identity());return r.appendFrom(this.localTransform,e),en.return(e),r},getGlobalTint(r){if(r)return this.renderGroup?Rc(this.renderGroup.worldColor):this.parentRenderGroup?Rc(Wy(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=Wy(t,e.localColor),e=e.parent;return Rc(t)}};let Ud=0;const Zy=500;function wn(...r){Ud!==Zy&&(Ud++,Ud===Zy?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}function mv(r,t,e){return t.clear(),e||(e=Nt.IDENTITY),gv(r,t,e,r,!0),t.isValid||t.set(0,0,0,0),t}function gv(r,t,e,i,a){var d,p;let l;if(a)l=en.get(),l=e.copyTo(l);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const m=r.localTransform;l=en.get(),l.appendFrom(m,e)}const u=t,h=!!r.effects.length;if(h&&(t=Li.get().clear()),r.boundsArea)t.addRect(r.boundsArea,l);else{r.renderPipeId&&(t.matrix=l,t.addBounds(r.bounds));const m=r.children;for(let _=0;_<m.length;_++)gv(m[_],t,l,i,!1)}if(h){for(let m=0;m<r.effects.length;m++)(p=(d=r.effects[m]).addLocalBounds)==null||p.call(d,t,i);u.addBounds(t,Nt.IDENTITY),Li.return(t)}en.return(l)}function _v(r,t){const e=r.children;for(let i=0;i<e.length;i++){const a=e[i],l=a.uid,u=(a._didViewChangeTick&65535)<<16|a._didContainerChangeTick&65535,h=t.index;(t.data[h]!==l||t.data[h+1]!==u)&&(t.data[t.index]=l,t.data[t.index+1]=u,t.didChange=!0),t.index=h+2,a.children.length&&_v(a,t)}return t.didChange}const PT=new Nt,VT={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=r/t*e:this.scale.x=e},_setHeight(r,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=r/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new ti});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),_v(this,r),r.didChange&&mv(this,r.localBounds,PT),r.localBounds},getBounds(r,t){return dv(this,r,t||new ti)}},IT={_onRender:null,set onRender(r){const t=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},UT={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(GT))}};function GT(r,t){return r._zIndex-t._zIndex}const LT={getGlobalPosition(r=new Ye,t=!1){return this.parent?this.parent.toGlobal(this._position,r,t):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,t,e=!1){const i=this.getGlobalTransform(en.get(),e);return t=i.apply(r,t),en.return(i),t},toLocal(r,t,e,i){t&&(r=t.toGlobal(r,e,i));const a=this.getGlobalTransform(en.get(),i);return e=a.applyInverse(r,e),en.return(a),e}};class yv{constructor(){this.uid=xe("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let qT=0;class FT{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){const a=new yi({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new Xt({source:a,label:`texturePool_${qT++}`})}getOptimalTexture(t,e,i=1,a){let l=Math.ceil(t*i-1e-6),u=Math.ceil(e*i-1e-6);l=zy(l),u=zy(u);const h=(l<<17)+(u<<1)+(a?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(l,u,a)),d.source._resolution=i,d.source.width=l/i,d.source.height=u/i,d.source.pixelWidth=l,d.source.pixelHeight=u,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=e,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let a=0;a<i.length;a++)i[a].destroy(!0)}this._texturePool={}}}const YT=new FT;class XT{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Nt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new yv,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const a=e[i];a._updateFlags=15,this.addChild(a)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(YT.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let a=0;a<i.length;a++)this._getChildren(i[a],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Nt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Nt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Nt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function jT(r,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(r[i]=t[i])}const Gd=new cn(null),Ld=new cn(null),qd=new cn(null,1,1),Qy=1,WT=2,Fd=4;class Pt extends _i{constructor(t={}){var e,i;super(),this.uid=xe("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Nt,this.relativeGroupTransform=new Nt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new cn(this,0,0),this._scale=qd,this._pivot=Ld,this._skew=Gd,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],jT(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(a=>this.addChild(a)),(i=t.parent)==null||i.addChild(this)}static mixin(t){Yt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),qn.mixin(Pt,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Yt(ue,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let a=0;a<t.length;a++)this.addChild(t[a]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let a=0;a<t.length;a++)this.removeChild(t[a]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=Gi.get(XT,this),this.groupTransform=Nt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),Gi.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Nt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*aT}set angle(t){this.rotation=t*oT}get pivot(){return this._pivot===Ld&&(this._pivot=new cn(this,0,0)),this._pivot}set pivot(t){this._pivot===Ld&&(this._pivot=new cn(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Gd&&(this._skew=new cn(this,0,0)),this._skew}set skew(t){this._skew===Gd&&(this._skew=new cn(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===qd&&(this._scale=new cn(this,1,1)),this._scale}set scale(t){this._scale===qd&&(this._scale=new cn(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,a=this._pivot,l=this._position,u=i._x,h=i._y,d=a._x,p=a._y;e.a=this._cx*u,e.b=this._sx*u,e.c=this._cy*h,e.d=this._sy*h,e.tx=l._x-(d*e.a+p*e.c),e.ty=l._y-(d*e.b+p*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Qy,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=Xe.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Qy,this._onUpdate())}get tint(){return Rc(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=WT,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Fd,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Fd,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Fd,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var a;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let l=0;l<e.length;++l)e[l].destroy(t);(a=this.renderGroup)==null||a.destroy(),this.renderGroup=null}}qn.mixin(Pt,kT,BT,LT,IT,VT,OT,NT,UT,CT,MT,HT,RT);class Xf extends Pt{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new ti(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:a}=t;return i>=e.minX&&i<=e.maxX&&a>=e.minY&&a<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){const{renderPipes:a,renderableGC:l}=e;a.blendMode.setBlendMode(this,this.groupBlendMode,t),a[this.renderPipeId].addRenderable(this,t),l.addRenderable(this),this.didViewUpdate=!1;const h=this.children,d=h.length;for(let p=0;p<d;p++)h[p].collectRenderables(t,e,i)}}class Ho extends Xf{constructor(t=Xt.EMPTY){t instanceof Xt&&(t={texture:t});const{texture:e=Xt.EMPTY,anchor:i,roundPixels:a,width:l,height:u,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new cn({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=a??!1,l!==void 0&&(this.width=l),u!==void 0&&(this.height=u)}static from(t,e=!1){return t instanceof Xt?new Ho(t):new Ho(Xt.from(t,e))}set texture(t){t||(t=Xt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return mT(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Yt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:a,height:l}=e.orig;i.minX=-t._x*a,i.maxX=i.minX+a,i.minY=-t._y*l,i.maxY=i.minY+l}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const ZT=new ti;function vv(r,t,e){const i=ZT;r.measurable=!0,dv(r,e,i),t.addBoundsMask(i),r.measurable=!1}function bv(r,t,e){const i=Li.get();r.measurable=!0;const a=en.get().identity(),l=xv(r,e,a);mv(r,i,l),r.measurable=!1,t.addBoundsMask(i),en.return(a),Li.return(i)}function xv(r,t,e){return r?(r!==t&&(xv(r.parent,t,e),r.updateLocalTransform(),e.append(r.localTransform)),e):(wn("Mask bounds, renderable is not inside the root container"),e)}class Sv{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Ho),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||vv(this.mask,t,e)}addLocalBounds(t,e){bv(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Ho}}Sv.extension=It.MaskEffect;class Tv{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Tv.extension=It.MaskEffect;class wv{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){vv(this.mask,t,e)}addLocalBounds(t,e){bv(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Pt}}wv.extension=It.MaskEffect;const QT={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let $y=QT;const Jn={get(){return $y},set(r){$y=r}};class Cv extends yi{constructor(t){t.resource||(t.resource=Jn.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const a=super.resize(t,e,i);return a&&this.resizeCanvas(),a}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Cv.extension=It.TextureSource;class Pc extends yi{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=Jn.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,wn("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Pc.extension=It.TextureSource;var ff=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ff||{});class Yd{constructor(t,e=null,i=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=a}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Av=class vn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Yd(null,null,1/0),this.deltaMS=1/vn.targetFPMS,this.elapsedMS=1/vn.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=ff.NORMAL){return this._addListener(new Yd(t,e,i))}addOnce(t,e,i=ff.NORMAL){return this._addListener(new Yd(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const l=t-this._lastFrame|0;if(l<this._minElapsedMS)return;this._lastFrame=t-l%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*vn.targetFPMS;const i=this._head;let a=i.next;for(;a;)a=a.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,vn.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!vn._shared){const t=vn._shared=new vn;t.autoStart=!0,t._protected=!0}return vn._shared}static get system(){if(!vn._system){const t=vn._system=new vn;t.autoStart=!0,t._protected=!0}return vn._system}};Av.targetFPMS=.06;let vc=Av,Xd;async function $T(){return Xd??(Xd=(async()=>{var u;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(h=>{const d=document.createElement("video");d.onloadeddata=()=>h(d),d.onerror=()=>h(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const l=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,l),t.deleteFramebuffer(a),t.deleteTexture(i),(u=t.getExtension("WEBGL_lose_context"))==null||u.loseContext(),l[0]<=l[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Xd}const Kc=class Mv extends yi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Mv.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=vc.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await $T(),this._load=new Promise((i,a)=>{this.isValid?i(this):(this._resolve=i,this._reject=a,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(vc.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(vc.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(vc.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Kc.extension=It.TextureSource;Kc.defaultOptions={...yi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Kc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let KT=Kc;const Jr=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r);class JT{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||wn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Jr(t);let a;for(let d=0;d<this.parsers.length;d++){const p=this.parsers[d];if(p.test(e)){a=p.getCacheableAssets(i,e);break}}const l=new Map(Object.entries(a||{}));a||i.forEach(d=>{l.set(d,e)});const u=[...l.keys()],h={cacheKeys:u,keys:i};i.forEach(d=>{this._cacheMap.set(d,h)}),u.forEach(d=>{const p=a?a[d]:e;this._cache.has(d)&&this._cache.get(d)!==p&&wn("[Cache] already has key:",d),this._cache.set(d,l.get(d))})}remove(t){if(!this._cacheMap.has(t)){wn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(a=>{this._cache.delete(a)}),e.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}}const ta=new JT,pf=[];qn.handleByList(It.TextureSource,pf);function Ev(r={}){const t=r&&r.resource,e=t?r.resource:r,i=t?r:{resource:r};for(let a=0;a<pf.length;a++){const l=pf[a];if(l.test(e))return new l(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function tw(r={},t=!1){const e=r&&r.resource,i=e?r.resource:r,a=e?r:{resource:r};if(!t&&ta.has(i))return ta.get(i);const l=new Xt({source:Ev(a)});return l.on("destroy",()=>{ta.has(i)&&ta.remove(i)}),t||ta.set(i,l),l}function ew(r,t=!1){return typeof r=="string"?ta.get(r):r instanceof yi?new Xt({source:r}):tw(r,t)}Xt.from=ew;yi.from=Ev;qn.add(Sv,Tv,wv,KT,Pc,Cv,qf);var kv=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(kv||{});function Wn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function To(r){return r.split("?")[0].split("#")[0]}function nw(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function iw(r,t,e){return r.replace(new RegExp(nw(t),"g"),e)}function sw(r,t){let e="",i=0,a=-1,l=0,u=-1;for(let h=0;h<=r.length;++h){if(h<r.length)u=r.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(a===h-1||l===1))if(a!==h-1&&l===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",i=0):(e=e.slice(0,d),i=e.length-1-e.lastIndexOf("/")),a=h,l=0;continue}}else if(e.length===2||e.length===1){e="",i=0,a=h,l=0;continue}}}else e.length>0?e+=`/${r.slice(a+1,h)}`:e=r.slice(a+1,h),i=h-a-1;a=h,l=0}else u===46&&l!==-1?++l:l=-1}return e}const Po={toPosix(r){return iw(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Wn(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(Wn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=To(this.toPosix(t??Jn.get().getBaseUrl())),a=To(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?Po.join(a,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(Wn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=sw(r),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return Wn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(Wn(i),i.length>0)if(t===void 0)t=i;else{const a=r[e-1]??"";this.joinExtensions.includes(this.extname(a).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Wn(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,a=!0;const l=this.getProtocol(r),u=r;r=r.slice(l.length);for(let h=r.length-1;h>=1;--h)if(t=r.charCodeAt(h),t===47){if(!a){i=h;break}}else a=!1;return i===-1?e?"/":this.isUrl(u)?l+r:l:e&&i===1?"//":l+r.slice(0,i)},rootname(r){Wn(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Wn(r),t&&Wn(t),r=To(this.toPosix(r));let e=0,i=-1,a=!0,l;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let u=t.length-1,h=-1;for(l=r.length-1;l>=0;--l){const d=r.charCodeAt(l);if(d===47){if(!a){e=l+1;break}}else h===-1&&(a=!1,h=l+1),u>=0&&(d===t.charCodeAt(u)?--u===-1&&(i=l):(u=-1,i=h))}return e===i?i=h:i===-1&&(i=r.length),r.slice(e,i)}for(l=r.length-1;l>=0;--l)if(r.charCodeAt(l)===47){if(!a){e=l+1;break}}else i===-1&&(a=!1,i=l+1);return i===-1?"":r.slice(e,i)},extname(r){Wn(r),r=To(this.toPosix(r));let t=-1,e=0,i=-1,a=!0,l=0;for(let u=r.length-1;u>=0;--u){const h=r.charCodeAt(u);if(h===47){if(!a){e=u+1;break}continue}i===-1&&(a=!1,i=u+1),h===46?t===-1?t=u:l!==1&&(l=1):t!==-1&&(l=-1)}return t===-1||i===-1||l===0||l===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){Wn(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=To(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let a;t.root=this.rootname(r),i||this.hasProtocol(r)?a=1:a=0;let l=-1,u=0,h=-1,d=!0,p=r.length-1,m=0;for(;p>=a;--p){if(e=r.charCodeAt(p),e===47){if(!d){u=p+1;break}continue}h===-1&&(d=!1,h=p+1),e===46?l===-1?l=p:m!==1&&(m=1):l!==-1&&(m=-1)}return l===-1||h===-1||m===0||m===1&&l===h-1&&l===u+1?h!==-1&&(u===0&&i?t.base=t.name=r.slice(1,h):t.base=t.name=r.slice(u,h)):(u===0&&i?(t.name=r.slice(1,l),t.base=r.slice(1,h)):(t.name=r.slice(u,l),t.base=r.slice(u,h)),t.ext=r.slice(l,h)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Rv(r,t,e,i,a){const l=t[e];for(let u=0;u<l.length;u++){const h=l[u];e<t.length-1?Rv(r.replace(i[e],h),t,e+1,i,a):a.push(r.replace(i[e],h))}}function rw(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const a=[];e.forEach(l=>{const u=l.substring(1,l.length-1).split(",");a.push(u)}),Rv(r,a,0,e,i)}else i.push(r);return i}const Ky=r=>!Array.isArray(r);class Dv{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return Jr(e||i,l=>typeof l=="string"?l:Array.isArray(l)?l.map(u=>(u==null?void 0:u.src)??u):l!=null&&l.src?l.src:l,!0)}addManifest(t){this._manifest&&wn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let a=e;Array.isArray(e)||(a=Object.entries(e).map(([l,u])=>typeof u=="string"||Array.isArray(u)?{alias:l,src:u}:{alias:l,...u})),a.forEach(l=>{const u=l.src,h=l.alias;let d;if(typeof h=="string"){const p=this._createBundleAssetId(t,h);i.push(p),d=[h,p]}else{const p=h.map(m=>this._createBundleAssetId(t,m));i.push(...p),d=[...h,...p]}this.add({...l,alias:d,src:u})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=l=>{this.hasKey(l)&&wn(`[Resolver] already has key: ${l} overwriting`)},Jr(e).forEach(l=>{const{src:u}=l;let{data:h,format:d,loadParser:p}=l;const m=Jr(u).map(y=>typeof y=="string"?rw(y):Array.isArray(y)?y:[y]),_=this.getAlias(l);Array.isArray(_)?_.forEach(i):i(_);const v=[];m.forEach(y=>{y.forEach(x=>{let w={};if(typeof x!="object"){w.src=x;for(let S=0;S<this._parsers.length;S++){const A=this._parsers[S];if(A.test(x)){w=A.parse(x);break}}}else h=x.data??h,d=x.format??d,p=x.loadParser??p,w={...w,...x};if(!_)throw new Error(`[Resolver] alias is undefined for this asset: ${w.src}`);w=this._buildResolvedAsset(w,{aliases:_,data:h,format:d,loadParser:p}),v.push(w)})}),_.forEach(y=>{this._assetMap[y]=v})})}resolveBundle(t){const e=Ky(t);t=Jr(t);const i={};return t.forEach(a=>{const l=this._bundles[a];if(l){const u=this.resolve(l),h={};for(const d in u){const p=u[d];h[this._extractAssetIdFromBundle(a,d)]=p}i[a]=h}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const a in e)i[a]=e[a].src;return i}return e.src}resolve(t){const e=Ky(t);t=Jr(t);const i={};return t.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let l=this._assetMap[a];const u=this._getPreferredOrder(l);u==null||u.priority.forEach(h=>{u.params[h].forEach(d=>{const p=l.filter(m=>m[h]?m[h]===d:!1);p.length&&(l=p)})}),this._resolverHash[a]=l[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});i[a]=this._resolverHash[a]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],a=this._preferredOrder.find(l=>l.params.format.includes(i.format));if(a)return a}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:a,loadParser:l,format:u}=e;return(this._basePath||this._rootPath)&&(t.src=Po.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...a||{},...t.data},t.loadParser=l??t.loadParser,t.format=u??t.format??aw(t.src),t}}Dv.RETINA_PREFIX=/@([0-9\.]+)x/;function aw(r){return r.split(".").pop().split("?").shift().split("#").shift()}const Jy=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r},Ov=class Eo{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof Xt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Eo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=Eo.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const a=this._frameKeys[e],l=this._frames[a],u=l.frame;if(u){let h=null,d=null;const p=l.trimmed!==!1&&l.sourceSize?l.sourceSize:l.frame,m=new De(0,0,Math.floor(p.w)/this.resolution,Math.floor(p.h)/this.resolution);l.rotated?h=new De(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):h=new De(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),l.trimmed!==!1&&l.spriteSourceSize&&(d=new De(Math.floor(l.spriteSourceSize.x)/this.resolution,Math.floor(l.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[a]=new Xt({source:this.textureSource,frame:h,orig:m,trim:d,rotate:l.rotated?2:0,defaultAnchor:l.anchor,defaultBorders:l.borders,label:a.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const a=t[e][i];this.animations[e].push(this.textures[a])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Eo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Eo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Ov.BATCH_SIZE=1e3;let t0=Ov;const ow=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Nv(r,t,e){const i={};if(r.forEach(a=>{i[a]=t}),Object.keys(t.textures).forEach(a=>{i[a]=t.textures[a]}),!e){const a=Po.dirname(r[0]);t.linkedSheets.forEach((l,u)=>{const h=Nv([`${a}/${t.data.meta.related_multi_packs[u]}`],l,!0);Object.assign(i,h)})}return i}const lw={extension:It.Asset,cache:{test:r=>r instanceof t0,getCacheableAssets:(r,t)=>Nv(r,t,!1)},resolver:{extension:{type:It.ResolveParser,name:"resolveSpritesheet"},test:r=>{const e=r.split("?")[0].split("."),i=e.pop(),a=e.pop();return i==="json"&&ow.includes(a)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=Dv.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:It.LoadParser,priority:kv.Normal,name:"spritesheetLoader"},async testParse(r,t){return Po.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var m,_;const{texture:i,imageFilename:a,textureOptions:l}=(t==null?void 0:t.data)??{};let u=Po.dirname(t.src);u&&u.lastIndexOf("/")!==u.length-1&&(u+="/");let h;if(i instanceof Xt)h=i;else{const v=Jy(u+(a??r.meta.image),t.src);h=(await e.load([{src:v,data:l}]))[v]}const d=new t0(h.source,r);await d.parse();const p=(m=r==null?void 0:r.meta)==null?void 0:m.related_multi_packs;if(Array.isArray(p)){const v=[];for(const x of p){if(typeof x!="string")continue;let w=u+x;(_=t.data)!=null&&_.ignoreMultiPack||(w=Jy(w,t.src),v.push(e.load({src:w,data:{textureOptions:l,ignoreMultiPack:!0}})))}const y=await Promise.all(v);d.linkedSheets=y,y.forEach(x=>{x.linkedSheets=[d].concat(d.linkedSheets.filter(w=>w!==x))})}return d},async unload(r,t,e){await e.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};qn.add(lw);const jd=Object.create(null),e0=Object.create(null);function jf(r,t){let e=e0[r];return e===void 0&&(jd[t]===void 0&&(jd[t]=1),e0[r]=e=jd[t]++),e}let $r;function zv(){return(!$r||$r!=null&&$r.isContextLost())&&($r=Jn.get().createCanvas().getContext("webgl",{})),$r}let bc;function cw(){if(!bc){bc="mediump";const r=zv();r&&r.getShaderPrecisionFormat&&(bc=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return bc}function uw(r,t,e){return t?r:e?(r=r.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function hw(r,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let a=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return a==="highp"&&i!=="highp"&&(a="mediump"),`precision ${a} float;
${r}`}else if(i!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function dw(r,t){return t?`#version 300 es
${r}`:r}const fw={},pw={};function mw(r,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?fw:pw;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${t}`}
${r}`}function gw(r,t){return t?r.replace("#version 300 es",""):r}const Wd={stripVersion:gw,ensurePrecision:hw,addProgramDefines:uw,setProgramName:mw,insertVersion:dw},Zd=Object.create(null),Bv=class mf{constructor(t){t={...mf.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:cw()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let a=t.fragment,l=t.vertex;Object.keys(Wd).forEach(u=>{const h=i[u];a=Wd[u](a,h,!0),l=Wd[u](l,h,!1)}),this.fragment=a,this.vertex=l,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=jf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return Zd[e]||(Zd[e]=new mf(t)),Zd[e]}};Bv.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Hv=Bv;const n0={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function _w(r){return n0[r]??n0.float32}const yw={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function vw({source:r,entryPoint:t}){const e={},i=r.indexOf(`fn ${t}`);if(i!==-1){const a=r.indexOf("->",i);if(a!==-1){const l=r.substring(i,a),u=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=u.exec(l))!==null;){const d=yw[h[3]]??"float32";e[h[2]]={location:parseInt(h[1],10),format:d,stride:_w(d).stride,offset:0,instance:!1,start:0}}}}return e}function Qd(r){var _,v;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,a=/var(<[^>]+>)? (\w+)/,l=/:\s*(\w+)/,u=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,p=(_=r.match(t))==null?void 0:_.map(y=>({group:parseInt(y.match(e)[1],10),binding:parseInt(y.match(i)[1],10),name:y.match(a)[2],isUniform:y.match(a)[1]==="<uniform>",type:y.match(l)[1]}));if(!p)return{groups:[],structs:[]};const m=((v=r.match(u))==null?void 0:v.map(y=>{const x=y.match(d)[1],w=y.match(h).reduce((S,A)=>{const[R,O]=A.split(":");return S[R.trim()]=O.trim(),S},{});return w?{name:x,members:w}:null}).filter(({name:y})=>p.some(x=>x.type===y)))??[];return{groups:p,structs:m}}var ko=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(ko||{});function bw({groups:r}){const t=[];for(let e=0;e<r.length;e++){const i=r[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:ko.VERTEX|ko.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:ko.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:ko.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function xw({groups:r}){const t=[];for(let e=0;e<r.length;e++){const i=r[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function Sw(r,t){const e=new Set,i=new Set,a=[...r.structs,...t.structs].filter(u=>e.has(u.name)?!1:(e.add(u.name),!0)),l=[...r.groups,...t.groups].filter(u=>{const h=`${u.name}-${u.binding}`;return i.has(h)?!1:(i.add(h),!0)});return{structs:a,groups:l}}const $d=Object.create(null);class Jc{constructor(t){var h,d;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:a,gpuLayout:l,name:u}=t;if(this.name=u,this.fragment=e,this.vertex=i,e.source===i.source){const p=Qd(e.source);this.structsAndGroups=p}else{const p=Qd(i.source),m=Qd(e.source);this.structsAndGroups=Sw(p,m)}this.layout=a??xw(this.structsAndGroups),this.gpuLayout=l??bw(this.structsAndGroups),this.autoAssignGlobalUniforms=((h=this.layout[0])==null?void 0:h.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((d=this.layout[1])==null?void 0:d.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=jf(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=vw(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return $d[e]||($d[e]=new Jc(t)),$d[e]}}const Pv=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],Tw=Pv.reduce((r,t)=>(r[t]=!0,r),{});function ww(r,t){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Vv=class Iv{constructor(t,e){this._touched=0,this.uid=xe("uniform"),this._resourceType="uniformGroup",this._resourceId=xe("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...Iv.defaultOptions,...e},this.uniformStructures=t;const i={};for(const a in t){const l=t[a];if(l.name=a,l.size=l.size??1,!Tw[l.type])throw new Error(`Uniform type ${l.type} is not supported. Supported uniform types are: ${Pv.join(", ")}`);l.value??(l.value=ww(l.type,l.size)),i[a]=l.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=jf(Object.keys(i).map(a=>`${a}-${t[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Vv.defaultOptions={ubo:!1,isStatic:!1};let Uv=Vv;class Dc{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const a=t[i];this.setResource(a,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var a,l;const i=this.resources[e];t!==i&&(i&&((a=t.off)==null||a.call(t,"change",this.onResourceChange,this)),(l=t.on)==null||l.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const a=t[i];(e=a.off)==null||e.call(a,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var gf=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(gf||{});class Wf extends _i{constructor(t){super(),this.uid=xe("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:a,resources:l,compatibleRenderers:u,groupMap:h}=t;this.gpuProgram=e,this.glProgram=i,u===void 0&&(u=0,e&&(u|=gf.WEBGPU),i&&(u|=gf.WEBGL)),this.compatibleRenderers=u;const d={};if(!l&&!a&&(l={}),l&&a)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&a&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&a&&h)for(const p in h)for(const m in h[p]){const _=h[p][m];d[_]={group:p,binding:m,name:_}}else if(e&&a&&!h){const p=e.structsAndGroups.groups;h={},p.forEach(m=>{h[m.group]=h[m.group]||{},h[m.group][m.binding]=m.name,d[m.name]=m})}else if(l){a={},h={},e&&e.structsAndGroups.groups.forEach(_=>{h[_.group]=h[_.group]||{},h[_.group][_.binding]=_.name,d[_.name]=_});let p=0;for(const m in l)d[m]||(a[99]||(a[99]=new Dc,this._ownedBindGroups.push(a[99])),d[m]={group:99,binding:p,name:m},h[99]=h[99]||{},h[99][p]=m,p++);for(const m in l){const _=m;let v=l[m];!v.source&&!v._resourceType&&(v=new Uv(v));const y=d[_];y&&(a[y.group]||(a[y.group]=new Dc,this._ownedBindGroups.push(a[y.group])),a[y.group].setResource(v,y.binding))}}this.groups=a,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(a,d)}addResource(t,e,i){var a,l;(a=this._uniformBindMap)[e]||(a[e]={}),(l=this._uniformBindMap[e])[i]||(l[i]=t),this.groups[e]||(this.groups[e]=new Dc,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const a in e){const l=e[a];Object.defineProperty(i,l.name,{get(){return t[l.group].getResource(l.binding)},set(u){t[l.group].setResource(u,l.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(a=>{a.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...a}=t;let l,u;return e&&(l=Jc.from(e)),i&&(u=Hv.from(i)),new Wf({gpuProgram:l,glProgram:u,...a})}}const _f=[];qn.handleByNamedList(It.Environment,_f);async function Cw(r){if(!r)for(let t=0;t<_f.length;t++){const e=_f[t];if(e.value.test()){await e.value.load();return}}}let wo;function Aw(){if(typeof wo=="boolean")return wo;try{wo=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{wo=!1}return wo}var xc={exports:{}},i0;function Mw(){if(i0)return xc.exports;i0=1,xc.exports=r,xc.exports.default=r;function r(T,E,D){D=D||2;var P=E&&E.length,C=P?E[0]*D:T.length,B=t(T,0,C,D,!0),Y=[];if(!B||B.next===B.prev)return Y;var Q,K,J,lt,ft,nt,_t;if(P&&(B=d(T,E,B,D)),T.length>80*D){Q=J=T[0],K=lt=T[1];for(var ht=D;ht<C;ht+=D)ft=T[ht],nt=T[ht+1],ft<Q&&(Q=ft),nt<K&&(K=nt),ft>J&&(J=ft),nt>lt&&(lt=nt);_t=Math.max(J-Q,lt-K),_t=_t!==0?32767/_t:0}return i(B,Y,D,Q,K,_t,0),Y}function t(T,E,D,P,C){var B,Y;if(C===ut(T,E,D,P)>0)for(B=E;B<D;B+=P)Y=$(B,T[B],T[B+1],Y);else for(B=D-P;B>=E;B-=P)Y=$(B,T[B],T[B+1],Y);return Y&&V(Y,Y.next)&&(rt(Y),Y=Y.next),Y}function e(T,E){if(!T)return T;E||(E=T);var D=T,P;do if(P=!1,!D.steiner&&(V(D,D.next)||O(D.prev,D,D.next)===0)){if(rt(D),D=E=D.prev,D===D.next)break;P=!0}else D=D.next;while(P||D!==E);return E}function i(T,E,D,P,C,B,Y){if(T){!Y&&B&&y(T,P,C,B);for(var Q=T,K,J;T.prev!==T.next;){if(K=T.prev,J=T.next,B?l(T,P,C,B):a(T)){E.push(K.i/D|0),E.push(T.i/D|0),E.push(J.i/D|0),rt(T),T=J.next,Q=J.next;continue}if(T=J,T===Q){Y?Y===1?(T=u(e(T),E,D),i(T,E,D,P,C,B,2)):Y===2&&h(T,E,D,P,C,B):i(e(T),E,D,P,C,B,1);break}}}}function a(T){var E=T.prev,D=T,P=T.next;if(O(E,D,P)>=0)return!1;for(var C=E.x,B=D.x,Y=P.x,Q=E.y,K=D.y,J=P.y,lt=C<B?C<Y?C:Y:B<Y?B:Y,ft=Q<K?Q<J?Q:J:K<J?K:J,nt=C>B?C>Y?C:Y:B>Y?B:Y,_t=Q>K?Q>J?Q:J:K>J?K:J,ht=P.next;ht!==E;){if(ht.x>=lt&&ht.x<=nt&&ht.y>=ft&&ht.y<=_t&&A(C,Q,B,K,Y,J,ht.x,ht.y)&&O(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function l(T,E,D,P){var C=T.prev,B=T,Y=T.next;if(O(C,B,Y)>=0)return!1;for(var Q=C.x,K=B.x,J=Y.x,lt=C.y,ft=B.y,nt=Y.y,_t=Q<K?Q<J?Q:J:K<J?K:J,ht=lt<ft?lt<nt?lt:nt:ft<nt?ft:nt,qt=Q>K?Q>J?Q:J:K>J?K:J,jt=lt>ft?lt>nt?lt:nt:ft>nt?ft:nt,fe=w(_t,ht,E,D,P),ze=w(qt,jt,E,D,P),it=T.prevZ,ct=T.nextZ;it&&it.z>=fe&&ct&&ct.z<=ze;){if(it.x>=_t&&it.x<=qt&&it.y>=ht&&it.y<=jt&&it!==C&&it!==Y&&A(Q,lt,K,ft,J,nt,it.x,it.y)&&O(it.prev,it,it.next)>=0||(it=it.prevZ,ct.x>=_t&&ct.x<=qt&&ct.y>=ht&&ct.y<=jt&&ct!==C&&ct!==Y&&A(Q,lt,K,ft,J,nt,ct.x,ct.y)&&O(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;it&&it.z>=fe;){if(it.x>=_t&&it.x<=qt&&it.y>=ht&&it.y<=jt&&it!==C&&it!==Y&&A(Q,lt,K,ft,J,nt,it.x,it.y)&&O(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ct&&ct.z<=ze;){if(ct.x>=_t&&ct.x<=qt&&ct.y>=ht&&ct.y<=jt&&ct!==C&&ct!==Y&&A(Q,lt,K,ft,J,nt,ct.x,ct.y)&&O(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function u(T,E,D){var P=T;do{var C=P.prev,B=P.next.next;!V(C,B)&&k(C,P,P.next,B)&&F(C,B)&&F(B,C)&&(E.push(C.i/D|0),E.push(P.i/D|0),E.push(B.i/D|0),rt(P),rt(P.next),P=T=B),P=P.next}while(P!==T);return e(P)}function h(T,E,D,P,C,B){var Y=T;do{for(var Q=Y.next.next;Q!==Y.prev;){if(Y.i!==Q.i&&R(Y,Q)){var K=j(Y,Q);Y=e(Y,Y.next),K=e(K,K.next),i(Y,E,D,P,C,B,0),i(K,E,D,P,C,B,0);return}Q=Q.next}Y=Y.next}while(Y!==T)}function d(T,E,D,P){var C=[],B,Y,Q,K,J;for(B=0,Y=E.length;B<Y;B++)Q=E[B]*P,K=B<Y-1?E[B+1]*P:T.length,J=t(T,Q,K,P,!1),J===J.next&&(J.steiner=!0),C.push(S(J));for(C.sort(p),B=0;B<C.length;B++)D=m(C[B],D);return D}function p(T,E){return T.x-E.x}function m(T,E){var D=_(T,E);if(!D)return E;var P=j(D,T);return e(P,P.next),e(D,D.next)}function _(T,E){var D=E,P=T.x,C=T.y,B=-1/0,Y;do{if(C<=D.y&&C>=D.next.y&&D.next.y!==D.y){var Q=D.x+(C-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(Q<=P&&Q>B&&(B=Q,Y=D.x<D.next.x?D:D.next,Q===P))return Y}D=D.next}while(D!==E);if(!Y)return null;var K=Y,J=Y.x,lt=Y.y,ft=1/0,nt;D=Y;do P>=D.x&&D.x>=J&&P!==D.x&&A(C<lt?P:B,C,J,lt,C<lt?B:P,C,D.x,D.y)&&(nt=Math.abs(C-D.y)/(P-D.x),F(D,T)&&(nt<ft||nt===ft&&(D.x>Y.x||D.x===Y.x&&v(Y,D)))&&(Y=D,ft=nt)),D=D.next;while(D!==K);return Y}function v(T,E){return O(T.prev,T,E.prev)<0&&O(E.next,T,T.next)<0}function y(T,E,D,P){var C=T;do C.z===0&&(C.z=w(C.x,C.y,E,D,P)),C.prevZ=C.prev,C.nextZ=C.next,C=C.next;while(C!==T);C.prevZ.nextZ=null,C.prevZ=null,x(C)}function x(T){var E,D,P,C,B,Y,Q,K,J=1;do{for(D=T,T=null,B=null,Y=0;D;){for(Y++,P=D,Q=0,E=0;E<J&&(Q++,P=P.nextZ,!!P);E++);for(K=J;Q>0||K>0&&P;)Q!==0&&(K===0||!P||D.z<=P.z)?(C=D,D=D.nextZ,Q--):(C=P,P=P.nextZ,K--),B?B.nextZ=C:T=C,C.prevZ=B,B=C;D=P}B.nextZ=null,J*=2}while(Y>1);return T}function w(T,E,D,P,C){return T=(T-D)*C|0,E=(E-P)*C|0,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,T|E<<1}function S(T){var E=T,D=T;do(E.x<D.x||E.x===D.x&&E.y<D.y)&&(D=E),E=E.next;while(E!==T);return D}function A(T,E,D,P,C,B,Y,Q){return(C-Y)*(E-Q)>=(T-Y)*(B-Q)&&(T-Y)*(P-Q)>=(D-Y)*(E-Q)&&(D-Y)*(B-Q)>=(C-Y)*(P-Q)}function R(T,E){return T.next.i!==E.i&&T.prev.i!==E.i&&!I(T,E)&&(F(T,E)&&F(E,T)&&L(T,E)&&(O(T.prev,T,E.prev)||O(T,E.prev,E))||V(T,E)&&O(T.prev,T,T.next)>0&&O(E.prev,E,E.next)>0)}function O(T,E,D){return(E.y-T.y)*(D.x-E.x)-(E.x-T.x)*(D.y-E.y)}function V(T,E){return T.x===E.x&&T.y===E.y}function k(T,E,D,P){var C=H(O(T,E,D)),B=H(O(T,E,P)),Y=H(O(D,P,T)),Q=H(O(D,P,E));return!!(C!==B&&Y!==Q||C===0&&N(T,D,E)||B===0&&N(T,P,E)||Y===0&&N(D,T,P)||Q===0&&N(D,E,P))}function N(T,E,D){return E.x<=Math.max(T.x,D.x)&&E.x>=Math.min(T.x,D.x)&&E.y<=Math.max(T.y,D.y)&&E.y>=Math.min(T.y,D.y)}function H(T){return T>0?1:T<0?-1:0}function I(T,E){var D=T;do{if(D.i!==T.i&&D.next.i!==T.i&&D.i!==E.i&&D.next.i!==E.i&&k(D,D.next,T,E))return!0;D=D.next}while(D!==T);return!1}function F(T,E){return O(T.prev,T,T.next)<0?O(T,E,T.next)>=0&&O(T,T.prev,E)>=0:O(T,E,T.prev)<0||O(T,T.next,E)<0}function L(T,E){var D=T,P=!1,C=(T.x+E.x)/2,B=(T.y+E.y)/2;do D.y>B!=D.next.y>B&&D.next.y!==D.y&&C<(D.next.x-D.x)*(B-D.y)/(D.next.y-D.y)+D.x&&(P=!P),D=D.next;while(D!==T);return P}function j(T,E){var D=new ot(T.i,T.x,T.y),P=new ot(E.i,E.x,E.y),C=T.next,B=E.prev;return T.next=E,E.prev=T,D.next=C,C.prev=D,P.next=D,D.prev=P,B.next=P,P.prev=B,P}function $(T,E,D,P){var C=new ot(T,E,D);return P?(C.next=P.next,C.prev=P,P.next.prev=C,P.next=C):(C.prev=C,C.next=C),C}function rt(T){T.next.prev=T.prev,T.prev.next=T.next,T.prevZ&&(T.prevZ.nextZ=T.nextZ),T.nextZ&&(T.nextZ.prevZ=T.prevZ)}function ot(T,E,D){this.i=T,this.x=E,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(T,E,D,P){var C=E&&E.length,B=C?E[0]*D:T.length,Y=Math.abs(ut(T,0,B,D));if(C)for(var Q=0,K=E.length;Q<K;Q++){var J=E[Q]*D,lt=Q<K-1?E[Q+1]*D:T.length;Y-=Math.abs(ut(T,J,lt,D))}var ft=0;for(Q=0;Q<P.length;Q+=3){var nt=P[Q]*D,_t=P[Q+1]*D,ht=P[Q+2]*D;ft+=Math.abs((T[nt]-T[ht])*(T[_t+1]-T[nt+1])-(T[nt]-T[_t])*(T[ht+1]-T[nt+1]))}return Y===0&&ft===0?0:Math.abs((ft-Y)/Y)};function ut(T,E,D,P){for(var C=0,B=E,Y=D-P;B<D;B+=P)C+=(T[Y]-T[B])*(T[B+1]+T[Y+1]),Y=B;return C}return r.flatten=function(T){for(var E=T[0][0].length,D={vertices:[],holes:[],dimensions:E},P=0,C=0;C<T.length;C++){for(var B=0;B<T[C].length;B++)for(var Y=0;Y<E;Y++)D.vertices.push(T[C][B][Y]);C>0&&(P+=T[C-1].length,D.holes.push(P))}return D},xc.exports}var Ew=Mw();const kw=Gf(Ew);var Gv=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(Gv||{});class Rw{constructor(t){this.items=[],this._name=t}emit(t,e,i,a,l,u,h,d){const{name:p,items:m}=this;for(let _=0,v=m.length;_<v;_++)m[_][p](t,e,i,a,l,u,h,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Dw=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Lv=class qv extends _i{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...Dw,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await Cw(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...qv.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof Pt&&(i={container:i},e&&(Yt(ue,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const a=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=a?i.clearColor:Xe.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const a=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==a&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Gv.ALL);const{clear:i,clearColor:a,target:l}=t;Xe.shared.setValue(a??this.background.colorRgba),e.renderTarget.clear(l,i,Xe.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new Rw(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const a in this.runners)this.runners[a].add(i);return this}_addPipes(t,e){const i=e.reduce((a,l)=>(a[l.name]=l.value,a),{});t.forEach(a=>{const l=a.value,u=a.name,h=i[u];this.renderPipes[u]=new l(this,h?new h:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Aw())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Lv.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Fv=Lv,Sc;function Ow(r){return Sc!==void 0||(Sc=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:r??Fv.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Jn.get().getWebGLRenderingContext())return!1;let a=Jn.get().createCanvas().getContext("webgl",t);const l=!!((e=a==null?void 0:a.getContextAttributes())!=null&&e.stencil);if(a){const u=a.getExtension("WEBGL_lose_context");u&&u.loseContext()}return a=null,l}catch{return!1}})()),Sc}let Tc;async function Nw(r={}){return Tc!==void 0||(Tc=await(async()=>{const t=Jn.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),Tc}const s0=["webgl","webgpu","canvas"];async function zw(r){let t=[];r.preference?(t.push(r.preference),s0.forEach(l=>{l!==r.preference&&t.push(l)})):t=s0.slice();let e,i={};for(let l=0;l<t.length;l++){const u=t[l];if(u==="webgpu"&&await Nw()){const{WebGPURenderer:h}=await Hc(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-28YVd3Ch.js");return{WebGPURenderer:d}},__vite__mapDeps([4,2,5,3]));e=h,i={...r,...r.webgpu};break}else if(u==="webgl"&&Ow(r.failIfMajorPerformanceCaveat??Fv.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await Hc(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-BcHe1Smf.js");return{WebGLRenderer:d}},__vite__mapDeps([6,2,5]));e=h,i={...r,...r.webgl};break}else if(u==="canvas")throw i={...r},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const a=new e;return await a.init(i),a}const Yv="8.8.1";class Xv{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,Yv)}static destroy(){}}Xv.extension=It.Application;class Bw{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,Yv)}destroy(){this._renderer=null}}Bw.extension={type:[It.WebGLSystem,It.WebGPUSystem],name:"initHook",priority:-10};const jv=class yf{constructor(...t){this.stage=new Pt,t[0]!==void 0&&Yt(ue,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await zw(t),yf._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Yt(ue,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=yf._plugins.slice(0);i.reverse(),i.forEach(a=>{a.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};jv._plugins=[];let Wv=jv;qn.handleByList(It.Application,Wv._plugins);qn.add(Xv);const r0=[{offset:0,color:"white"},{offset:1,color:"black"}],Zf=class vf{constructor(...t){this.uid=xe("fillGradient"),this.type="linear",this.colorStops=[];let e=Hw(t);e={...e.type==="radial"?vf.defaultRadialOptions:vf.defaultLinearOptions,...sv(e)},this._textureSize=e.textureSize,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Xe.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:r0,e=this._textureSize,{canvas:i,context:a}=o0(e,1),l=a.createLinearGradient(0,0,this._textureSize,0);a0(l,t),a.fillStyle=l,a.fillRect(0,0,e,1),this.texture=new Xt({source:new Pc({resource:i})});const{x:u,y:h}=this.start,{x:d,y:p}=this.end,m=new Nt,_=d-u,v=p-h,y=Math.sqrt(_*_+v*v),x=Math.atan2(v,_);m.scale(y/e,1),m.rotate(x),m.translate(u,h),this.textureSpace==="local"&&m.scale(e,e),this.transform=m}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:r0,e=this._textureSize,{canvas:i,context:a}=o0(e,e),{x:l,y:u}=this.center,{x:h,y:d}=this.outerCenter,p=this.innerRadius,m=this.outerRadius,_=h-m,v=d-m,y=e/(m*2),x=(l-_)*y,w=(u-v)*y,S=a.createRadialGradient(x,w,p*y,(h-_)*y,(d-v)*y,m*y);a0(S,t),a.fillStyle=t[t.length-1].color,a.fillRect(0,0,e,e),a.fillStyle=S,a.translate(x,w),a.rotate(this.rotation),a.scale(1,this.scale),a.translate(-x,-w),a.fillRect(0,0,e,e),this.texture=new Xt({source:new Pc({resource:i,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const A=new Nt;A.scale(1/y,1/y),A.translate(_,v),this.textureSpace==="local"&&A.scale(e,e),this.transform=A}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};Zf.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};Zf.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let cr=Zf;function a0(r,t){for(let e=0;e<t.length;e++){const i=t[e];r.addColorStop(i.offset,i.color)}}function o0(r,t){const e=Jn.get().createCanvas(r,t),i=e.getContext("2d");return{canvas:e,context:i}}function Hw(r){let t=r[0]??{};return(typeof t=="number"||r[1])&&(Yt("8.5.2","use options object instead"),t={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??cr.defaultLinearOptions.textureSize}),t}const l0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Qf{constructor(t,e){this.uid=xe("fillPattern"),this.transform=new Nt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=l0[e].addressModeU,t.source.style.addressModeV=l0[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var Kd,c0;function Pw(){if(c0)return Kd;c0=1,Kd=e;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(l){var u=[];return l.replace(t,function(h,d,p){var m=d.toLowerCase();for(p=a(p),m=="m"&&p.length>2&&(u.push([d].concat(p.splice(0,2))),m="l",d=d=="m"?"l":"L");;){if(p.length==r[m])return p.unshift(d),u.push(p);if(p.length<r[m])throw new Error("malformed path data");u.push([d].concat(p.splice(0,r[m])))}}),u}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(l){var u=l.match(i);return u?u.map(Number):[]}return Kd}var Vw=Pw();const Iw=Gf(Vw);function Uw(r,t){const e=Iw(r),i=[];let a=null,l=0,u=0;for(let h=0;h<e.length;h++){const d=e[h],p=d[0],m=d;switch(p){case"M":l=m[1],u=m[2],t.moveTo(l,u);break;case"m":l+=m[1],u+=m[2],t.moveTo(l,u);break;case"H":l=m[1],t.lineTo(l,u);break;case"h":l+=m[1],t.lineTo(l,u);break;case"V":u=m[1],t.lineTo(l,u);break;case"v":u+=m[1],t.lineTo(l,u);break;case"L":l=m[1],u=m[2],t.lineTo(l,u);break;case"l":l+=m[1],u+=m[2],t.lineTo(l,u);break;case"C":l=m[5],u=m[6],t.bezierCurveTo(m[1],m[2],m[3],m[4],l,u);break;case"c":t.bezierCurveTo(l+m[1],u+m[2],l+m[3],u+m[4],l+m[5],u+m[6]),l+=m[5],u+=m[6];break;case"S":l=m[3],u=m[4],t.bezierCurveToShort(m[1],m[2],l,u);break;case"s":t.bezierCurveToShort(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"Q":l=m[3],u=m[4],t.quadraticCurveTo(m[1],m[2],l,u);break;case"q":t.quadraticCurveTo(l+m[1],u+m[2],l+m[3],u+m[4]),l+=m[3],u+=m[4];break;case"T":l=m[1],u=m[2],t.quadraticCurveToShort(l,u);break;case"t":l+=m[1],u+=m[2],t.quadraticCurveToShort(l,u);break;case"A":l=m[6],u=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"a":l+=m[6],u+=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],l,u);break;case"Z":case"z":t.closePath(),i.length>0&&(a=i.pop(),a?(l=a.startX,u=a.startY):(l=0,u=0)),a=null;break;default:wn(`Unknown SVG path command: ${p}`)}p!=="Z"&&p!=="z"&&a===null&&(a={startX:l,startY:u},i.push(a))}return t}class $f{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new $f(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let a=this.x-t,l=this.y-e;return a*=a,l*=l,a+l<=i}strokeContains(t,e,i,a=.5){if(this.radius===0)return!1;const l=this.x-t,u=this.y-e,h=this.radius,d=(1-a)*i,p=Math.sqrt(l*l+u*u);return p<=h+d&&p>h-(i-d)}getBounds(t){return t||(t=new De),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Kf{constructor(t=0,e=0,i=0,a=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=a}clone(){return new Kf(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,a=(e-this.y)/this.halfHeight;return i*=i,a*=a,i+a<=1}strokeContains(t,e,i,a=.5){const{halfWidth:l,halfHeight:u}=this;if(l<=0||u<=0)return!1;const h=i*(1-a),d=i-h,p=l-d,m=u-d,_=l+h,v=u+h,y=t-this.x,x=e-this.y,w=y*y/(p*p)+x*x/(m*m),S=y*y/(_*_)+x*x/(v*v);return w>1&&S<=1}getBounds(t){return t||(t=new De),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Gw(r,t,e,i,a,l){const u=r-e,h=t-i,d=a-e,p=l-i,m=u*d+h*p,_=d*d+p*p;let v=-1;_!==0&&(v=m/_);let y,x;v<0?(y=e,x=i):v>1?(y=a,x=l):(y=e+v*d,x=i+v*p);const w=r-y,S=t-x;return w*w+S*S}let Lw,qw;class Do{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let a=0,l=e.length;a<l;a++)i.push(e[a].x,e[a].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let a=0;a<i;a+=2){const l=e[a],u=e[a+1],h=e[(a+2)%i],d=e[(a+3)%i];t+=(h-l)*(d+u)}return t<0}containsPolygon(t){const e=this.getBounds(Lw),i=t.getBounds(qw);if(!e.containsRect(i))return!1;const a=t.points;for(let l=0;l<a.length;l+=2){const u=a[l],h=a[l+1];if(!this.contains(u,h))return!1}return!0}clone(){const t=this.points.slice(),e=new Do(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const a=this.points.length/2;for(let l=0,u=a-1;l<a;u=l++){const h=this.points[l*2],d=this.points[l*2+1],p=this.points[u*2],m=this.points[u*2+1];d>e!=m>e&&t<(p-h)*((e-d)/(m-d))+h&&(i=!i)}return i}strokeContains(t,e,i,a=.5){const l=i*i,u=l*(1-a),h=l-u,{points:d}=this,p=d.length-(this.closePath?0:2);for(let m=0;m<p;m+=2){const _=d[m],v=d[m+1],y=d[(m+2)%d.length],x=d[(m+3)%d.length],w=Gw(t,e,_,v,y,x),S=Math.sign((y-_)*(e-v)-(x-v)*(t-_));if(w<=(S<0?h:u))return!0}return!1}getBounds(t){t||(t=new De);const e=this.points;let i=1/0,a=-1/0,l=1/0,u=-1/0;for(let h=0,d=e.length;h<d;h+=2){const p=e[h],m=e[h+1];i=p<i?p:i,a=p>a?p:a,l=m<l?m:l,u=m>u?m:u}return t.x=i,t.width=a-i,t.y=l,t.height=u-l,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const wc=(r,t,e,i,a,l,u)=>{const h=r-e,d=t-i,p=Math.sqrt(h*h+d*d);return p>=a-l&&p<=a+u};class Jf{constructor(t=0,e=0,i=0,a=0,l=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=a,this.radius=l}getBounds(t){return t||(t=new De),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Jf(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let a=t-(this.x+i),l=e-(this.y+i);const u=i*i;if(a*a+l*l<=u||(a=t-(this.x+this.width-i),a*a+l*l<=u)||(l=e-(this.y+this.height-i),a*a+l*l<=u)||(a=t-(this.x+i),a*a+l*l<=u))return!0}return!1}strokeContains(t,e,i,a=.5){const{x:l,y:u,width:h,height:d,radius:p}=this,m=i*(1-a),_=i-m,v=l+p,y=u+p,x=h-p*2,w=d-p*2,S=l+h,A=u+d;return(t>=l-m&&t<=l+_||t>=S-_&&t<=S+m)&&e>=y&&e<=y+w||(e>=u-m&&e<=u+_||e>=A-_&&e<=A+m)&&t>=v&&t<=v+x?!0:t<v&&e<y&&wc(t,e,v,y,p,_,m)||t>S-p&&e<y&&wc(t,e,S-p,y,p,_,m)||t>S-p&&e>A-p&&wc(t,e,S-p,A-p,p,_,m)||t<v&&e>A-p&&wc(t,e,v,A-p,p,_,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Fw=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Yw(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function Xw(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=Fw.replace(/%forloop%/gi,Yw(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}}finally{t.deleteShader(e)}return r}let Kr=null;function Zv(){var t;if(Kr)return Kr;const r=zv();return Kr=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),Kr=Xw(Kr,r),(t=r.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Kr}const Qv={};function jw(r,t){let e=2166136261;for(let i=0;i<t;i++)e^=r[i].uid,e=Math.imul(e,16777619),e>>>=0;return Qv[e]||Ww(r,t,e)}let Jd=0;function Ww(r,t,e){const i={};let a=0;Jd||(Jd=Zv());for(let u=0;u<Jd;u++){const h=u<t?r[u]:Xt.EMPTY.source;i[a++]=h.source,i[a++]=h.style}const l=new Dc(i);return Qv[e]=l,l}class u0{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function h0(r,t){const e=r.byteLength/8|0,i=new Float64Array(r,0,e);new Float64Array(t,0,e).set(i);const l=r.byteLength-e*8;if(l>0){const u=new Uint8Array(r,e*8,l);new Uint8Array(t,e*8,l).set(u)}}const Zw={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Qw=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(Qw||{});function d0(r,t){return t.alphaMode==="no-premultiply-alpha"&&Zw[r]||r}class $w{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class Kw{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new $w,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const $v=[];let bf=0;function f0(){return bf>0?$v[--bf]:new Kw}function p0(r){$v[bf++]=r}let Co=0;const Kv=class Oc{constructor(t={}){this.uid=xe("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],Oc.defaultOptions.maxTextures=Oc.defaultOptions.maxTextures??Zv(),t={...Oc.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:a}=t;this.attributeBuffer=new u0(i*4),this.indexBuffer=new Uint16Array(a),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)p0(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=f0(),a=i.textures;a.clear();const l=e[this.elementStart];let u=d0(l.blendMode,l.texture._source),h=l.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,p=this.attributeBuffer.uint32View,m=this.indexBuffer;let _=this._batchIndexSize,v=this._batchIndexStart,y="startBatch";const x=this.maxTextures;for(let w=this.elementStart;w<this.elementSize;++w){const S=e[w];e[w]=null;const R=S.texture._source,O=d0(S.blendMode,R),V=u!==O||h!==S.topology;if(R._batchTick===Co&&!V){S._textureId=R._textureBindLocation,_+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,d,p,S._attributeStart,S._textureId),this.packQuadIndex(m,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,d,p,S._attributeStart,S._textureId),this.packIndex(S,m,S._indexStart,S._attributeStart/this.vertexSize)),S._batch=i;continue}R._batchTick=Co,(a.count>=x||V)&&(this._finishBatch(i,v,_-v,a,u,h,t,y),y="renderBatch",v=_,u=O,h=S.topology,i=f0(),a=i.textures,a.clear(),++Co),S._textureId=R._textureBindLocation=a.count,a.ids[R.uid]=a.count,a.textures[a.count++]=R,S._batch=i,_+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,d,p,S._attributeStart,S._textureId),this.packQuadIndex(m,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,d,p,S._attributeStart,S._textureId),this.packIndex(S,m,S._indexStart,S._attributeStart/this.vertexSize))}a.count>0&&(this._finishBatch(i,v,_-v,a,u,h,t,y),v=_,++Co),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=_}_finishBatch(t,e,i,a,l,u,h,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=a,t.blendMode=l,t.topology=u,t.start=e,t.size=i,++Co,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new u0(e);h0(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const a=i>65535?new Uint32Array(i):new Uint16Array(i);if(a.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let l=0;l<e.length;l++)a[l]=e[l];else h0(e.buffer,a.buffer);this.indexBuffer=a}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,a){const l=t.indices,u=t.indexSize,h=t.indexOffset,d=t.attributeOffset;for(let p=0;p<u;p++)e[i++]=a+l[p+h]-d}destroy(){for(let t=0;t<this.batches.length;t++)p0(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Kv.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Jw=Kv;var un=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(un||{});class Vo extends _i{constructor(t){let{data:e,size:i}=t;const{usage:a,label:l,shrinkToFit:u}=t;super(),this.uid=xe("buffer"),this._resourceType="buffer",this._resourceId=xe("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);const h=!!e;this.descriptor={size:i,usage:a,mappedAtCreation:h,label:l},this.shrinkToFit=u??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&un.STATIC)}set static(t){t?this.descriptor.usage|=un.STATIC:this.descriptor.usage&=~un.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const a=this._data;if(this._data=t,this._dataInt32=null,!a||a.length!==t.length){!this.shrinkToFit&&a&&t.byteLength<a.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=xe("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Jv(r,t){if(!(r instanceof Vo)){let e=t?un.INDEX:un.VERTEX;r instanceof Array&&(t?(r=new Uint32Array(r),e=un.INDEX|un.COPY_DST):(r=new Float32Array(r),e=un.VERTEX|un.COPY_DST)),r=new Vo({data:r,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return r}function tC(r,t,e){const i=r.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const a=i.buffer.data;let l=1/0,u=1/0,h=-1/0,d=-1/0;const p=a.BYTES_PER_ELEMENT,m=(i.offset||0)/p,_=(i.stride||2*4)/p;for(let v=m;v<a.length;v+=_){const y=a[v],x=a[v+1];y>h&&(h=y),x>d&&(d=x),y<l&&(l=y),x<u&&(u=x)}return e.minX=l,e.minY=u,e.maxX=h,e.maxY=d,e}function eC(r){return(r instanceof Vo||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=Jv(r.buffer,!1),r}class nC extends _i{constructor(t={}){super(),this.uid=xe("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new ti,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:a}=t;if(this.buffers=[],this.attributes={},e)for(const l in e)this.addAttribute(l,e[l]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=a||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=eC(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=Jv(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,tC(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const iC=new Float32Array(1),sC=new Uint32Array(1);class rC extends nC{constructor(){const e=new Vo({data:iC,label:"attribute-batch-buffer",usage:un.VERTEX|un.COPY_DST,shrinkToFit:!1}),i=new Vo({data:sC,label:"index-batch-buffer",usage:un.INDEX|un.COPY_DST,shrinkToFit:!1}),a=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:a,offset:0},aUV:{buffer:e,format:"float32x2",stride:a,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:a,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:a,offset:5*4}},indexBuffer:i})}}function m0(r,t,e){if(r)for(const i in r){const a=i.toLocaleLowerCase(),l=t[a];if(l){let u=r[i];i==="header"&&(u=u.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&l.push(`//----${e}----//`),l.push(u)}else wn(`${i} placement hook does not exist in shader`)}}const aC=/\{\{(.*?)\}\}/g;function g0(r){var i;const t={};return(((i=r.match(aC))==null?void 0:i.map(a=>a.replace(/[{()}]/g,"")))??[]).forEach(a=>{t[a]=[]}),t}function _0(r,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(r))!==null;)t.push(e[1])}function y0(r,t,e=!1){const i=[];_0(t,i),r.forEach(h=>{h.header&&_0(h.header,i)});const a=i;e&&a.sort();const l=a.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let u=t.replace(/@in\s+[^;]+;\s*/g,"");return u=u.replace("{{in}}",`
${l}
`),u}function v0(r,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(r))!==null;)t.push(e[1])}function oC(r){const e=/\b(\w+)\s*:/g.exec(r);return e?e[1]:""}function lC(r){const t=/@.*?\s+/g;return r.replace(t,"")}function cC(r,t){const e=[];v0(t,e),r.forEach(d=>{d.header&&v0(d.header,e)});let i=0;const a=e.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${i++}) ${d}`).join(`,
`),l=e.sort().map(d=>`       var ${lC(d)};`).join(`
`),u=`return VSOutput(
            ${e.sort().map(d=>` ${oC(d)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${a}
`),h=h.replace("{{start}}",`
${l}
`),h=h.replace("{{return}}",`
${u}
`),h}function b0(r,t){let e=r;for(const i in t){const a=t[i];a.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${a.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const vs=Object.create(null),tf=new Map;let uC=0;function hC({template:r,bits:t}){const e=tb(r,t);if(vs[e])return vs[e];const{vertex:i,fragment:a}=fC(r,t);return vs[e]=eb(i,a,t),vs[e]}function dC({template:r,bits:t}){const e=tb(r,t);return vs[e]||(vs[e]=eb(r.vertex,r.fragment,t)),vs[e]}function fC(r,t){const e=t.map(u=>u.vertex).filter(u=>!!u),i=t.map(u=>u.fragment).filter(u=>!!u);let a=y0(e,r.vertex,!0);a=cC(e,a);const l=y0(i,r.fragment,!0);return{vertex:a,fragment:l}}function tb(r,t){return t.map(e=>(tf.has(e)||tf.set(e,uC++),tf.get(e))).sort((e,i)=>e-i).join("-")+r.vertex+r.fragment}function eb(r,t,e){const i=g0(r),a=g0(t);return e.forEach(l=>{m0(l.vertex,i,l.name),m0(l.fragment,a,l.name)}),{vertex:b0(r,i),fragment:b0(t,a)}}const pC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,mC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,gC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,_C=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,yC={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},vC={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function bC({bits:r,name:t}){const e=hC({template:{fragment:mC,vertex:pC},bits:[yC,...r]});return Jc.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function xC({bits:r,name:t}){return new Hv({name:t,...dC({template:{vertex:gC,fragment:_C},bits:[vC,...r]})})}const SC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},TC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},ef={};function wC(r){const t=[];if(r===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<r;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function CC(r){const t=[];if(r===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<r;e++)e===r-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function AC(r){return ef[r]||(ef[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${wC(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${CC(r)}
            `}}),ef[r]}const nf={};function MC(r){const t=[];for(let e=0;e<r;e++)e>0&&t.push("else"),e<r-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function EC(r){return nf[r]||(nf[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${MC(r)}
            `}}),nf[r]}const kC={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},RC={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},x0={};function DC(r){let t=x0[r];if(t)return t;const e=new Int32Array(r);for(let i=0;i<r;i++)e[i]=i;return t=x0[r]=new Uv({uTextures:{value:e,type:"i32",size:r}},{isStatic:!0}),t}class OC extends Wf{constructor(t){const e=xC({name:"batch",bits:[TC,EC(t),RC]}),i=bC({name:"batch",bits:[SC,AC(t),kC]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:DC(t)}})}}let S0=null;const nb=class ib extends Jw{constructor(){super(...arguments),this.geometry=new rC,this.shader=S0||(S0=new OC(this.maxTextures)),this.name=ib.extension.name,this.vertexSize=6}packAttributes(t,e,i,a,l){const u=l<<16|t.roundPixels&65535,h=t.transform,d=h.a,p=h.b,m=h.c,_=h.d,v=h.tx,y=h.ty,{positions:x,uvs:w}=t,S=t.color,A=t.attributeOffset,R=A+t.attributeSize;for(let O=A;O<R;O++){const V=O*2,k=x[V],N=x[V+1];e[a++]=d*k+m*N+v,e[a++]=_*N+p*k+y,e[a++]=w[V],e[a++]=w[V+1],i[a++]=S,i[a++]=u}}packQuadAttributes(t,e,i,a,l){const u=t.texture,h=t.transform,d=h.a,p=h.b,m=h.c,_=h.d,v=h.tx,y=h.ty,x=t.bounds,w=x.maxX,S=x.minX,A=x.maxY,R=x.minY,O=u.uvs,V=t.color,k=l<<16|t.roundPixels&65535;e[a+0]=d*S+m*R+v,e[a+1]=_*R+p*S+y,e[a+2]=O.x0,e[a+3]=O.y0,i[a+4]=V,i[a+5]=k,e[a+6]=d*w+m*R+v,e[a+7]=_*R+p*w+y,e[a+8]=O.x1,e[a+9]=O.y1,i[a+10]=V,i[a+11]=k,e[a+12]=d*w+m*A+v,e[a+13]=_*A+p*w+y,e[a+14]=O.x2,e[a+15]=O.y2,i[a+16]=V,i[a+17]=k,e[a+18]=d*S+m*A+v,e[a+19]=_*A+p*S+y,e[a+20]=O.x3,e[a+21]=O.y3,i[a+22]=V,i[a+23]=k}};nb.extension={type:[It.Batcher],name:"default"};let NC=nb;function zC(r,t,e,i,a,l,u,h=null){let d=0;e*=t,a*=l;const p=h.a,m=h.b,_=h.c,v=h.d,y=h.tx,x=h.ty;for(;d<u;){const w=r[e],S=r[e+1];i[a]=p*w+_*S+y,i[a+1]=m*w+v*S+x,a+=l,e+=t,d++}}function BC(r,t,e,i){let a=0;for(t*=e;a<i;)r[t]=0,r[t+1]=0,t+=e,a++}function sb(r,t,e,i,a){const l=t.a,u=t.b,h=t.c,d=t.d,p=t.tx,m=t.ty;e||(e=0),i||(i=2),a||(a=r.length/i-e);let _=e*i;for(let v=0;v<a;v++){const y=r[_],x=r[_+1];r[_]=l*y+h*x+p,r[_+1]=u*y+d*x+m,_+=i}}const HC=new Nt;class rb{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?pv(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||HC}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Io={extension:{type:It.ShapeBuilder,name:"circle"},build(r,t){let e,i,a,l,u,h;if(r.type==="circle"){const V=r;e=V.x,i=V.y,u=h=V.radius,a=l=0}else if(r.type==="ellipse"){const V=r;e=V.x,i=V.y,u=V.halfWidth,h=V.halfHeight,a=l=0}else{const V=r,k=V.width/2,N=V.height/2;e=V.x+k,i=V.y+N,u=h=Math.max(0,Math.min(V.radius,Math.min(k,N))),a=k-u,l=N-h}if(!(u>=0&&h>=0&&a>=0&&l>=0))return t;const d=Math.ceil(2.3*Math.sqrt(u+h)),p=d*8+(a?4:0)+(l?4:0);if(p===0)return t;if(d===0)return t[0]=t[6]=e+a,t[1]=t[3]=i+l,t[2]=t[4]=e-a,t[5]=t[7]=i-l,t;let m=0,_=d*4+(a?2:0)+2,v=_,y=p,x=a+u,w=l,S=e+x,A=e-x,R=i+w;if(t[m++]=S,t[m++]=R,t[--_]=R,t[--_]=A,l){const V=i-w;t[v++]=A,t[v++]=V,t[--y]=V,t[--y]=S}for(let V=1;V<d;V++){const k=Math.PI/2*(V/d),N=a+Math.cos(k)*u,H=l+Math.sin(k)*h,I=e+N,F=e-N,L=i+H,j=i-H;t[m++]=I,t[m++]=L,t[--_]=L,t[--_]=F,t[v++]=F,t[v++]=j,t[--y]=j,t[--y]=I}x=a,w=l+h,S=e+x,A=e-x,R=i+w;const O=i-w;return t[m++]=S,t[m++]=R,t[--y]=O,t[--y]=S,a&&(t[m++]=A,t[m++]=R,t[--y]=O,t[--y]=A),t},triangulate(r,t,e,i,a,l){if(r.length===0)return;let u=0,h=0;for(let m=0;m<r.length;m+=2)u+=r[m],h+=r[m+1];u/=r.length/2,h/=r.length/2;let d=i;t[d*e]=u,t[d*e+1]=h;const p=d++;for(let m=0;m<r.length;m+=2)t[d*e]=r[m],t[d*e+1]=r[m+1],m>0&&(a[l++]=d,a[l++]=p,a[l++]=d-1),d++;a[l++]=p+1,a[l++]=p,a[l++]=d-1}},PC={...Io,extension:{...Io.extension,name:"ellipse"}},VC={...Io,extension:{...Io.extension,name:"roundedRectangle"}},ab=1e-4,T0=1e-4;function IC(r){const t=r.length;if(t<6)return 1;let e=0;for(let i=0,a=r[t-2],l=r[t-1];i<t;i+=2){const u=r[i],h=r[i+1];e+=(u-a)*(h+l),a=u,l=h}return e<0?-1:1}function w0(r,t,e,i,a,l,u,h){const d=r-e*a,p=t-i*a,m=r+e*l,_=t+i*l;let v,y;u?(v=i,y=-e):(v=-i,y=e);const x=d+v,w=p+y,S=m+v,A=_+y;return h.push(x,w),h.push(S,A),2}function Qs(r,t,e,i,a,l,u,h){const d=e-r,p=i-t;let m=Math.atan2(d,p),_=Math.atan2(a-r,l-t);h&&m<_?m+=Math.PI*2:!h&&m>_&&(_+=Math.PI*2);let v=m;const y=_-m,x=Math.abs(y),w=Math.sqrt(d*d+p*p),S=(15*x*Math.sqrt(w)/Math.PI>>0)+1,A=y/S;if(v+=A,h){u.push(r,t),u.push(e,i);for(let R=1,O=v;R<S;R++,O+=A)u.push(r,t),u.push(r+Math.sin(O)*w,t+Math.cos(O)*w);u.push(r,t),u.push(a,l)}else{u.push(e,i),u.push(r,t);for(let R=1,O=v;R<S;R++,O+=A)u.push(r+Math.sin(O)*w,t+Math.cos(O)*w),u.push(r,t);u.push(a,l),u.push(r,t)}return S*2}function UC(r,t,e,i,a,l){const u=ab;if(r.length===0)return;const h=t;let d=h.alignment;if(t.alignment!==.5){let P=IC(r);d=(d-.5)*P+.5}const p=new Ye(r[0],r[1]),m=new Ye(r[r.length-2],r[r.length-1]),_=i,v=Math.abs(p.x-m.x)<u&&Math.abs(p.y-m.y)<u;if(_){r=r.slice(),v&&(r.pop(),r.pop(),m.set(r[r.length-2],r[r.length-1]));const P=(p.x+m.x)*.5,C=(m.y+p.y)*.5;r.unshift(P,C),r.push(P,C)}const y=a,x=r.length/2;let w=r.length;const S=y.length/2,A=h.width/2,R=A*A,O=h.miterLimit*h.miterLimit;let V=r[0],k=r[1],N=r[2],H=r[3],I=0,F=0,L=-(k-H),j=V-N,$=0,rt=0,ot=Math.sqrt(L*L+j*j);L/=ot,j/=ot,L*=A,j*=A;const ut=d,T=(1-ut)*2,E=ut*2;_||(h.cap==="round"?w+=Qs(V-L*(T-E)*.5,k-j*(T-E)*.5,V-L*T,k-j*T,V+L*E,k+j*E,y,!0)+2:h.cap==="square"&&(w+=w0(V,k,L,j,T,E,!0,y))),y.push(V-L*T,k-j*T),y.push(V+L*E,k+j*E);for(let P=1;P<x-1;++P){V=r[(P-1)*2],k=r[(P-1)*2+1],N=r[P*2],H=r[P*2+1],I=r[(P+1)*2],F=r[(P+1)*2+1],L=-(k-H),j=V-N,ot=Math.sqrt(L*L+j*j),L/=ot,j/=ot,L*=A,j*=A,$=-(H-F),rt=N-I,ot=Math.sqrt($*$+rt*rt),$/=ot,rt/=ot,$*=A,rt*=A;const C=N-V,B=k-H,Y=N-I,Q=F-H,K=C*Y+B*Q,J=B*Y-Q*C,lt=J<0;if(Math.abs(J)<.001*Math.abs(K)){y.push(N-L*T,H-j*T),y.push(N+L*E,H+j*E),K>=0&&(h.join==="round"?w+=Qs(N,H,N-L*T,H-j*T,N-$*T,H-rt*T,y,!1)+4:w+=2,y.push(N-$*E,H-rt*E),y.push(N+$*T,H+rt*T));continue}const ft=(-L+V)*(-j+H)-(-L+N)*(-j+k),nt=(-$+I)*(-rt+H)-(-$+N)*(-rt+F),_t=(C*nt-Y*ft)/J,ht=(Q*ft-B*nt)/J,qt=(_t-N)*(_t-N)+(ht-H)*(ht-H),jt=N+(_t-N)*T,fe=H+(ht-H)*T,ze=N-(_t-N)*E,it=H-(ht-H)*E,ct=Math.min(C*C+B*B,Y*Y+Q*Q),Wt=lt?T:E,Ht=ct+Wt*Wt*R;qt<=Ht?h.join==="bevel"||qt/R>O?(lt?(y.push(jt,fe),y.push(N+L*E,H+j*E),y.push(jt,fe),y.push(N+$*E,H+rt*E)):(y.push(N-L*T,H-j*T),y.push(ze,it),y.push(N-$*T,H-rt*T),y.push(ze,it)),w+=2):h.join==="round"?lt?(y.push(jt,fe),y.push(N+L*E,H+j*E),w+=Qs(N,H,N+L*E,H+j*E,N+$*E,H+rt*E,y,!0)+4,y.push(jt,fe),y.push(N+$*E,H+rt*E)):(y.push(N-L*T,H-j*T),y.push(ze,it),w+=Qs(N,H,N-L*T,H-j*T,N-$*T,H-rt*T,y,!1)+4,y.push(N-$*T,H-rt*T),y.push(ze,it)):(y.push(jt,fe),y.push(ze,it)):(y.push(N-L*T,H-j*T),y.push(N+L*E,H+j*E),h.join==="round"?lt?w+=Qs(N,H,N+L*E,H+j*E,N+$*E,H+rt*E,y,!0)+2:w+=Qs(N,H,N-L*T,H-j*T,N-$*T,H-rt*T,y,!1)+2:h.join==="miter"&&qt/R<=O&&(lt?(y.push(ze,it),y.push(ze,it)):(y.push(jt,fe),y.push(jt,fe)),w+=2),y.push(N-$*T,H-rt*T),y.push(N+$*E,H+rt*E),w+=2)}V=r[(x-2)*2],k=r[(x-2)*2+1],N=r[(x-1)*2],H=r[(x-1)*2+1],L=-(k-H),j=V-N,ot=Math.sqrt(L*L+j*j),L/=ot,j/=ot,L*=A,j*=A,y.push(N-L*T,H-j*T),y.push(N+L*E,H+j*E),_||(h.cap==="round"?w+=Qs(N-L*(T-E)*.5,H-j*(T-E)*.5,N-L*T,H-j*T,N+L*E,H+j*E,y,!1)+2:h.cap==="square"&&(w+=w0(N,H,L,j,T,E,!1,y)));const D=T0*T0;for(let P=S;P<w+S-2;++P)V=y[P*2],k=y[P*2+1],N=y[(P+1)*2],H=y[(P+1)*2+1],I=y[(P+2)*2],F=y[(P+2)*2+1],!(Math.abs(V*(H-F)+N*(F-k)+I*(k-H))<D)&&l.push(P,P+1,P+2)}function GC(r,t,e,i){const a=ab;if(r.length===0)return;const l=r[0],u=r[1],h=r[r.length-2],d=r[r.length-1],p=t||Math.abs(l-h)<a&&Math.abs(u-d)<a,m=e,_=r.length/2,v=m.length/2;for(let y=0;y<_;y++)m.push(r[y*2]),m.push(r[y*2+1]);for(let y=0;y<_-1;y++)i.push(v+y,v+y+1);p&&i.push(v+_-1,v)}function ob(r,t,e,i,a,l,u){const h=kw(r,t,2);if(!h)return;for(let p=0;p<h.length;p+=3)l[u++]=h[p]+a,l[u++]=h[p+1]+a,l[u++]=h[p+2]+a;let d=a*i;for(let p=0;p<r.length;p+=2)e[d]=r[p],e[d+1]=r[p+1],d+=i}const LC=[],qC={extension:{type:It.ShapeBuilder,name:"polygon"},build(r,t){for(let e=0;e<r.points.length;e++)t[e]=r.points[e];return t},triangulate(r,t,e,i,a,l){ob(r,LC,t,e,i,a,l)}},FC={extension:{type:It.ShapeBuilder,name:"rectangle"},build(r,t){const e=r,i=e.x,a=e.y,l=e.width,u=e.height;return l>=0&&u>=0&&(t[0]=i,t[1]=a,t[2]=i+l,t[3]=a,t[4]=i+l,t[5]=a+u,t[6]=i,t[7]=a+u),t},triangulate(r,t,e,i,a,l){let u=0;i*=e,t[i+u]=r[0],t[i+u+1]=r[1],u+=e,t[i+u]=r[2],t[i+u+1]=r[3],u+=e,t[i+u]=r[6],t[i+u+1]=r[7],u+=e,t[i+u]=r[4],t[i+u+1]=r[5],u+=e;const h=i/e;a[l++]=h,a[l++]=h+1,a[l++]=h+2,a[l++]=h+1,a[l++]=h+3,a[l++]=h+2}},YC={extension:{type:It.ShapeBuilder,name:"triangle"},build(r,t){return t[0]=r.x,t[1]=r.y,t[2]=r.x2,t[3]=r.y2,t[4]=r.x3,t[5]=r.y3,t},triangulate(r,t,e,i,a,l){let u=0;i*=e,t[i+u]=r[0],t[i+u+1]=r[1],u+=e,t[i+u]=r[2],t[i+u+1]=r[3],u+=e,t[i+u]=r[4],t[i+u+1]=r[5];const h=i/e;a[l++]=h,a[l++]=h+1,a[l++]=h+2}},XC=new Nt,jC=new De;function WC(r,t,e,i){const a=t.matrix?r.copyFrom(t.matrix).invert():r.identity();if(t.textureSpace==="local"){const l=e.getBounds(jC);a.translate(-l.x,-l.y),a.scale(1/l.width,1/l.height)}else{a.translate(t.texture.frame.x,t.texture.frame.y),a.scale(1/t.texture.source.width,1/t.texture.source.height);const l=t.texture.source.style;l.addressMode==="clamp-to-edge"&&(l.addressMode="repeat",l.update())}return i&&a.append(XC.copyFrom(i).invert()),a}const tu={};qn.handleByMap(It.ShapeBuilder,tu);qn.add(FC,qC,YC,Io,PC,VC);const ZC=new De,QC=new Nt;function $C(r,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let a=0;a<r.instructions.length;a++){const l=r.instructions[a];if(l.action==="texture")KC(l.data,i,e);else if(l.action==="fill"||l.action==="stroke"){const u=l.action==="stroke",h=l.data.path.shapePath,d=l.data.style,p=l.data.hole;u&&p&&C0(p.shapePath,d,!0,i,e),p&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=p.shapePath.shapePrimitives),C0(h,d,u,i,e)}}}function KC(r,t,e){const{vertices:i,uvs:a,indices:l}=e,u=l.length,h=i.length/2,d=[],p=tu.rectangle,m=ZC,_=r.image;m.x=r.dx,m.y=r.dy,m.width=r.dw,m.height=r.dh;const v=r.transform;p.build(m,d),v&&sb(d,v),p.triangulate(d,i,2,h,l,u);const y=_.uvs;a.push(y.x0,y.y0,y.x1,y.y1,y.x3,y.y3,y.x2,y.y2);const x=Gi.get(rb);x.indexOffset=u,x.indexSize=l.length-u,x.attributeOffset=h,x.attributeSize=i.length/2-h,x.baseColor=r.style,x.alpha=r.alpha,x.texture=_,x.geometryData=e,t.push(x)}function C0(r,t,e,i,a){const{vertices:l,uvs:u,indices:h}=a;r.shapePrimitives.forEach(({shape:d,transform:p,holes:m})=>{const _=h.length,v=l.length/2,y=[],x=tu[d.type];let w="triangle-list";if(x.build(d,y),p&&sb(y,p),e){const O=d.closePath??!0,V=t;V.pixelLine?(GC(y,O,l,h),w="line-list"):UC(y,V,!1,O,l,h)}else if(m){const O=[],V=y.slice();JC(m).forEach(N=>{O.push(V.length/2),V.push(...N)}),ob(V,O,l,2,v,h,_)}else x.triangulate(y,l,2,v,h,_);const S=u.length/2,A=t.texture;if(A!==Xt.WHITE){const O=WC(QC,t,d,p);zC(l,2,v,u,S,2,l.length/2-v,O)}else BC(u,S,2,l.length/2-v);const R=Gi.get(rb);R.indexOffset=_,R.indexSize=h.length-_,R.attributeOffset=v,R.attributeSize=l.length/2-v,R.baseColor=t.color,R.alpha=t.alpha,R.texture=A,R.geometryData=a,R.topology=w,i.push(R)})}function JC(r){const t=[];for(let e=0;e<r.length;e++){const i=r[e].shape,a=[];tu[i.type].build(i,a),t.push(a)}return t}class tA{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class eA{constructor(){this.batcher=new NC,this.instructions=new yv}init(){this.instructions.reset()}get geometry(){return Yt(hT,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const tp=class xf{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){xf.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??xf.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),$C(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=Gi.get(eA),{batches:i,geometryData:a}=this._gpuContextHash[t.uid],l=a.vertices.length,u=a.indices.length;for(let m=0;m<i.length;m++)i[m].applyTransform=!1;const h=e.batcher;h.ensureAttributeBuffer(l),h.ensureIndexBuffer(u),h.begin();for(let m=0;m<i.length;m++){const _=i[m];h.add(_)}h.finish(e.instructions);const d=h.geometry;d.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),d.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const p=h.batches;for(let m=0;m<p.length;m++){const _=p[m];_.bindGroup=jw(_.textures.textures,_.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new tA;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Gi.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{Gi.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};tp.extension={type:[It.WebGLSystem,It.WebGPUSystem,It.CanvasSystem],name:"graphicsContext"};tp.defaultOptions={bezierSmoothness:.5};let lb=tp;const nA=8,Cc=11920929e-14,iA=1;function cb(r,t,e,i,a,l,u,h,d,p){const _=Math.min(.99,Math.max(0,p??lb.defaultOptions.bezierSmoothness));let v=(iA-_)/1;return v*=v,sA(t,e,i,a,l,u,h,d,r,v),r}function sA(r,t,e,i,a,l,u,h,d,p){Sf(r,t,e,i,a,l,u,h,d,p,0),d.push(u,h)}function Sf(r,t,e,i,a,l,u,h,d,p,m){if(m>nA)return;const _=(r+e)/2,v=(t+i)/2,y=(e+a)/2,x=(i+l)/2,w=(a+u)/2,S=(l+h)/2,A=(_+y)/2,R=(v+x)/2,O=(y+w)/2,V=(x+S)/2,k=(A+O)/2,N=(R+V)/2;if(m>0){let H=u-r,I=h-t;const F=Math.abs((e-u)*I-(i-h)*H),L=Math.abs((a-u)*I-(l-h)*H);if(F>Cc&&L>Cc){if((F+L)*(F+L)<=p*(H*H+I*I)){d.push(k,N);return}}else if(F>Cc){if(F*F<=p*(H*H+I*I)){d.push(k,N);return}}else if(L>Cc){if(L*L<=p*(H*H+I*I)){d.push(k,N);return}}else if(H=k-(r+u)/2,I=N-(t+h)/2,H*H+I*I<=p){d.push(k,N);return}}Sf(r,t,_,v,A,R,k,N,d,p,m+1),Sf(k,N,O,V,w,S,u,h,d,p,m+1)}const rA=8,aA=11920929e-14,oA=1;function lA(r,t,e,i,a,l,u,h){const p=Math.min(.99,Math.max(0,h??lb.defaultOptions.bezierSmoothness));let m=(oA-p)/1;return m*=m,cA(t,e,i,a,l,u,r,m),r}function cA(r,t,e,i,a,l,u,h){Tf(u,r,t,e,i,a,l,h,0),u.push(a,l)}function Tf(r,t,e,i,a,l,u,h,d){if(d>rA)return;const p=(t+i)/2,m=(e+a)/2,_=(i+l)/2,v=(a+u)/2,y=(p+_)/2,x=(m+v)/2;let w=l-t,S=u-e;const A=Math.abs((i-l)*S-(a-u)*w);if(A>aA){if(A*A<=h*(w*w+S*S)){r.push(y,x);return}}else if(w=y-(t+l)/2,S=x-(e+u)/2,w*w+S*S<=h){r.push(y,x);return}Tf(r,t,e,p,m,y,x,h,d+1),Tf(r,y,x,_,v,l,u,h,d+1)}function ub(r,t,e,i,a,l,u,h){let d=Math.abs(a-l);(!u&&a>l||u&&l>a)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(d/Math.PI)))),h=Math.max(h,3);let p=d/h,m=a;p*=u?-1:1;for(let _=0;_<h+1;_++){const v=Math.cos(m),y=Math.sin(m),x=t+v*i,w=e+y*i;r.push(x,w),m+=p}}function uA(r,t,e,i,a,l){const u=r[r.length-2],d=r[r.length-1]-e,p=u-t,m=a-e,_=i-t,v=Math.abs(d*_-p*m);if(v<1e-8||l===0){(r[r.length-2]!==t||r[r.length-1]!==e)&&r.push(t,e);return}const y=d*d+p*p,x=m*m+_*_,w=d*m+p*_,S=l*Math.sqrt(y)/v,A=l*Math.sqrt(x)/v,R=S*w/y,O=A*w/x,V=S*_+A*p,k=S*m+A*d,N=p*(A+R),H=d*(A+R),I=_*(S+O),F=m*(S+O),L=Math.atan2(H-k,N-V),j=Math.atan2(F-k,I-V);ub(r,V+t,k+e,l,L,j,p*m>_*d)}const Oo=Math.PI*2,sf={centerX:0,centerY:0,ang1:0,ang2:0},rf=({x:r,y:t},e,i,a,l,u,h,d)=>{r*=e,t*=i;const p=a*r-l*t,m=l*r+a*t;return d.x=p+u,d.y=m+h,d};function hA(r,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,a=Math.cos(r),l=Math.sin(r),u=Math.cos(r+t),h=Math.sin(r+t);return[{x:a-l*i,y:l+a*i},{x:u+h*i,y:h-u*i},{x:u,y:h}]}const A0=(r,t,e,i)=>{const a=r*i-t*e<0?-1:1;let l=r*e+t*i;return l>1&&(l=1),l<-1&&(l=-1),a*Math.acos(l)},dA=(r,t,e,i,a,l,u,h,d,p,m,_,v)=>{const y=Math.pow(a,2),x=Math.pow(l,2),w=Math.pow(m,2),S=Math.pow(_,2);let A=y*x-y*S-x*w;A<0&&(A=0),A/=y*S+x*w,A=Math.sqrt(A)*(u===h?-1:1);const R=A*a/l*_,O=A*-l/a*m,V=p*R-d*O+(r+e)/2,k=d*R+p*O+(t+i)/2,N=(m-R)/a,H=(_-O)/l,I=(-m-R)/a,F=(-_-O)/l,L=A0(1,0,N,H);let j=A0(N,H,I,F);h===0&&j>0&&(j-=Oo),h===1&&j<0&&(j+=Oo),v.centerX=V,v.centerY=k,v.ang1=L,v.ang2=j};function fA(r,t,e,i,a,l,u,h=0,d=0,p=0){if(l===0||u===0)return;const m=Math.sin(h*Oo/360),_=Math.cos(h*Oo/360),v=_*(t-i)/2+m*(e-a)/2,y=-m*(t-i)/2+_*(e-a)/2;if(v===0&&y===0)return;l=Math.abs(l),u=Math.abs(u);const x=Math.pow(v,2)/Math.pow(l,2)+Math.pow(y,2)/Math.pow(u,2);x>1&&(l*=Math.sqrt(x),u*=Math.sqrt(x)),dA(t,e,i,a,l,u,d,p,m,_,v,y,sf);let{ang1:w,ang2:S}=sf;const{centerX:A,centerY:R}=sf;let O=Math.abs(S)/(Oo/4);Math.abs(1-O)<1e-7&&(O=1);const V=Math.max(Math.ceil(O),1);S/=V;let k=r[r.length-2],N=r[r.length-1];const H={x:0,y:0};for(let I=0;I<V;I++){const F=hA(w,S),{x:L,y:j}=rf(F[0],l,u,_,m,A,R,H),{x:$,y:rt}=rf(F[1],l,u,_,m,A,R,H),{x:ot,y:ut}=rf(F[2],l,u,_,m,A,R,H);cb(r,k,N,L,j,$,rt,ot,ut),k=ot,N=ut,w+=S}}function pA(r,t,e){const i=(u,h)=>{const d=h.x-u.x,p=h.y-u.y,m=Math.sqrt(d*d+p*p),_=d/m,v=p/m;return{len:m,nx:_,ny:v}},a=(u,h)=>{u===0?r.moveTo(h.x,h.y):r.lineTo(h.x,h.y)};let l=t[t.length-1];for(let u=0;u<t.length;u++){const h=t[u%t.length],d=h.radius??e;if(d<=0){a(u,h),l=h;continue}const p=t[(u+1)%t.length],m=i(h,l),_=i(h,p);if(m.len<1e-4||_.len<1e-4){a(u,h),l=h;continue}let v=Math.asin(m.nx*_.ny-m.ny*_.nx),y=1,x=!1;m.nx*_.nx-m.ny*-_.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,y=-1,x=!0):v>0&&(y=-1,x=!0);const w=v/2;let S,A=Math.abs(Math.cos(w)*d/Math.sin(w));A>Math.min(m.len/2,_.len/2)?(A=Math.min(m.len/2,_.len/2),S=Math.abs(A*Math.sin(w)/Math.cos(w))):S=d;const R=h.x+_.nx*A+-_.ny*S*y,O=h.y+_.ny*A+_.nx*S*y,V=Math.atan2(m.ny,m.nx)+Math.PI/2*y,k=Math.atan2(_.ny,_.nx)-Math.PI/2*y;u===0&&r.moveTo(R+Math.cos(V)*S,O+Math.sin(V)*S),r.arc(R,O,S,V,k,x),l=h}}function mA(r,t,e,i){const a=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),l=(h,d,p)=>({x:h.x+(d.x-h.x)*p,y:h.y+(d.y-h.y)*p}),u=t.length;for(let h=0;h<u;h++){const d=t[(h+1)%u],p=d.radius??e;if(p<=0){h===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y);continue}const m=t[h],_=t[(h+2)%u],v=a(m,d);let y;if(v<1e-4)y=d;else{const S=Math.min(v/2,p);y=l(d,m,S/v)}const x=a(_,d);let w;if(x<1e-4)w=d;else{const S=Math.min(x/2,p);w=l(d,_,S/x)}h===0?r.moveTo(y.x,y.y):r.lineTo(y.x,y.y),r.quadraticCurveTo(d.x,d.y,w.x,w.y,i)}}const gA=new De;class _A{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new ti,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,a=i[i.length-2],l=i[i.length-1];return(a!==t||l!==e)&&i.push(t,e),this}arc(t,e,i,a,l,u){this._ensurePoly(!1);const h=this._currentPoly.points;return ub(h,t,e,i,a,l,u),this}arcTo(t,e,i,a,l){this._ensurePoly();const u=this._currentPoly.points;return uA(u,t,e,i,a,l),this}arcToSvg(t,e,i,a,l,u,h){const d=this._currentPoly.points;return fA(d,this._currentPoly.lastX,this._currentPoly.lastY,u,h,t,e,i,a,l),this}bezierCurveTo(t,e,i,a,l,u,h){this._ensurePoly();const d=this._currentPoly;return cb(this._currentPoly.points,d.lastX,d.lastY,t,e,i,a,l,u,h),this}quadraticCurveTo(t,e,i,a,l){this._ensurePoly();const u=this._currentPoly;return lA(this._currentPoly.points,u.lastX,u.lastY,t,e,i,a,l),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,a=i.length;for(let l=0;l<t.instructions.length;l++){const u=t.instructions[l];this[u.action](...u.data)}if(t.checkForHoles&&i.length-a>1){let l=null;for(let u=a;u<i.length;u++){const h=i[u];if(h.shape.type==="polygon"){const d=h.shape,p=l==null?void 0:l.shape;p&&p.containsPolygon(d)?(l.holes||(l.holes=[]),l.holes.push(h),i.copyWithin(u,u+1),i.length--,u--):l=h}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,a,l){return this.drawShape(new De(t,e,i,a),l),this}circle(t,e,i,a){return this.drawShape(new $f(t,e,i),a),this}poly(t,e,i){const a=new Do(t);return a.closePath=e,this.drawShape(a,i),this}regularPoly(t,e,i,a,l=0,u){a=Math.max(a|0,3);const h=-1*Math.PI/2+l,d=Math.PI*2/a,p=[];for(let m=0;m<a;m++){const _=h-m*d;p.push(t+i*Math.cos(_),e+i*Math.sin(_))}return this.poly(p,!0,u),this}roundPoly(t,e,i,a,l,u=0,h){if(a=Math.max(a|0,3),l<=0)return this.regularPoly(t,e,i,a,u);const d=i*Math.sin(Math.PI/a)-.001;l=Math.min(l,d);const p=-1*Math.PI/2+u,m=Math.PI*2/a,_=(a-2)*Math.PI/a/2;for(let v=0;v<a;v++){const y=v*m+p,x=t+i*Math.cos(y),w=e+i*Math.sin(y),S=y+Math.PI+_,A=y-Math.PI-_,R=x+l*Math.cos(S),O=w+l*Math.sin(S),V=x+l*Math.cos(A),k=w+l*Math.sin(A);v===0?this.moveTo(R,O):this.lineTo(R,O),this.quadraticCurveTo(x,w,V,k,h)}return this.closePath()}roundShape(t,e,i=!1,a){return t.length<3?this:(i?mA(this,t,e,a):pA(this,t,e),this.closePath())}filletRect(t,e,i,a,l){if(l===0)return this.rect(t,e,i,a);const u=Math.min(i,a)/2,h=Math.min(u,Math.max(-u,l)),d=t+i,p=e+a,m=h<0?-h:0,_=Math.abs(h);return this.moveTo(t,e+_).arcTo(t+m,e+m,t+_,e,_).lineTo(d-_,e).arcTo(d-m,e+m,d,e+_,_).lineTo(d,p-_).arcTo(d-m,p-m,t+i-_,p,_).lineTo(t+_,p).arcTo(t+m,p-m,t,p-_,_).closePath()}chamferRect(t,e,i,a,l,u){if(l<=0)return this.rect(t,e,i,a);const h=Math.min(l,Math.min(i,a)/2),d=t+i,p=e+a,m=[t+h,e,d-h,e,d,e+h,d,p-h,d-h,p,t+h,p,t,p-h,t,e+h];for(let _=m.length-1;_>=2;_-=2)m[_]===m[_-2]&&m[_-1]===m[_-3]&&m.splice(_-1,2);return this.poly(m,!0,u)}ellipse(t,e,i,a,l){return this.drawShape(new Kf(t,e,i,a),l),this}roundRect(t,e,i,a,l,u){return this.drawShape(new Jf(t,e,i,a,l),u),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new Do,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Do,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,a=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const l=e.transform,u=i;i=l.a*i+l.c*a+l.tx,a=l.b*u+l.d*a+l.ty}this._currentPoly.points.push(i,a)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const a=e[i],l=a.shape.getBounds(gA);a.transform?t.addRect(l,a.transform):t.addRect(l)}return t}}class ca{constructor(t,e=!1){this.instructions=[],this.uid=xe("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?Uw(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new _A(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,a,l){const u=this.instructions[this.instructions.length-1],h=this.getLastPoint(Ye.shared);let d=0,p=0;if(!u||u.action!=="bezierCurveTo")d=h.x,p=h.y;else{d=u.data[2],p=u.data[3];const m=h.x,_=h.y;d=m+(m-d),p=_+(_-p)}return this.instructions.push({action:"bezierCurveTo",data:[d,p,t,e,i,a,l]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const a=this.instructions[this.instructions.length-1],l=this.getLastPoint(Ye.shared);let u=0,h=0;if(!a||a.action!=="quadraticCurveTo")u=l.x,h=l.y;else{u=a.data[0],h=a.data[1];const d=l.x,p=l.y;u=d+(d-u),h=p+(p-h)}return this.instructions.push({action:"quadraticCurveTo",data:[u,h,t,e,i]}),this._dirty=!0,this}rect(t,e,i,a,l){return this.instructions.push({action:"rect",data:[t,e,i,a,l]}),this._dirty=!0,this}circle(t,e,i,a){return this.instructions.push({action:"circle",data:[t,e,i,a]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,a,l,u,h){l||(l=a/2);const d=-1*Math.PI/2+u,p=i*2,m=Math.PI*2/p,_=[];for(let v=0;v<p;v++){const y=v%2?l:a,x=v*m+d;_.push(t+y*Math.cos(x),e+y*Math.sin(x))}return this.poly(_,!0,h),this}clone(t=!1){const e=new ca;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const a=this.instructions[i];e.instructions.push({action:a.action,data:a.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,a=t.c,l=t.d,u=t.tx,h=t.ty;let d=0,p=0,m=0,_=0,v=0,y=0,x=0,w=0;for(let S=0;S<this.instructions.length;S++){const A=this.instructions[S],R=A.data;switch(A.action){case"moveTo":case"lineTo":d=R[0],p=R[1],R[0]=e*d+a*p+u,R[1]=i*d+l*p+h;break;case"bezierCurveTo":m=R[0],_=R[1],v=R[2],y=R[3],d=R[4],p=R[5],R[0]=e*m+a*_+u,R[1]=i*m+l*_+h,R[2]=e*v+a*y+u,R[3]=i*v+l*y+h,R[4]=e*d+a*p+u,R[5]=i*d+l*p+h;break;case"quadraticCurveTo":m=R[0],_=R[1],d=R[2],p=R[3],R[0]=e*m+a*_+u,R[1]=i*m+l*_+h,R[2]=e*d+a*p+u,R[3]=i*d+l*p+h;break;case"arcToSvg":d=R[5],p=R[6],x=R[0],w=R[1],R[0]=e*x+a*w,R[1]=i*x+l*w,R[5]=e*d+a*p+u,R[6]=i*d+l*p+h;break;case"circle":R[4]=Ao(R[3],t);break;case"rect":R[4]=Ao(R[4],t);break;case"ellipse":R[8]=Ao(R[8],t);break;case"roundRect":R[5]=Ao(R[5],t);break;case"addPath":R[0].transform(t);break;case"poly":R[2]=Ao(R[2],t);break;default:wn("unknown transform action",A.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function Ao(r,t){return r?r.prepend(t):t.clone()}function ce(r,t,e){const i=r.getAttribute(t);return i?Number(i):e}function yA(r,t){const e=r.querySelectorAll("defs");for(let i=0;i<e.length;i++){const a=e[i];for(let l=0;l<a.children.length;l++){const u=a.children[l];switch(u.nodeName.toLowerCase()){case"lineargradient":t.defs[u.id]=vA(u);break;case"radialgradient":t.defs[u.id]=bA();break}}}}function vA(r){const t=ce(r,"x1",0),e=ce(r,"y1",0),i=ce(r,"x2",1),a=ce(r,"y2",0),l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=new cr(t,e,i,a,l==="objectBoundingBox"?"local":"global");for(let h=0;h<r.children.length;h++){const d=r.children[h],p=ce(d,"offset",0),m=Xe.shared.setValue(d.getAttribute("stop-color")).toNumber();u.addColorStop(p,m)}return u}function bA(r){return wn("[SVG Parser] Radial gradients are not yet supported"),new cr(0,0,1,0)}function M0(r){const t=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const E0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function hb(r,t){const e=r.getAttribute("style"),i={},a={},l={strokeStyle:i,fillStyle:a,useFill:!1,useStroke:!1};for(const u in E0){const h=r.getAttribute(u);h&&k0(t,l,u,h.trim())}if(e){const u=e.split(";");for(let h=0;h<u.length;h++){const d=u[h].trim(),[p,m]=d.split(":");E0[p]&&k0(t,l,p,m.trim())}}return{strokeStyle:l.useStroke?i:null,fillStyle:l.useFill?a:null,useFill:l.useFill,useStroke:l.useStroke}}function k0(r,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const a=M0(i);t.strokeStyle.fill=r.defs[a]}else t.strokeStyle.color=Xe.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const a=M0(i);t.fillStyle.fill=r.defs[a]}else t.fillStyle.color=Xe.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function xA(r,t){if(typeof r=="string"){const u=document.createElement("div");u.innerHTML=r.trim(),r=u.querySelector("svg")}const e={context:t,defs:{},path:new ca};yA(r,e);const i=r.children,{fillStyle:a,strokeStyle:l}=hb(r,e);for(let u=0;u<i.length;u++){const h=i[u];h.nodeName.toLowerCase()!=="defs"&&db(h,e,a,l)}return t}function db(r,t,e,i){const a=r.children,{fillStyle:l,strokeStyle:u}=hb(r,t);l&&e?e={...e,...l}:l&&(e=l),u&&i?i={...i,...u}:u&&(i=u);const h=!e&&!i;h&&(e={color:0});let d,p,m,_,v,y,x,w,S,A,R,O,V,k,N,H,I;switch(r.nodeName.toLowerCase()){case"path":k=r.getAttribute("d"),r.getAttribute("fill-rule")==="evenodd"&&wn("SVG Evenodd fill rule not supported, your svg may render incorrectly"),N=new ca(k,!0),t.context.path(N),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"circle":x=ce(r,"cx",0),w=ce(r,"cy",0),S=ce(r,"r",0),t.context.ellipse(x,w,S,S),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":d=ce(r,"x",0),p=ce(r,"y",0),H=ce(r,"width",0),I=ce(r,"height",0),A=ce(r,"rx",0),R=ce(r,"ry",0),A||R?t.context.roundRect(d,p,H,I,A||R):t.context.rect(d,p,H,I),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":x=ce(r,"cx",0),w=ce(r,"cy",0),A=ce(r,"rx",0),R=ce(r,"ry",0),t.context.beginPath(),t.context.ellipse(x,w,A,R),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":m=ce(r,"x1",0),_=ce(r,"y1",0),v=ce(r,"x2",0),y=ce(r,"y2",0),t.context.beginPath(),t.context.moveTo(m,_),t.context.lineTo(v,y),i&&t.context.stroke(i);break;case"polygon":V=r.getAttribute("points"),O=V.match(/\d+/g).map(F=>parseInt(F,10)),t.context.poly(O,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":V=r.getAttribute("points"),O=V.match(/\d+/g).map(F=>parseInt(F,10)),t.context.poly(O,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{wn(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}h&&(e=null);for(let F=0;F<a.length;F++)db(a[F],t,e,i)}function SA(r){return Xe.isColorLike(r)}function R0(r){return r instanceof Qf}function D0(r){return r instanceof cr}function TA(r){return r instanceof Xt}function wA(r,t,e){const i=Xe.shared.setValue(t??0);return r.color=i.toNumber(),r.alpha=i.alpha===1?e.alpha:i.alpha,r.texture=Xt.WHITE,{...e,...r}}function CA(r,t,e){return r.texture=t,{...e,...r}}function O0(r,t,e){return r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,{...e,...r}}function N0(r,t,e){return t.buildGradient(),r.fill=t,r.color=16777215,r.texture=t.texture,r.matrix=t.transform,r.textureSpace=t.textureSpace,{...e,...r}}function AA(r,t){const e={...t,...r},i=Xe.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function ir(r,t){if(r==null)return null;const e={},i=r;return SA(r)?wA(e,r,t):TA(r)?CA(e,r,t):R0(r)?O0(e,r,t):D0(r)?N0(e,r,t):i.fill&&R0(i.fill)?O0(i,i.fill,t):i.fill&&D0(i.fill)?N0(i,i.fill,t):AA(i,t)}function Vc(r,t){const{width:e,alignment:i,miterLimit:a,cap:l,join:u,pixelLine:h,...d}=t,p=ir(r,d);return p?{width:e,alignment:i,miterLimit:a,cap:l,join:u,pixelLine:h,...p}:null}const MA=new Ye,z0=new Nt,ep=class fi extends _i{constructor(){super(...arguments),this.uid=xe("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ca,this._transform=new Nt,this._fillStyle={...fi.defaultFillStyle},this._strokeStyle={...fi.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new ti,this._boundsDirty=!0}clone(){const t=new fi;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=ir(t,fi.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Vc(t,fi.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=ir(t,fi.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=ir(t,fi.defaultStrokeStyle),this}texture(t,e,i,a,l,u){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:a||0,dw:l||t.frame.width,dh:u||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Xe.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ca,this}fill(t,e){let i;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a&&a.action==="stroke"?i=a.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(Yt(ue,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=ir(t,fi.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(Ye.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Vc(t,fi.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,a,l,u){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*e+h.tx,h.b*t+h.d*e+h.ty,i,a,l,u),this}arcTo(t,e,i,a,l){this._tick++;const u=this._transform;return this._activePath.arcTo(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,l),this}arcToSvg(t,e,i,a,l,u,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,e,i,a,l,d.a*u+d.c*h+d.tx,d.b*u+d.d*h+d.ty),this}bezierCurveTo(t,e,i,a,l,u,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*e+d.tx,d.b*t+d.d*e+d.ty,d.a*i+d.c*a+d.tx,d.b*i+d.d*a+d.ty,d.a*l+d.c*u+d.tx,d.b*l+d.d*u+d.ty,h),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,a){return this._tick++,this._activePath.ellipse(t,e,i,a,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,a=this._activePath.instructions,l=i.a*t+i.c*e+i.tx,u=i.b*t+i.d*e+i.ty;return a.length===1&&a[0].action==="moveTo"?(a[0].data[0]=l,a[0].data[1]=u,this):(this._activePath.moveTo(l,u),this)}quadraticCurveTo(t,e,i,a,l){this._tick++;const u=this._transform;return this._activePath.quadraticCurveTo(u.a*t+u.c*e+u.tx,u.b*t+u.d*e+u.ty,u.a*i+u.c*a+u.tx,u.b*i+u.d*a+u.ty,l),this}rect(t,e,i,a){return this._tick++,this._activePath.rect(t,e,i,a,this._transform.clone()),this}roundRect(t,e,i,a,l){return this._tick++,this._activePath.roundRect(t,e,i,a,l,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,a,l=0,u){return this._tick++,this._activePath.regularPoly(t,e,i,a,l,u),this}roundPoly(t,e,i,a,l,u){return this._tick++,this._activePath.roundPoly(t,e,i,a,l,u),this}roundShape(t,e,i,a){return this._tick++,this._activePath.roundShape(t,e,i,a),this}filletRect(t,e,i,a,l){return this._tick++,this._activePath.filletRect(t,e,i,a,l),this}chamferRect(t,e,i,a,l,u){return this._tick++,this._activePath.chamferRect(t,e,i,a,l,u),this}star(t,e,i,a,l=0,u=0){return this._tick++,this._activePath.star(t,e,i,a,l,u,this._transform.clone()),this}svg(t){return this._tick++,xA(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,a,l,u){return t instanceof Nt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,a,l,u),this)}transform(t,e,i,a,l,u){return t instanceof Nt?(this._transform.append(t),this):(z0.set(t,e,i,a,l,u),this._transform.append(z0),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],a=i.action;if(a==="fill"){const l=i.data;t.addBounds(l.path.bounds)}else if(a==="texture"){const l=i.data;t.addFrame(l.dx,l.dy,l.dx+l.dw,l.dy+l.dh,l.transform)}if(a==="stroke"){const l=i.data,u=l.style.alignment,h=l.style.width*(1-u),d=l.path.bounds;t.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return t}containsPoint(t){var a;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let l=0;l<e.length;l++){const u=e[l],h=u.data,d=h.path;if(!u.action||!d)continue;const p=h.style,m=d.shapePath.shapePrimitives;for(let _=0;_<m.length;_++){const v=m[_].shape;if(!p||!v)continue;const y=m[_].transform,x=y?y.applyInverse(t,MA):t;if(u.action==="fill")i=v.contains(x.x,x.y);else{const S=p;i=v.strokeContains(x.x,x.y,S.width,S.alignment)}const w=h.hole;if(w){const S=(a=w.shapePath)==null?void 0:a.shapePrimitives;if(S)for(let A=0;A<S.length;A++)S[A].shape.contains(x.x,x.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};ep.defaultFillStyle={color:16777215,alpha:1,texture:Xt.WHITE,matrix:null,fill:null,textureSpace:"local"};ep.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Xt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Qn=ep;const B0=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function EA(r){const t=[];let e=0;for(let i=0;i<B0.length;i++){const a=`_${B0[i]}`;t[e++]=r[a]}return e=fb(r._fill,t,e),e=kA(r._stroke,t,e),e=RA(r.dropShadow,t,e),t.join("-")}function fb(r,t,e){var i;return r&&(t[e++]=r.color,t[e++]=r.alpha,t[e++]=(i=r.fill)==null?void 0:i.styleKey),e}function kA(r,t,e){return r&&(e=fb(r,t,e),t[e++]=r.width,t[e++]=r.alignment,t[e++]=r.cap,t[e++]=r.join,t[e++]=r.miterLimit),e}function RA(r,t,e){return r&&(t[e++]=r.alpha,t[e++]=r.angle,t[e++]=r.blur,t[e++]=r.distance,t[e++]=Xe.shared.setValue(r.color).toNumber()),e}const np=class ea extends _i{constructor(t={}){super(),DA(t);const e={...ea.defaultTextStyle,...t};for(const i in e){const a=i;this[a]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...ea.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...ea.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Qn.defaultFillStyle,...t},()=>{this._fill=ir({...this._originalFill},Qn.defaultFillStyle)})),this._fill=ir(t===0?"black":t,Qn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Qn.defaultStrokeStyle,...t},()=>{this._stroke=Vc({...this._originalStroke},Qn.defaultStrokeStyle)})),this._stroke=Vc(t,Qn.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=EA(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=ea.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ea({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var i,a,l,u;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const h=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(h),(a=this._originalFill)!=null&&a.texture&&this._originalFill.texture.destroy(h),(l=this._stroke)!=null&&l.texture&&this._stroke.texture.destroy(h),(u=this._originalStroke)!=null&&u.texture&&this._originalStroke.texture.destroy(h)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,a,l)=>(i[a]=l,e==null||e(a,l),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Xe.isColorLike(t)||t instanceof cr||t instanceof Qf)}};np.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};np.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let wf=np;function DA(r){const t=r;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=wf.defaultDropShadow;r.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){Yt(ue,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Xe.isColorLike(e))i.color=e;else if(e instanceof cr||e instanceof Qf)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");r.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){Yt(ue,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;r.fontSize==null?r.fontSize=wf.defaultTextStyle.fontSize:typeof r.fontSize=="string"?e=parseInt(r.fontSize,10):e=r.fontSize;const i=new cr({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),a=t.fillGradientStops.map(l=>Xe.shared.setValue(l).toNumber());a.forEach((l,u)=>{const h=u/(a.length-1);i.addColorStop(h,l)}),r.fill={fill:i}}}const OA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function NA(r){const t=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let e=r.fontFamily;Array.isArray(r.fontFamily)||(e=r.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let a=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(a)&&!OA.includes(a)&&(a=`"${a}"`),e[i]=a}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${t} ${e.join(",")}`}const af={willReadFrequently:!0},ni=class mt{static get experimentalLetterSpacingSupported(){let t=mt._experimentalLetterSpacingSupported;if(t!==void 0){const e=Jn.get().getCanvasRenderingContext2D().prototype;t=mt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,a,l,u,h,d,p){this.text=t,this.style=e,this.width=i,this.height=a,this.lines=l,this.lineWidths=u,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=p}static measureText(t=" ",e,i=mt._canvas,a=e.wordWrap){var R;const l=`${t}:${e.styleKey}`;if(mt._measurementCache[l])return mt._measurementCache[l];const u=NA(e),h=mt.measureFont(u);h.fontSize===0&&(h.fontSize=e.fontSize,h.ascent=e.fontSize);const d=mt.__context;d.font=u;const m=(a?mt._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),_=new Array(m.length);let v=0;for(let O=0;O<m.length;O++){const V=mt._measureText(m[O],e.letterSpacing,d);_[O]=V,v=Math.max(v,V)}const y=((R=e._stroke)==null?void 0:R.width)||0;let x=v+y;e.dropShadow&&(x+=e.dropShadow.distance);const w=e.lineHeight||h.fontSize;let S=Math.max(w,h.fontSize+y)+(m.length-1)*(w+e.leading);return e.dropShadow&&(S+=e.dropShadow.distance),new mt(t,e,x,S,m,_,w+e.leading,v,h)}static _measureText(t,e,i){let a=!1;mt.experimentalLetterSpacingSupported&&(mt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,a=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const l=i.measureText(t);let u=l.width;const h=-l.actualBoundingBoxLeft;let p=l.actualBoundingBoxRight-h;if(u>0)if(a)u-=e,p-=e;else{const m=(mt.graphemeSegmenter(t).length-1)*e;u+=m,p+=m}return Math.max(u,p)}static _wordWrap(t,e,i=mt._canvas){const a=i.getContext("2d",af);let l=0,u="",h="";const d=Object.create(null),{letterSpacing:p,whiteSpace:m}=e,_=mt._collapseSpaces(m),v=mt._collapseNewlines(m);let y=!_;const x=e.wordWrapWidth+p,w=mt._tokenize(t);for(let S=0;S<w.length;S++){let A=w[S];if(mt._isNewline(A)){if(!v){h+=mt._addLine(u),y=!_,u="",l=0;continue}A=" "}if(_){const O=mt.isBreakingSpace(A),V=mt.isBreakingSpace(u[u.length-1]);if(O&&V)continue}const R=mt._getFromCache(A,p,d,a);if(R>x)if(u!==""&&(h+=mt._addLine(u),u="",l=0),mt.canBreakWords(A,e.breakWords)){const O=mt.wordWrapSplit(A);for(let V=0;V<O.length;V++){let k=O[V],N=k,H=1;for(;O[V+H];){const F=O[V+H];if(!mt.canBreakChars(N,F,A,V,e.breakWords))k+=F;else break;N=F,H++}V+=H-1;const I=mt._getFromCache(k,p,d,a);I+l>x&&(h+=mt._addLine(u),y=!1,u="",l=0),u+=k,l+=I}}else{u.length>0&&(h+=mt._addLine(u),u="",l=0);const O=S===w.length-1;h+=mt._addLine(A,!O),y=!1,u="",l=0}else R+l>x&&(y=!1,h+=mt._addLine(u),u="",l=0),(u.length>0||!mt.isBreakingSpace(A)||y)&&(u+=A,l+=R)}return h+=mt._addLine(u,!1),h}static _addLine(t,e=!0){return t=mt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,a){let l=i[t];return typeof l!="number"&&(l=mt._measureText(t,e,a)+e,i[t]=l),l}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!mt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:mt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:mt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let a=0;a<t.length;a++){const l=t[a],u=t[a+1];if(mt.isBreakingSpace(l,u)||mt._isNewline(l)){i!==""&&(e.push(i),i=""),e.push(l);continue}i+=l}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,a,l){return!0}static wordWrapSplit(t){return mt.graphemeSegmenter(t)}static measureFont(t){if(mt._fonts[t])return mt._fonts[t];const e=mt._context;e.font=t;const i=e.measureText(mt.METRICS_STRING+mt.BASELINE_SYMBOL),a={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return mt._fonts[t]=a,a}static clearMetrics(t=""){t?delete mt._fonts[t]:mt._fonts={}}static get _canvas(){if(!mt.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",af);if(i!=null&&i.measureText)return mt.__canvas=e,e;t=Jn.get().createCanvas()}catch{t=Jn.get().createCanvas()}t.width=t.height=10,mt.__canvas=t}return mt.__canvas}static get _context(){return mt.__context||(mt.__context=mt._canvas.getContext("2d",af)),mt.__context}};ni.METRICS_STRING="|ÉqÅ";ni.BASELINE_SYMBOL="M";ni.BASELINE_MULTIPLIER=1.4;ni.HEIGHT_MULTIPLIER=2;ni.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})();ni.experimentalLetterSpacing=!1;ni._fonts={};ni._newlines=[10,13];ni._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];ni._measurementCache={};let zA=ni;class wt extends Xf{constructor(t){t instanceof Qn&&(t={context:t});const{context:e,roundPixels:i,...a}=t||{};super({label:"Graphics",...a}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new Qn,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new wt(this._context.clone()):(this._ownedContext=null,new wt(this._context))}lineStyle(t,e,i){Yt(ue,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const a={};return t&&(a.width=t),e&&(a.color=e),i&&(a.alpha=i),this.context.strokeStyle=a,this}beginFill(t,e){Yt(ue,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){Yt(ue,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Qn.defaultStrokeStyle.width||t.color!==Qn.defaultStrokeStyle.color||t.alpha!==Qn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Yt(ue,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Yt(ue,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Yt(ue,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Yt(ue,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Yt(ue,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Yt(ue,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class BA extends Xf{constructor(t,e){const{text:i,resolution:a,style:l,anchor:u,width:h,height:d,roundPixels:p,...m}=t;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=l,this.resolution=a??null,this.allowChildren=!1,this._anchor=new cn({_onUpdate:()=>{this.onViewUpdate()}}),u&&(this.anchor=u),this.roundPixels=p??!1,h!==void 0&&(this.width=h),d!==void 0&&(this.height=d)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,a=-e*this.anchor.x;let l=0;return t.x>=a&&t.x<=a+e&&(l=-i*this.anchor.y,t.y>=l&&t.y<=l+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function HA(r,t){let e=r[0]??{};return(typeof e=="string"||r[1])&&(Yt(ue,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:r[1]}),e}class Ie extends BA{constructor(...t){const e=HA(t,"Text");super(e,wf),this.renderPipeId="text"}updateBounds(){const t=this._bounds,e=this._anchor,i=zA.measureText(this._text,this._style),{width:a,height:l}=i;t.minX=-e._x*a,t.maxX=t.minX+a,t.minY=-e._y*l,t.maxY=t.minY+l}}qn.add(eT,nT);const er=class er{constructor(){G(this,"events");this.events=new Map}static getInstance(){return er.instance||(er.instance=new er),er.instance}on(t,e){var i;this.events.has(t)||this.events.set(t,new Set),(i=this.events.get(t))==null||i.add(e)}off(t,e){var i;(i=this.events.get(t))==null||i.delete(e)}emit(t,e){var i;(i=this.events.get(t))==null||i.forEach(a=>a(e))}clear(){this.events.clear()}};G(er,"instance");let ua=er;class PA{constructor(t){G(this,"destroyed",!1);G(this,"app",null);G(this,"eventManager");this.container=t,this.eventManager=ua.getInstance()}async init(){if(this.app){console.warn("🚨 PixiManager 已初始化，跳過 init()");return}console.log("🎨 初始化 Pixi.js 應用"),this.app=new Wv,await this.app.init({width:window.innerWidth,height:window.innerHeight,backgroundColor:1710618,resolution:window.devicePixelRatio||1,autoDensity:!0}),this.container.childNodes.length===0&&this.container.appendChild(this.app.canvas),this.eventManager.emit("pixi:initialized",void 0),console.log("✅ Pixi App Initialized")}handleResize(t,e){this.app&&(this.app.renderer.resize(t,e),this.app.canvas.style.width=`${t}px`,this.app.canvas.style.height=`${e}px`,this.eventManager.emit("pixi:resized",{width:t,height:e}))}destroy(){if(!this.app||this.destroyed){console.warn("🚨 PixiManager 已銷毀或未初始化，跳過 destroy()");return}this.destroyed=!0,console.log("🧹 銷毀 Pixi.js 應用"),this.app.destroy(!0),this.app=null,this.eventManager.emit("pixi:destroyed",void 0)}}const At={dimensions:{topBarHeight:40,trackHeight:80,timelineHeight:40,gridSize:50,playheadWidth:2,controlsWidth:200},transport:{defaultBPM:120,beatsPerBar:4,secondsPerMinute:60,gridsPerBeat:1},colors:{background:1710618,grid:2960685,playhead:16724787,trackBackground:2960685,buttonBackground:3815994}};class Ze{constructor(){G(this,"container");G(this,"eventManager");this.container=new Pt,this.eventManager=ua.getInstance()}getContainer(){return this.container}setPosition(t,e){this.container.position.set(t,e)}setZIndex(t){this.container.zIndex=t}}let VA=class extends Ze{constructor(e,i){super();G(this,"background");G(this,"timeMarkers");G(this,"zoom",1);G(this,"scrollX",0);G(this,"scrollY",0);G(this,"isDragging",!1);G(this,"dragStart",{x:0,y:0});this.app=e,this.state=i,this.init()}init(){this.background=new wt,this.background.fill({color:1710618}).rect(0,0,this.app.screen.width,this.app.screen.height),this.container.addChild(this.background),this.timeMarkers=new Pt,this.timeMarkers.position.x=At.dimensions.controlsWidth,this.timeMarkers.visible=!0,this.container.addChild(this.timeMarkers),this.container.sortableChildren=!0,this.timeMarkers.zIndex=1,this.container.zIndex=1,this.container.visible=!0,this.container.alpha=1,this.container.eventMode="static",this.timeMarkers.eventMode="static";const e=new wt().fill({color:16777215}).rect(0,0,this.app.screen.width,At.dimensions.timelineHeight);this.timeMarkers.mask=e,this.timeMarkers.addChild(e),this.drawBackground(),this.drawTimeMarkers(),this.setupEvents()}drawBackground(){const e=At.dimensions.timelineHeight;this.background.clear().fill({color:1710618}).rect(0,0,At.dimensions.controlsWidth,e).fill({color:2763306}).rect(At.dimensions.controlsWidth,0,this.app.screen.width-At.dimensions.controlsWidth,e)}drawTimeMarkers(){this.timeMarkers.removeChildren();const e=Math.max(this.app.screen.width*2,3e3),i=0;for(let a=i;a<=e-At.dimensions.controlsWidth;a+=this.state.gridSize){const l=a/this.state.gridSize,u=Math.floor(l/4)+1;if(l%4===0){const h=new Ie({text:`${u}`,style:{fontSize:12,fill:16777215,fontFamily:"Arial"}});h.position.set(a+5,5),this.timeMarkers.addChild(h)}}}setupEvents(){}update(){this.drawBackground(),this.drawTimeMarkers()}destroy(){this.container.destroy({children:!0})}};class IA extends Ze{constructor(){super();G(this,"timeText");G(this,"background");G(this,"currentBeat",0);this.init()}init(){this.background=new wt,this.container.addChild(this.background),this.timeText=new Ie({text:"1.1.00",style:{fontSize:16,fill:16777215,fontFamily:"Arial",fontWeight:"bold"}}),this.timeText.anchor.set(.5),this.timeText.position.set(50,20),this.drawBackground(),this.container.addChild(this.timeText)}drawBackground(){this.background.clear().fill({color:2960685}).roundRect(0,0,100,40,4)}setBeat(e){this.currentBeat=e;const i=Math.floor(e/4)+1,a=Math.floor(e%4)+1,l=Math.floor(e%1*100);this.timeText.text=`${i}.${a}.${l.toString().padStart(2,"0")}`}getWidth(){return 100}update(){}destroy(){this.container.destroy({children:!0})}}const nr=class nr extends Ze{constructor(e){super();G(this,"background");G(this,"projectNameContainer");G(this,"saveButtonContainer");G(this,"timeDisplay");G(this,"bpmDisplay");G(this,"bpmText");G(this,"currentBPM",60);G(this,"isPlaying",!1);this.width=e,this.init()}init(){this.background=new wt,this.container.addChild(this.background),this.projectNameContainer=new Pt,this.projectNameContainer.position.set(20,0),this.container.addChild(this.projectNameContainer),this.saveButtonContainer=new Pt,this.saveButtonContainer.position.set(this.width-120,0),this.container.addChild(this.saveButtonContainer),this.timeDisplay=new IA,this.container.addChild(this.timeDisplay.getContainer());const e=this.createBPMControl();e.position.set(200,5),this.container.addChild(e),this.drawBackground(),this.createProjectName(),this.createSaveButton(),this.updateComponentsPosition()}createProjectName(){const e=new Ie({text:"My Project",style:{fontSize:16,fill:16777215,fontFamily:"Arial"}});e.position.set(0,(nr.HEIGHT-e.height)/2),this.projectNameContainer.addChild(e)}createSaveButton(){const e=this.createButton("Save 🔽",3815994);e.position.set(0,(nr.HEIGHT-30)/2),this.saveButtonContainer.addChild(e),e.on("pointerdown",()=>{console.log("Save button clicked")})}updateComponentsPosition(){const e=this.width/2;this.timeDisplay.getContainer().position.set(e-this.timeDisplay.getWidth()-5,0),this.bpmDisplay.position.set(e+5,0)}drawBackground(){this.background.clear().fill({color:2763306}).rect(0,0,this.width,nr.HEIGHT).setStrokeStyle({width:1,color:3355443}).stroke().rect(0,nr.HEIGHT-1,this.width,1)}createButton(e,i){const a=new Pt,l=new wt;l.fill({color:i}).roundRect(0,0,80,30,5);const u=new Ie({text:e,style:{fontSize:12,fill:16777215,fontFamily:"Arial"}});return u.position.set((80-u.width)/2,(30-u.height)/2),a.addChild(l,u),a.eventMode="static",a.cursor="pointer",a.on("pointerover",()=>{l.fill({color:4868682})}),a.on("pointerout",()=>{l.fill({color:i})}),a}createBPMControl(){this.bpmDisplay=new Pt;const e=new wt().fill({color:2960685}).roundRect(0,0,100,30,4);return this.bpmText=new Ie({text:`${this.currentBPM} BPM`,style:{fontSize:14,fill:16777215,fontFamily:"Arial"}}),this.bpmText.position.set((100-this.bpmText.width)/2,(30-this.bpmText.height)/2),this.bpmDisplay.addChild(e,this.bpmText),this.bpmDisplay.eventMode="static",this.bpmDisplay.cursor="pointer",this.bpmDisplay.on("click",this.handleBPMClick.bind(this)),this.bpmDisplay.on("wheel",this.handleBPMWheel.bind(this)),this.bpmDisplay}handleBPMClick(){const e=document.createElement("input");e.type="number",e.value=this.currentBPM.toString(),e.min="20",e.max="300",e.style.position="absolute",e.style.width="100px",e.style.height="30px",e.style.fontSize="14px",e.style.textAlign="center",this.bpmDisplay.getBounds();const i=this.bpmDisplay.getGlobalPosition();e.style.left=`${i.x}px`,e.style.top=`${i.y}px`;const a=()=>{const l=Math.min(300,Math.max(20,parseInt(e.value)||60));this.setBPM(l),this.eventManager.emit("daw:bpm:change",{bpm:l}),document.body.removeChild(e)};e.onblur=a,e.onkeydown=l=>{l.key==="Enter"&&a(),l.key==="Escape"&&document.body.removeChild(e)},document.body.appendChild(e),e.focus(),e.select()}handleBPMWheel(e){e.preventDefault();const i=e.deltaY>0?-1:1,a=Math.min(300,Math.max(20,this.currentBPM+i));a!==this.currentBPM&&(this.setBPM(a),this.eventManager.emit("daw:bpm:change",{bpm:a}))}update(e){this.width=e,this.drawBackground(),this.updateComponentsPosition()}setBeat(e){this.timeDisplay.setBeat(e)}setBPM(e){this.currentBPM=e,this.bpmText&&(this.bpmText.text=`${e} BPM`,this.bpmText.position.set((100-this.bpmText.width)/2,(30-this.bpmText.height)/2))}destroy(){this.timeDisplay.destroy(),this.saveButtonContainer.removeAllListeners(),this.container.destroy({children:!0})}};G(nr,"HEIGHT",40);let Ve=nr;const zo=class zo extends Ze{constructor(e){super();G(this,"background");G(this,"buttonContainer");G(this,"timeDisplay");G(this,"isPlaying",!1);G(this,"isRecording",!1);G(this,"currentTime",0);G(this,"bpm",120);G(this,"bpmText");this.width=e,this.init()}init(){this.background=new wt,this.container.addChild(this.background),this.buttonContainer=new Pt,this.buttonContainer.position.set(20,5),this.container.addChild(this.buttonContainer),this.timeDisplay=new Ie({text:"00:00.0",style:{fontSize:14,fill:16777215,fontFamily:"Arial"}}),this.timeDisplay.position.set(this.width/2-50,10),this.container.addChild(this.timeDisplay),this.bpmText=new Ie({text:`${this.bpm} BPM`,style:{fontSize:14,fill:16777215,fontFamily:"Arial"}}),this.bpmText.position.set(this.width-100,10),this.container.addChild(this.bpmText),this.drawBackground(),this.createButtons()}drawBackground(){this.background.clear().fill({color:2763306}).rect(0,0,this.width,zo.HEIGHT).setStrokeStyle({width:1,color:3355443}).stroke().rect(0,zo.HEIGHT-1,this.width,1)}createButtons(){const e=this.createButton("⏺",3815994);e.position.set(0,0),this.buttonContainer.addChild(e);const i=this.createButton("▶",3815994);i.position.set(50,0),this.buttonContainer.addChild(i);const a=this.createButton("■",3815994);a.position.set(100,0),this.buttonContainer.addChild(a),e.on("pointerdown",()=>{this.isRecording=!this.isRecording;const l=e.getChildAt(1);l.text=this.isRecording?"⏹":"⏺",l.style.fill=this.isRecording?16711680:16777215,this.eventManager.emit("daw:transport",{action:this.isRecording?"play":"stop"})}),i.on("pointerdown",()=>{this.isPlaying=!this.isPlaying;const l=i.getChildAt(1);l.text=this.isPlaying?"⏸":"▶",this.eventManager.emit("daw:transport",{action:this.isPlaying?"play":"pause"})}),a.on("pointerdown",()=>{this.isPlaying=!1,this.isRecording=!1;const l=i.getChildAt(1);l.text="▶";const u=e.getChildAt(1);u.text="⏺",u.style.fill=16777215,this.eventManager.emit("daw:transport",{action:"stop"})})}createButton(e,i){const a=new Pt,l=new wt;l.fill({color:i}).roundRect(0,0,40,30,5);const u=new Ie({text:e,style:{fontSize:16,fill:16777215,fontFamily:"Arial"}});u.position.set((40-u.width)/2,(30-u.height)/2),a.addChild(l,u),a.eventMode="static",a.cursor="pointer";const h=i;return a.on("pointerover",()=>{l.clear(),l.fill({color:4868682}).roundRect(0,0,40,30,5)}),a.on("pointerout",()=>{l.clear(),l.fill({color:h}).roundRect(0,0,40,30,5)}),a}setTime(e){this.currentTime=e;const i=Math.floor(e/60),a=Math.floor(e%60),l=Math.floor(e%1*10);this.timeDisplay.text=`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}.${l}`}setBPM(e){this.bpm=e,this.bpmText.text=`${e} BPM`}update(e){this.width=e,this.drawBackground(),this.timeDisplay.position.set(this.width/2-50,10),this.bpmText.position.set(this.width-100,10)}destroy(){this.container.destroy({children:!0})}};G(zo,"HEIGHT",40);let Je=zo;const pi=class pi extends Ze{constructor(e,i=25){super();G(this,"line");G(this,"handle");G(this,"currentPosition",0);G(this,"height");G(this,"gridSize");G(this,"isDragging",!1);G(this,"dragStartX",0);G(this,"handlePointerMove",e=>{if(!this.isDragging)return;const i=e.clientX-this.dragStartX,a=pi.CONTROL_WIDTH,l=Math.max(a,i);this.setTimePosition((l-pi.CONTROL_WIDTH)/this.gridSize),this.eventManager.emit("daw:playhead:move",void 0)});G(this,"handlePointerUp",()=>{this.isDragging&&(this.isDragging=!1,this.handle.alpha=1,window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("pointerup",this.handlePointerUp))});this.height=e,this.gridSize=i,this.init()}init(){this.line=new wt,this.handle=new wt,this.container.addChild(this.line),this.container.addChild(this.handle),this.container.eventMode="static",this.container.cursor="ew-resize",this.handle.eventMode="static",this.handle.cursor="ew-resize",this.setupDragEvents(),this.draw(),this.container.position.x=pi.CONTROL_WIDTH,this.container.position.y=0}setupDragEvents(){this.container.on("pointerdown",e=>{this.isDragging=!0,this.dragStartX=e.globalX-this.container.position.x,this.handle.alpha=.7,window.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("pointerup",this.handlePointerUp)}),this.handle.on("pointerdown",e=>{this.isDragging=!0,this.dragStartX=e.globalX-this.container.position.x,this.handle.alpha=.7,window.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("pointerup",this.handlePointerUp)})}draw(){this.line.clear(),this.handle.clear(),this.line.setStrokeStyle({width:2,color:16711680,alpha:1}).moveTo(0,0).lineTo(0,this.height).stroke(),this.handle.fill({color:16711680}).beginPath().moveTo(-10,0).lineTo(pi.HANDLE_SIZE,0).lineTo(0,pi.HANDLE_SIZE).closePath()}setPosition(e,i){this.container.position.set(e,i)}setTimePosition(e){const i=Math.max(0,e);this.currentPosition=i,this.container.position.x=pi.CONTROL_WIDTH+i*this.gridSize}getPosition(){return this.currentPosition}setHeight(e){this.height=e,this.draw()}update(){this.draw()}destroy(){window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("pointerup",this.handlePointerUp),this.container.destroy({children:!0})}};G(pi,"CONTROL_WIDTH",200),G(pi,"HANDLE_SIZE",10);let Cf=pi;class UA extends Ze{constructor(){super();G(this,"menuItems",[]);G(this,"background");G(this,"itemContainer");this.init()}init(){this.background=new wt,this.itemContainer=new Pt,this.container.addChild(this.background,this.itemContainer),this.container.visible=!1,this.container.eventMode="static",this.container.on("pointerdown",e=>{e.stopPropagation()})}show(e,i,a){this.menuItems=e;const l=150,u=this.menuItems.length*25;i+l>window.innerWidth&&(i=window.innerWidth-l),a+u>window.innerHeight&&(a=window.innerHeight-u),this.container.position.set(i,a),this.container.visible=!0,this.drawMenu(),this.container.parent&&this.container.parent.addChild(this.container)}hide(){this.container.visible=!1}drawMenu(){this.itemContainer.removeChildren(),this.background.clear();const e=150,i=25,a=this.menuItems.length*i;this.background.beginFill(2763306).drawRect(0,0,e,a).endFill(),this.menuItems.forEach((l,u)=>{const h=new Pt;h.y=u*i;const d=new Ie({text:l.label,style:{fontSize:12,fill:16777215}});if(d.position.set(10,(i-d.height)/2),l.shortcut){const p=new Ie({text:l.shortcut,style:{fontSize:12,fill:8421504}});p.position.set(e-p.width-10,(i-p.height)/2),h.addChild(p)}h.addChild(d),h.eventMode="static",h.cursor="pointer",h.on("pointerdown",p=>{p.stopPropagation(),l.action(),this.hide()}),h.on("pointerover",()=>{const p=new wt;p.beginFill(3815994).drawRect(0,0,e,i).endFill(),h.addChildAt(p,0)}),h.on("pointerout",()=>{h.removeChildAt(0)}),this.itemContainer.addChild(h)})}update(){this.drawMenu()}destroy(){this.container.removeAllListeners(),this.container.destroy({children:!0})}}const $c=class $c extends Ze{constructor(e){super();G(this,"background");G(this,"buttonContainer");G(this,"buttons",new Map);G(this,"trackCount",0);this.init(e)}getContainer(){return this.container}init(e){this.background=new wt,this.background.fill({color:2763306}).rect(0,0,e,$c.HEIGHT),this.container.addChild(this.background),this.buttonContainer=new Pt,this.buttonContainer.position.set(10,5),this.container.addChild(this.buttonContainer),this.createButtons(),this.setupEvents()}createButtons(){const h=this.createButton("+ Track",20,-10,100,30,3815994);this.buttons.set("addTrack",h),this.buttonContainer.addChild(h),[{id:"undo",text:"Undo",x:140},{id:"redo",text:"Redo",x:20+120*2},{id:"cut",text:"Cut",x:20+120*3},{id:"copy",text:"Copy",x:20+120*4},{id:"paste",text:"Paste",x:20+120*5}].forEach(p=>{const m=this.createButton(p.text,p.x,-10,100,30,3815994);this.buttons.set(p.id,m),this.buttonContainer.addChild(m)})}createButton(e,i,a,l,u,h){const d=new Pt;d.position.set(i,a);const p=new wt().fill({color:h}).rect(0,0,l,u),m=new Ie({text:e,style:{fontSize:14,fill:16777215,fontFamily:"Arial"}});m.position.set((l-m.width)/2,(u-m.height)/2),d.addChild(p,m),d.eventMode="static",d.cursor="pointer";const _=h,v=5921370,y=6974058;return d.on("pointerover",()=>{p.clear().fill({color:v}).rect(0,0,l,u),m.style.fill=16777215}),d.on("pointerout",()=>{p.clear().fill({color:_}).rect(0,0,l,u),m.style.fill=16777215}),d.on("pointerdown",()=>{p.clear().fill({color:y}).rect(0,0,l,u)}),d.on("pointerup",()=>{p.clear().fill({color:v}).rect(0,0,l,u)}),d.on("pointerupoutside",()=>{p.clear().fill({color:_}).rect(0,0,l,u)}),d}setupEvents(){const e=this.buttons.get("addTrack");e&&e.on("pointerdown",()=>{this.trackCount++;const a={id:`track-${this.trackCount}`,name:`Track ${this.trackCount}`,volume:1,isMuted:!1,isSolo:!1,color:3815994};this.eventManager.emit("daw:track:add",{track:a})}),Object.entries({undo:()=>this.eventManager.emit("daw:tool:changed",{tool:"undo"}),redo:()=>this.eventManager.emit("daw:tool:changed",{tool:"redo"}),cut:()=>this.eventManager.emit("clip:cut",{clipId:""}),copy:()=>this.eventManager.emit("clip:copy",{clipId:""}),paste:()=>this.eventManager.emit("clip:added",{clip:null})}).forEach(([a,l])=>{const u=this.buttons.get(a);u&&u.on("pointerdown",l)})}update(){}destroy(){this.buttons.forEach(e=>{e.destroy({children:!0})}),this.buttons.clear(),this.container.destroy({children:!0})}};G($c,"HEIGHT",40);let oa=$c;const pb="15.0.4",H0=(r,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:r}),P0=(r,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:r}),Af=(r,t)=>({startTime:t,type:"setValue",value:r}),mb=(r,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:r}),gb=(r,t,{startTime:e,target:i,timeConstant:a})=>i+(t-i)*Math.exp((e-r)/a),ia=r=>r.type==="exponentialRampToValue",Ic=r=>r.type==="linearRampToValue",ys=r=>ia(r)||Ic(r),ip=r=>r.type==="setValue",Ui=r=>r.type==="setValueCurve",Uc=(r,t,e,i)=>{const a=r[t];return a===void 0?i:ys(a)||ip(a)?a.value:Ui(a)?a.values[a.values.length-1]:gb(e,Uc(r,t-1,a.startTime,i),a)},V0=(r,t,e,i,a)=>e===void 0?[i.insertTime,a]:ys(e)?[e.endTime,e.value]:ip(e)?[e.startTime,e.value]:Ui(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Uc(r,t-1,e.startTime,a)],Mf=r=>r.type==="cancelAndHold",Ef=r=>r.type==="cancelScheduledValues",_s=r=>Mf(r)||Ef(r)?r.cancelTime:ia(r)||Ic(r)?r.endTime:r.startTime,I0=(r,t,e,{endTime:i,value:a})=>e===a?a:0<e&&0<a||e<0&&a<0?e*(a/e)**((r-t)/(i-t)):0,U0=(r,t,e,{endTime:i,value:a})=>e+(r-t)/(i-t)*(a-e),GA=(r,t)=>{const e=Math.floor(t),i=Math.ceil(t);return e===i?r[e]:(1-(t-e))*r[e]+(1-(i-t))*r[i]},LA=(r,{duration:t,startTime:e,values:i})=>{const a=(r-e)/t*(i.length-1);return GA(i,a)},Ac=r=>r.type==="setTarget";class qA{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=_s(t);if(Mf(t)||Ef(t)){const i=this._automationEvents.findIndex(l=>Ef(t)&&Ui(l)?l.startTime+l.duration>=e:_s(l)>=e),a=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),Mf(t)){const l=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&ys(a)){if(l!==void 0&&Ac(l))throw new Error("The internal list is malformed.");const u=l===void 0?a.insertTime:Ui(l)?l.startTime+l.duration:_s(l),h=l===void 0?this._defaultValue:Ui(l)?l.values[l.values.length-1]:l.value,d=ia(a)?I0(e,u,h,a):U0(e,u,h,a),p=ia(a)?H0(d,e,this._currenTime):P0(d,e,this._currenTime);this._automationEvents.push(p)}if(l!==void 0&&Ac(l)&&this._automationEvents.push(Af(this.getValue(e),e)),l!==void 0&&Ui(l)&&l.startTime+l.duration>e){const u=e-l.startTime,h=(l.values.length-1)/l.duration,d=Math.max(2,1+Math.ceil(u*h)),p=u/(d-1)*h,m=l.values.slice(0,d);if(p<1)for(let _=1;_<d;_+=1){const v=p*_%1;m[_]=l.values[_-1]*(1-v)+l.values[_]*v}this._automationEvents[this._automationEvents.length-1]=mb(m,l.startTime,u)}}}else{const i=this._automationEvents.findIndex(u=>_s(u)>e),a=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(a!==void 0&&Ui(a)&&_s(a)+a.duration>e)return!1;const l=ia(t)?H0(t.value,t.endTime,this._currenTime):Ic(t)?P0(t.value,e,this._currenTime):t;if(i===-1)this._automationEvents.push(l);else{if(Ui(t)&&e+t.duration>_s(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,l)}}return!0}flush(t){const e=this._automationEvents.findIndex(i=>_s(i)>t);if(e>1){const i=this._automationEvents.slice(e-1),a=i[0];Ac(a)&&i.unshift(Af(Uc(this._automationEvents,e-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=i}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(u=>_s(u)>t),i=this._automationEvents[e],a=(e===-1?this._automationEvents.length:e)-1,l=this._automationEvents[a];if(l!==void 0&&Ac(l)&&(i===void 0||!ys(i)||i.insertTime>t))return gb(t,Uc(this._automationEvents,a-1,l.startTime,this._defaultValue),l);if(l!==void 0&&ip(l)&&(i===void 0||!ys(i)))return l.value;if(l!==void 0&&Ui(l)&&(i===void 0||!ys(i)||l.startTime+l.duration>t))return t<l.startTime+l.duration?LA(t,l):l.values[l.values.length-1];if(l!==void 0&&ys(l)&&(i===void 0||!ys(i)))return l.value;if(i!==void 0&&ia(i)){const[u,h]=V0(this._automationEvents,a,l,i,this._defaultValue);return I0(t,u,h,i)}if(i!==void 0&&Ic(i)){const[u,h]=V0(this._automationEvents,a,l,i,this._defaultValue);return U0(t,u,h,i)}return this._defaultValue}}const FA=r=>({cancelTime:r,type:"cancelAndHold"}),YA=r=>({cancelTime:r,type:"cancelScheduledValues"}),XA=(r,t)=>({endTime:t,type:"exponentialRampToValue",value:r}),jA=(r,t)=>({endTime:t,type:"linearRampToValue",value:r}),WA=(r,t,e)=>({startTime:t,target:r,timeConstant:e,type:"setTarget"}),ZA=()=>new DOMException("","AbortError"),QA=r=>(t,e,[i,a,l],u)=>{r(t[a],[e,i,l],h=>h[0]===e&&h[1]===i,u)},$A=r=>(t,e,i)=>{const a=[];for(let l=0;l<i.numberOfInputs;l+=1)a.push(new Set);r.set(t,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},KA=r=>(t,e)=>{r.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},ha=new WeakSet,_b=new WeakMap,sp=new WeakMap,yb=new WeakMap,rp=new WeakMap,eu=new WeakMap,vb=new WeakMap,kf=new WeakMap,Rf=new WeakMap,Df=new WeakMap,bb={construct(){return bb}},JA=r=>{try{const t=new Proxy(r,bb);new t}catch{return!1}return!0},G0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,L0=(r,t)=>{const e=[];let i=r.replace(/^[\s]+/,""),a=i.match(G0);for(;a!==null;){const l=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,t).toString());e.push(u),i=i.slice(a[0].length).replace(/^[\s]+/,""),a=i.match(G0)}return[e.join(";"),i]},q0=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},F0=r=>{if(!JA(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},tM=(r,t,e,i,a,l,u,h,d,p,m,_,v)=>{let y=0;return(x,w,S={credentials:"omit"})=>{const A=m.get(x);if(A!==void 0&&A.has(w))return Promise.resolve();const R=p.get(x);if(R!==void 0){const k=R.get(w);if(k!==void 0)return k}const O=l(x),V=O.audioWorklet===void 0?a(w).then(([k,N])=>{const[H,I]=L0(k,N),F=`${H};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${I}
})})(window,'_AWGS')`;return e(F)}).then(()=>{const k=v._AWGS.pop();if(k===void 0)throw new SyntaxError;i(O.currentTime,O.sampleRate,()=>k(class{},void 0,(N,H)=>{if(N.trim()==="")throw t();const I=Rf.get(O);if(I!==void 0){if(I.has(N))throw t();F0(H),q0(H.parameterDescriptors),I.set(N,H)}else F0(H),q0(H.parameterDescriptors),Rf.set(O,new Map([[N,H]]))},O.sampleRate,void 0,void 0))}):Promise.all([a(w),Promise.resolve(r(_,_))]).then(([[k,N],H])=>{const I=y+1;y=I;const[F,L]=L0(k,N),ot=`${F};((AudioWorkletProcessor,registerProcessor)=>{${L}
})(${H?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${H?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${H?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${I}',class extends AudioWorkletProcessor{process(){return !1}})`,ut=new Blob([ot],{type:"application/javascript; charset=utf-8"}),T=URL.createObjectURL(ut);return O.audioWorklet.addModule(T,S).then(()=>{if(h(O))return O;const E=u(O);return E.audioWorklet.addModule(T,S).then(()=>E)}).then(E=>{if(d===null)throw new SyntaxError;try{new d(E,`__sac${I}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(T))});return R===void 0?p.set(x,new Map([[w,V]])):R.set(w,V),V.then(()=>{const k=m.get(x);k===void 0?m.set(x,new Set([w])):k.add(w)}).finally(()=>{const k=p.get(x);k!==void 0&&k.delete(w)}),V}},ei=(r,t)=>{const e=r.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},nu=(r,t)=>{const e=Array.from(r).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[i]=e;return r.delete(i),i},xb=(r,t,e,i)=>{const a=ei(r,t),l=nu(a,u=>u[0]===e&&u[1]===i);return a.size===0&&r.delete(t),l},Fo=r=>ei(vb,r),da=r=>{if(ha.has(r))throw new Error("The AudioNode is already stored.");ha.add(r),Fo(r).forEach(t=>t(!0))},Sb=r=>"port"in r,Yo=r=>{if(!ha.has(r))throw new Error("The AudioNode is not stored.");ha.delete(r),Fo(r).forEach(t=>t(!1))},Of=(r,t)=>{!Sb(r)&&t.every(e=>e.size===0)&&Yo(r)},eM=(r,t,e,i,a,l,u,h,d,p,m,_,v)=>{const y=new WeakMap;return(x,w,S,A,R)=>{const{activeInputs:O,passiveInputs:V}=l(w),{outputs:k}=l(x),N=h(x),H=I=>{const F=d(w),L=d(x);if(I){const j=xb(V,x,S,A);r(O,x,j,!1),!R&&!_(x)&&e(L,F,S,A),v(w)&&da(w)}else{const j=i(O,x,S,A);t(V,A,j,!1),!R&&!_(x)&&a(L,F,S,A);const $=u(w);if($===0)m(w)&&Of(w,O);else{const rt=y.get(w);rt!==void 0&&clearTimeout(rt),y.set(w,setTimeout(()=>{m(w)&&Of(w,O)},$*1e3))}}};return p(k,[w,S,A],I=>I[0]===w&&I[1]===S&&I[2]===A,!0)?(N.add(H),m(x)?r(O,x,[S,A,H],!0):t(V,A,[x,S,H],!0),!0):!1}},nM=r=>(t,e,[i,a,l],u)=>{const h=t.get(i);h===void 0?t.set(i,new Set([[a,e,l]])):r(h,[a,e,l],d=>d[0]===a&&d[1]===e,u)},iM=r=>(t,e)=>{const i=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(i).connect(t.destination);const a=()=>{e.removeEventListener("ended",a),e.disconnect(i),i.disconnect()};e.addEventListener("ended",a)},sM=r=>(t,e)=>{r(t).add(e)},rM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},aM=(r,t,e,i,a,l)=>class extends r{constructor(h,d){const p=a(h),m={...rM,...d},_=i(p,m),v=l(p)?t():null;super(h,!1,_,v),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(h){this._nativeAnalyserNode.fftSize=h}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(h){const d=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=h,!(h>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=d,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(h){const d=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=h,!(this._nativeAnalyserNode.maxDecibels>h))throw this._nativeAnalyserNode.minDecibels=d,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(h){this._nativeAnalyserNode.smoothingTimeConstant=h}getByteFrequencyData(h){this._nativeAnalyserNode.getByteFrequencyData(h)}getByteTimeDomainData(h){this._nativeAnalyserNode.getByteTimeDomainData(h)}getFloatFrequencyData(h){this._nativeAnalyserNode.getFloatFrequencyData(h)}getFloatTimeDomainData(h){this._nativeAnalyserNode.getFloatTimeDomainData(h)}},Qe=(r,t)=>r.context===t,oM=(r,t,e)=>()=>{const i=new WeakMap,a=async(l,u)=>{let h=t(l);if(!Qe(h,u)){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,fftSize:h.fftSize,maxDecibels:h.maxDecibels,minDecibels:h.minDecibels,smoothingTimeConstant:h.smoothingTimeConstant};h=r(u,p)}return i.set(u,h),await e(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(l,u)}}},Gc=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},vi=()=>new DOMException("","IndexSizeError"),ap=r=>{r.getChannelData=(t=>e=>{try{return t.call(r,e)}catch(i){throw i.code===12?vi():i}})(r.getChannelData)},lM={numberOfChannels:1},cM=(r,t,e,i,a,l,u,h)=>{let d=null;return class Tb{constructor(m){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:v,sampleRate:y}={...lM,...m};d===null&&(d=new a(1,1,44100));const x=i!==null&&t(l,l)?new i({length:_,numberOfChannels:v,sampleRate:y}):d.createBuffer(v,_,y);if(x.numberOfChannels===0)throw e();return typeof x.copyFromChannel!="function"?(u(x),ap(x)):t(Gc,()=>Gc(x))||h(x),r.add(x),x}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===Tb.prototype||r.has(m)}}},bn=-34028234663852886e22,tn=34028234663852886e22,qi=r=>ha.has(r),uM={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},hM=(r,t,e,i,a,l,u,h)=>class extends r{constructor(p,m){const _=l(p),v={...uM,...m},y=a(_,v),x=u(_),w=x?t():null;super(p,!1,y,w),this._audioBufferSourceNodeRenderer=w,this._isBufferNullified=!1,this._isBufferSet=v.buffer!==null,this._nativeAudioBufferSourceNode=y,this._onended=null,this._playbackRate=e(this,x,y.playbackRate,tn,bn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?h(this,p):null;this._nativeAudioBufferSourceNode.onended=m;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===m?p:_}get playbackRate(){return this._playbackRate}start(p=0,m=0,_){if(this._nativeAudioBufferSourceNode.start(p,m,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[p,m]:[p,m,_]),this.context.state!=="closed"){da(this);const v=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",v),qi(this)&&Yo(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",v)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},dM=(r,t,e,i,a)=>()=>{const l=new WeakMap;let u=null,h=null;const d=async(p,m)=>{let _=e(p);const v=Qe(_,m);if(!v){const y={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=t(m,y),u!==null&&_.start(...u),h!==null&&_.stop(h)}return l.set(m,_),v?await r(m,p.playbackRate,_.playbackRate):await i(m,p.playbackRate,_.playbackRate),await a(p,m,_),_};return{set start(p){u=p},set stop(p){h=p},render(p,m){const _=l.get(m);return _!==void 0?Promise.resolve(_):d(p,m)}}},fM=r=>"playbackRate"in r,pM=r=>"frequency"in r&&"gain"in r,mM=r=>"offset"in r,gM=r=>!("frequency"in r)&&"gain"in r,_M=r=>"detune"in r&&"frequency"in r&&!("gain"in r),yM=r=>"pan"in r,nn=r=>ei(_b,r),Xo=r=>ei(yb,r),Nf=(r,t)=>{const{activeInputs:e}=nn(r);e.forEach(a=>a.forEach(([l])=>{t.includes(r)||Nf(l,[...t,r])}));const i=fM(r)?[r.playbackRate]:Sb(r)?Array.from(r.parameters.values()):pM(r)?[r.Q,r.detune,r.frequency,r.gain]:mM(r)?[r.offset]:gM(r)?[r.gain]:_M(r)?[r.detune,r.frequency]:yM(r)?[r.pan]:[];for(const a of i){const l=Xo(a);l!==void 0&&l.activeInputs.forEach(([u])=>Nf(u,t))}qi(r)&&Yo(r)},wb=r=>{Nf(r.destination,[])},vM=r=>r===void 0||typeof r=="number"||typeof r=="string"&&(r==="balanced"||r==="interactive"||r==="playback"),bM=(r,t,e,i,a,l,u,h,d)=>class extends r{constructor(m={}){if(d===null)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new d(m)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?e():x}if(_===null)throw i();if(!vM(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&_.sampleRate!==m.sampleRate)throw e();super(_,2);const{latencyHint:v}=m,{sampleRate:y}=_;if(this._baseLatency=typeof _.baseLatency=="number"?_.baseLatency:v==="balanced"?512/y:v==="interactive"||v===void 0?256/y:v==="playback"?1024/y:Math.max(2,Math.min(128,Math.round(v*y/128)))*128/y,this._nativeAudioContext=_,d.name==="webkitAudioContext"?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,_.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),_.removeEventListener("statechange",x)};_.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),wb(this)}))}createMediaElementSource(m){return new a(this,{mediaElement:m})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new h(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,_)=>{const v=()=>{this._nativeAudioContext.removeEventListener("statechange",v),this._nativeAudioContext.state==="running"?m():this.resume().then(m,_)};this._nativeAudioContext.addEventListener("statechange",v)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?t():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?t():m})}},xM=(r,t,e,i,a,l,u,h)=>class extends r{constructor(p,m){const _=l(p),v=u(_),y=a(_,m,v),x=v?t(h):null;super(p,!1,y,x),this._isNodeOfNativeOfflineAudioContext=v,this._nativeAudioDestinationNode=y}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},SM=r=>{const t=new WeakMap,e=async(i,a)=>{const l=a.destination;return t.set(a,l),await r(i,a,l),l};return{render(i,a){const l=t.get(a);return l!==void 0?Promise.resolve(l):e(i,a)}}},TM=(r,t,e,i,a,l,u,h)=>(d,p)=>{const m=p.listener,_=()=>{const k=new Float32Array(1),N=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),H=u(p);let I=!1,F=[0,0,-1,0,1,0],L=[0,0,0];const j=()=>{if(I)return;I=!0;const ut=i(p,256,9,0);ut.onaudioprocess=({inputBuffer:T})=>{const E=[l(T,k,0),l(T,k,1),l(T,k,2),l(T,k,3),l(T,k,4),l(T,k,5)];E.some((P,C)=>P!==F[C])&&(m.setOrientation(...E),F=E);const D=[l(T,k,6),l(T,k,7),l(T,k,8)];D.some((P,C)=>P!==L[C])&&(m.setPosition(...D),L=D)},N.connect(ut)},$=ut=>T=>{T!==F[ut]&&(F[ut]=T,m.setOrientation(...F))},rt=ut=>T=>{T!==L[ut]&&(L[ut]=T,m.setPosition(...L))},ot=(ut,T,E)=>{const D=e(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:T});D.connect(N,0,ut),D.start(),Object.defineProperty(D.offset,"defaultValue",{get(){return T}});const P=r({context:d},H,D.offset,tn,bn);return h(P,"value",C=>()=>C.call(P),C=>B=>{try{C.call(P,B)}catch(Y){if(Y.code!==9)throw Y}j(),H&&E(B)}),P.cancelAndHoldAtTime=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.cancelAndHoldAtTime),P.cancelScheduledValues=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.cancelScheduledValues),P.exponentialRampToValueAtTime=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.exponentialRampToValueAtTime),P.linearRampToValueAtTime=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.linearRampToValueAtTime),P.setTargetAtTime=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.setTargetAtTime),P.setValueAtTime=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.setValueAtTime),P.setValueCurveAtTime=(C=>H?()=>{throw a()}:(...B)=>{const Y=C.apply(P,B);return j(),Y})(P.setValueCurveAtTime),P};return{forwardX:ot(0,0,$(0)),forwardY:ot(1,0,$(1)),forwardZ:ot(2,-1,$(2)),positionX:ot(6,0,rt(0)),positionY:ot(7,0,rt(1)),positionZ:ot(8,0,rt(2)),upX:ot(3,0,$(3)),upY:ot(4,1,$(4)),upZ:ot(5,0,$(5))}},{forwardX:v,forwardY:y,forwardZ:x,positionX:w,positionY:S,positionZ:A,upX:R,upY:O,upZ:V}=m.forwardX===void 0?_():m;return{get forwardX(){return v},get forwardY(){return y},get forwardZ(){return x},get positionX(){return w},get positionY(){return S},get positionZ(){return A},get upX(){return R},get upY(){return O},get upZ(){return V}}},Lc=r=>"context"in r,jo=r=>Lc(r[0]),fr=(r,t,e,i)=>{for(const a of r)if(e(a)){if(i)return!1;throw Error("The set contains at least one similar element.")}return r.add(t),!0},Y0=(r,t,[e,i],a)=>{fr(r,[t,e,i],l=>l[0]===t&&l[1]===e,a)},X0=(r,[t,e,i],a)=>{const l=r.get(t);l===void 0?r.set(t,new Set([[e,i]])):fr(l,[e,i],u=>u[0]===e,a)},_a=r=>"inputs"in r,qc=(r,t,e,i)=>{if(_a(t)){const a=t.inputs[i];return r.connect(a,e,0),[a,e,0]}return r.connect(t,e,i),[t,e,i]},Cb=(r,t,e)=>{for(const i of r)if(i[0]===t&&i[1]===e)return r.delete(i),i;return null},wM=(r,t,e)=>nu(r,i=>i[0]===t&&i[1]===e),Ab=(r,t)=>{if(!Fo(r).delete(t))throw new Error("Missing the expected event listener.")},Mb=(r,t,e)=>{const i=ei(r,t),a=nu(i,l=>l[0]===e);return i.size===0&&r.delete(t),a},Fc=(r,t,e,i)=>{_a(t)?r.disconnect(t.inputs[i],e,0):r.disconnect(t,e,i)},te=r=>ei(sp,r),Uo=r=>ei(rp,r),ur=r=>kf.has(r),Nc=r=>!ha.has(r),j0=(r,t)=>new Promise(e=>{if(t!==null)e(!0);else{const i=r.createScriptProcessor(256,1,1),a=r.createGain(),l=r.createBuffer(1,2,44100),u=l.getChannelData(0);u[0]=1,u[1]=1;const h=r.createBufferSource();h.buffer=l,h.loop=!0,h.connect(i).connect(r.destination),h.connect(a),h.disconnect(a),i.onaudioprocess=d=>{const p=d.inputBuffer.getChannelData(0);Array.prototype.some.call(p,m=>m===1)?e(!0):e(!1),h.stop(),i.onaudioprocess=null,h.disconnect(i),i.disconnect(r.destination)},h.start()}}),of=(r,t)=>{const e=new Map;for(const i of r)for(const a of i){const l=e.get(a);e.set(a,l===void 0?1:l+1)}e.forEach((i,a)=>t(a,i))},Yc=r=>"context"in r,CM=r=>{const t=new Map;r.connect=(e=>(i,a=0,l=0)=>{const u=Yc(i)?e(i,a,l):e(i,a),h=t.get(i);return h===void 0?t.set(i,[{input:l,output:a}]):h.every(d=>d.input!==l||d.output!==a)&&h.push({input:l,output:a}),u})(r.connect.bind(r)),r.disconnect=(e=>(i,a,l)=>{if(e.apply(r),i===void 0)t.clear();else if(typeof i=="number")for(const[u,h]of t){const d=h.filter(p=>p.output!==i);d.length===0?t.delete(u):t.set(u,d)}else if(t.has(i))if(a===void 0)t.delete(i);else{const u=t.get(i);if(u!==void 0){const h=u.filter(d=>d.output!==a&&(d.input!==l||l===void 0));h.length===0?t.delete(i):t.set(i,h)}}for(const[u,h]of t)h.forEach(d=>{Yc(u)?r.connect(u,d.output,d.input):r.connect(u,d.output)})})(r.disconnect)},AM=(r,t,e,i)=>{const{activeInputs:a,passiveInputs:l}=Xo(t),{outputs:u}=nn(r),h=Fo(r),d=p=>{const m=te(r),_=Uo(t);if(p){const v=Mb(l,r,e);Y0(a,r,v,!1),!i&&!ur(r)&&m.connect(_,e)}else{const v=wM(a,r,e);X0(l,v,!1),!i&&!ur(r)&&m.disconnect(_,e)}};return fr(u,[t,e],p=>p[0]===t&&p[1]===e,!0)?(h.add(d),qi(r)?Y0(a,r,[e,d],!0):X0(l,[r,e,d],!0),!0):!1},MM=(r,t,e,i)=>{const{activeInputs:a,passiveInputs:l}=nn(t),u=Cb(a[i],r,e);return u===null?[xb(l,r,e,i)[2],!1]:[u[2],!0]},EM=(r,t,e)=>{const{activeInputs:i,passiveInputs:a}=Xo(t),l=Cb(i,r,e);return l===null?[Mb(a,r,e)[1],!1]:[l[2],!0]},op=(r,t,e,i,a)=>{const[l,u]=MM(r,e,i,a);if(l!==null&&(Ab(r,l),u&&!t&&!ur(r)&&Fc(te(r),te(e),i,a)),qi(e)){const{activeInputs:h}=nn(e);Of(e,h)}},lp=(r,t,e,i)=>{const[a,l]=EM(r,e,i);a!==null&&(Ab(r,a),l&&!t&&!ur(r)&&te(r).disconnect(Uo(e),i))},kM=(r,t)=>{const e=nn(r),i=[];for(const a of e.outputs)jo(a)?op(r,t,...a):lp(r,t,...a),i.push(a[0]);return e.outputs.clear(),i},RM=(r,t,e)=>{const i=nn(r),a=[];for(const l of i.outputs)l[1]===e&&(jo(l)?op(r,t,...l):lp(r,t,...l),a.push(l[0]),i.outputs.delete(l));return a},DM=(r,t,e,i,a)=>{const l=nn(r);return Array.from(l.outputs).filter(u=>u[0]===e&&(i===void 0||u[1]===i)&&(a===void 0||u[2]===a)).map(u=>(jo(u)?op(r,t,...u):lp(r,t,...u),l.outputs.delete(u),u[0]))},OM=(r,t,e,i,a,l,u,h,d,p,m,_,v,y,x,w)=>class extends p{constructor(A,R,O,V){super(O),this._context=A,this._nativeAudioNode=O;const k=m(A);_(k)&&e(j0,()=>j0(k,w))!==!0&&CM(O),sp.set(this,O),vb.set(this,new Set),A.state!=="closed"&&R&&da(this),r(this,V,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(A){this._nativeAudioNode.channelCount=A}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(A){this._nativeAudioNode.channelCountMode=A}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(A){this._nativeAudioNode.channelInterpretation=A}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(A,R=0,O=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw a();const V=m(this._context),k=x(V);if(v(A)||y(A))throw l();if(Lc(A)){const I=te(A);try{const L=qc(this._nativeAudioNode,I,R,O),j=Nc(this);(k||j)&&this._nativeAudioNode.disconnect(...L),this.context.state!=="closed"&&!j&&Nc(A)&&da(A)}catch(L){throw L.code===12?l():L}if(t(this,A,R,O,k)){const L=d([this],A);of(L,i(k))}return A}const N=Uo(A);if(N.name==="playbackRate"&&N.maxValue===1024)throw u();try{this._nativeAudioNode.connect(N,R),(k||Nc(this))&&this._nativeAudioNode.disconnect(N,R)}catch(I){throw I.code===12?l():I}if(AM(this,A,R,k)){const I=d([this],A);of(I,i(k))}}disconnect(A,R,O){let V;const k=m(this._context),N=x(k);if(A===void 0)V=kM(this,N);else if(typeof A=="number"){if(A<0||A>=this.numberOfOutputs)throw a();V=RM(this,N,A)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||Lc(A)&&O!==void 0&&(O<0||O>=A.numberOfInputs))throw a();if(V=DM(this,N,A,R,O),V.length===0)throw l()}for(const H of V){const I=d([this],H);of(I,h)}}},NM=(r,t,e,i,a,l,u,h,d,p,m,_,v)=>(y,x,w,S=null,A=null)=>{const R=w.value,O=new qA(R),V=x?i(O):null,k={get defaultValue(){return R},get maxValue(){return S===null?w.maxValue:S},get minValue(){return A===null?w.minValue:A},get value(){return w.value},set value(N){w.value=N,k.setValueAtTime(N,y.context.currentTime)},cancelAndHoldAtTime(N){if(typeof w.cancelAndHoldAtTime=="function")V===null&&O.flush(y.context.currentTime),O.add(a(N)),w.cancelAndHoldAtTime(N);else{const H=Array.from(O).pop();V===null&&O.flush(y.context.currentTime),O.add(a(N));const I=Array.from(O).pop();w.cancelScheduledValues(N),H!==I&&I!==void 0&&(I.type==="exponentialRampToValue"?w.exponentialRampToValueAtTime(I.value,I.endTime):I.type==="linearRampToValue"?w.linearRampToValueAtTime(I.value,I.endTime):I.type==="setValue"?w.setValueAtTime(I.value,I.startTime):I.type==="setValueCurve"&&w.setValueCurveAtTime(I.values,I.startTime,I.duration))}return k},cancelScheduledValues(N){return V===null&&O.flush(y.context.currentTime),O.add(l(N)),w.cancelScheduledValues(N),k},exponentialRampToValueAtTime(N,H){if(N===0)throw new RangeError;if(!Number.isFinite(H)||H<0)throw new RangeError;const I=y.context.currentTime;return V===null&&O.flush(I),Array.from(O).length===0&&(O.add(p(R,I)),w.setValueAtTime(R,I)),O.add(u(N,H)),w.exponentialRampToValueAtTime(N,H),k},linearRampToValueAtTime(N,H){const I=y.context.currentTime;return V===null&&O.flush(I),Array.from(O).length===0&&(O.add(p(R,I)),w.setValueAtTime(R,I)),O.add(h(N,H)),w.linearRampToValueAtTime(N,H),k},setTargetAtTime(N,H,I){return V===null&&O.flush(y.context.currentTime),O.add(d(N,H,I)),w.setTargetAtTime(N,H,I),k},setValueAtTime(N,H){return V===null&&O.flush(y.context.currentTime),O.add(p(N,H)),w.setValueAtTime(N,H),k},setValueCurveAtTime(N,H,I){const F=N instanceof Float32Array?N:new Float32Array(N);if(_!==null&&_.name==="webkitAudioContext"){const L=H+I,j=y.context.sampleRate,$=Math.ceil(H*j),rt=Math.floor(L*j),ot=rt-$,ut=new Float32Array(ot);for(let E=0;E<ot;E+=1){const D=(F.length-1)/I*(($+E)/j-H),P=Math.floor(D),C=Math.ceil(D);ut[E]=P===C?F[P]:(1-(D-P))*F[P]+(1-(C-D))*F[C]}V===null&&O.flush(y.context.currentTime),O.add(m(ut,H,I)),w.setValueCurveAtTime(ut,H,I);const T=rt/j;T<L&&v(k,ut[ut.length-1],T),v(k,F[F.length-1],L)}else V===null&&O.flush(y.context.currentTime),O.add(m(F,H,I)),w.setValueCurveAtTime(F,H,I);return k}};return e.set(k,w),t.set(k,y),r(k,V),k},zM=r=>({replay(t){for(const e of r)if(e.type==="exponentialRampToValue"){const{endTime:i,value:a}=e;t.exponentialRampToValueAtTime(a,i)}else if(e.type==="linearRampToValue"){const{endTime:i,value:a}=e;t.linearRampToValueAtTime(a,i)}else if(e.type==="setTarget"){const{startTime:i,target:a,timeConstant:l}=e;t.setTargetAtTime(a,i,l)}else if(e.type==="setValue"){const{startTime:i,value:a}=e;t.setValueAtTime(a,i)}else if(e.type==="setValueCurve"){const{duration:i,startTime:a,values:l}=e;t.setValueCurveAtTime(l,a,i)}else throw new Error("Can't apply an unknown automation.")}});class Eb{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((i,a)=>t.call(e,i,a,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const BM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},HM=(r,t,e,i,a,l,u,h,d,p,m,_,v,y)=>class extends t{constructor(w,S,A){var R;const O=h(w),V=d(O),k=m({...BM,...A});v(k);const N=Rf.get(O),H=N==null?void 0:N.get(S),I=V||O.state!=="closed"?O:(R=u(O))!==null&&R!==void 0?R:O,F=a(I,V?null:w.baseLatency,p,S,H,k),L=V?i(S,k,H):null;super(w,!0,F,L);const j=[];F.parameters.forEach((rt,ot)=>{const ut=e(this,V,rt);j.push([ot,ut])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new Eb(j),V&&r(O,this);const{activeInputs:$}=l(this);_(F,$)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(w){const S=typeof w=="function"?y(this,w):null;this._nativeAudioWorkletNode.onprocessorerror=S;const A=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=A!==null&&A===S?w:A}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Xc(r,t,e,i,a){if(typeof r.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),r.copyFromChannel(t[e],i,a);else{const l=r.getChannelData(i);if(t[e].byteLength===0)t[e]=l.slice(a,a+128);else{const u=new Float32Array(l.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const kb=(r,t,e,i,a)=>{typeof r.copyToChannel=="function"?t[e].byteLength!==0&&r.copyToChannel(t[e],i,a):t[e].byteLength!==0&&r.getChannelData(i).set(t[e],a)},jc=(r,t)=>{const e=[];for(let i=0;i<r;i+=1){const a=[],l=typeof t=="number"?t:t[i];for(let u=0;u<l;u+=1)a.push(new Float32Array(128));e.push(a)}return e},PM=(r,t)=>{const e=ei(Df,r),i=te(t);return ei(e,i)},VM=async(r,t,e,i,a,l,u)=>{const h=t===null?Math.ceil(r.context.length/128)*128:t.length,d=i.channelCount*i.numberOfInputs,p=a.reduce((S,A)=>S+A,0),m=p===0?null:e.createBuffer(p,h,e.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const _=nn(r),v=await PM(e,r),y=jc(i.numberOfInputs,i.channelCount),x=jc(i.numberOfOutputs,a),w=Array.from(r.parameters.keys()).reduce((S,A)=>({...S,[A]:new Float32Array(128)}),{});for(let S=0;S<h;S+=128){if(i.numberOfInputs>0&&t!==null)for(let A=0;A<i.numberOfInputs;A+=1)for(let R=0;R<i.channelCount;R+=1)Xc(t,y[A],R,R,S);l.parameterDescriptors!==void 0&&t!==null&&l.parameterDescriptors.forEach(({name:A},R)=>{Xc(t,w,A,d+R,S)});for(let A=0;A<i.numberOfInputs;A+=1)for(let R=0;R<a[A];R+=1)x[A][R].byteLength===0&&(x[A][R]=new Float32Array(128));try{const A=y.map((O,V)=>_.activeInputs[V].size===0?[]:O),R=u(S/e.sampleRate,e.sampleRate,()=>v.process(A,x,w));if(m!==null)for(let O=0,V=0;O<i.numberOfOutputs;O+=1){for(let k=0;k<a[O];k+=1)kb(m,x[O],k,V+k,S);V+=a[O]}if(!R)break}catch(A){r.dispatchEvent(new ErrorEvent("processorerror",{colno:A.colno,filename:A.filename,lineno:A.lineno,message:A.message}));break}}return m},IM=(r,t,e,i,a,l,u,h,d,p,m,_,v,y,x,w)=>(S,A,R)=>{const O=new WeakMap;let V=null;const k=async(N,H)=>{let I=m(N),F=null;const L=Qe(I,H),j=Array.isArray(A.outputChannelCount)?A.outputChannelCount:Array.from(A.outputChannelCount);if(_===null){const $=j.reduce((T,E)=>T+E,0),rt=a(H,{channelCount:Math.max(1,$),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,$)}),ot=[];for(let T=0;T<N.numberOfOutputs;T+=1)ot.push(i(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:j[T]}));const ut=u(H,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,gain:1});ut.connect=t.bind(null,ot),ut.disconnect=d.bind(null,ot),F=[rt,ot,ut]}else L||(I=new _(H,S));if(O.set(H,F===null?I:F[2]),F!==null){if(V===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(v===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=N.channelCount*N.numberOfInputs,D=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,P=E+D;V=VM(N,P===0?null:await(async()=>{const B=new v(P,Math.ceil(N.context.length/128)*128,H.sampleRate),Y=[],Q=[];for(let lt=0;lt<A.numberOfInputs;lt+=1)Y.push(u(B,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,gain:1})),Q.push(a(B,{channelCount:A.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:A.channelCount}));const K=await Promise.all(Array.from(N.parameters.values()).map(async lt=>{const ft=l(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:lt.value});return await y(B,lt,ft.offset),ft})),J=i(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,E+D)});for(let lt=0;lt<A.numberOfInputs;lt+=1){Y[lt].connect(Q[lt]);for(let ft=0;ft<A.channelCount;ft+=1)Q[lt].connect(J,ft,lt*A.channelCount+ft)}for(const[lt,ft]of K.entries())ft.connect(J,0,E+lt),ft.start(0);return J.connect(B.destination),await Promise.all(Y.map(lt=>x(N,B,lt))),w(B)})(),H,A,j,R,p)}const $=await V,rt=e(H,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ot,ut,T]=F;$!==null&&(rt.buffer=$,rt.start(0)),rt.connect(ot);for(let E=0,D=0;E<N.numberOfOutputs;E+=1){const P=ut[E];for(let C=0;C<j[E];C+=1)ot.connect(P,D+C,C);D+=j[E]}return T}if(L)for(const[$,rt]of N.parameters.entries())await r(H,rt,I.parameters.get($));else for(const[$,rt]of N.parameters.entries())await y(H,rt,I.parameters.get($));return await x(N,H,I),I};return{render(N,H){h(H,N);const I=O.get(H);return I!==void 0?Promise.resolve(I):k(N,H)}}},UM=(r,t,e,i,a,l,u,h,d,p,m,_,v,y,x,w,S,A,R,O)=>class extends x{constructor(k,N){super(k,N),this._nativeContext=k,this._audioWorklet=r===void 0?void 0:{addModule:(H,I)=>r(this,H,I)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(k,N,H){return new e({length:N,numberOfChannels:k,sampleRate:H})}createBufferSource(){return new i(this)}createChannelMerger(k=6){return new l(this,{numberOfInputs:k})}createChannelSplitter(k=6){return new u(this,{numberOfOutputs:k})}createConstantSource(){return new h(this)}createConvolver(){return new d(this)}createDelay(k=1){return new m(this,{maxDelayTime:k})}createDynamicsCompressor(){return new _(this)}createGain(){return new v(this)}createIIRFilter(k,N){return new y(this,{feedback:N,feedforward:k})}createOscillator(){return new w(this)}createPanner(){return new S(this)}createPeriodicWave(k,N,H={disableNormalization:!1}){return new A(this,{...H,imag:N,real:k})}createStereoPanner(){return new R(this)}createWaveShaper(){return new O(this)}decodeAudioData(k,N,H){return p(this._nativeContext,k).then(I=>(typeof N=="function"&&N(I),I),I=>{throw typeof H=="function"&&H(I),I})}},GM={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},LM=(r,t,e,i,a,l,u,h)=>class extends r{constructor(p,m){const _=l(p),v={...GM,...m},y=a(_,v),x=u(_),w=x?e():null;super(p,!1,y,w),this._Q=t(this,x,y.Q,tn,bn),this._detune=t(this,x,y.detune,1200*Math.log2(tn),-1200*Math.log2(tn)),this._frequency=t(this,x,y.frequency,p.sampleRate/2,0),this._gain=t(this,x,y.gain,40*Math.log10(tn),bn),this._nativeBiquadFilterNode=y,h(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,m,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,m,_)}catch(v){throw v.code===11?i():v}if(p.length!==m.length||m.length!==_.length)throw i()}},qM=(r,t,e,i,a)=>()=>{const l=new WeakMap,u=async(h,d)=>{let p=e(h);const m=Qe(p,d);if(!m){const _={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=t(d,_)}return l.set(d,p),m?(await r(d,h.Q,p.Q),await r(d,h.detune,p.detune),await r(d,h.frequency,p.frequency),await r(d,h.gain,p.gain)):(await i(d,h.Q,p.Q),await i(d,h.detune,p.detune),await i(d,h.frequency,p.frequency),await i(d,h.gain,p.gain)),await a(h,d,p),p};return{render(h,d){const p=l.get(d);return p!==void 0?Promise.resolve(p):u(h,d)}}},FM=(r,t)=>(e,i)=>{const a=t.get(e);if(a!==void 0)return a;const l=r.get(e);if(l!==void 0)return l;try{const u=i();return u instanceof Promise?(r.set(e,u),u.catch(()=>!1).then(h=>(r.delete(e),t.set(e,h),h))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}},YM={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},XM=(r,t,e,i,a)=>class extends r{constructor(u,h){const d=i(u),p={...YM,...h},m=e(d,p),_=a(d)?t():null;super(u,!1,m,_)}},jM=(r,t,e)=>()=>{const i=new WeakMap,a=async(l,u)=>{let h=t(l);if(!Qe(h,u)){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfInputs:h.numberOfInputs};h=r(u,p)}return i.set(u,h),await e(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(l,u)}}},WM={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ZM=(r,t,e,i,a,l)=>class extends r{constructor(h,d){const p=i(h),m=l({...WM,...d}),_=e(p,m),v=a(p)?t():null;super(h,!1,_,v)}},QM=(r,t,e)=>()=>{const i=new WeakMap,a=async(l,u)=>{let h=t(l);if(!Qe(h,u)){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfOutputs:h.numberOfOutputs};h=r(u,p)}return i.set(u,h),await e(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(l,u)}}},$M=r=>(t,e,i)=>r(e,t,i),KM=r=>(t,e,i=0,a=0)=>{const l=t[i];if(l===void 0)throw r();return Yc(e)?l.connect(e,0,a):l.connect(e,0)},JM=r=>(t,e)=>{const i=r(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=t.createBuffer(1,2,44100);return i.buffer=a,i.loop=!0,i.connect(e),i.start(),()=>{i.stop(),i.disconnect(e)}},t2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},e2=(r,t,e,i,a,l,u)=>class extends r{constructor(d,p){const m=a(d),_={...t2,...p},v=i(m,_),y=l(m),x=y?e():null;super(d,!1,v,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=v,this._offset=t(this,y,v.offset,tn,bn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeConstantSourceNode.onended=p;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===p?d:m}start(d=0){if(this._nativeConstantSourceNode.start(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=d),this.context.state!=="closed"){da(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),qi(this)&&Yo(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(d=0){this._nativeConstantSourceNode.stop(d),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=d)}},n2=(r,t,e,i,a)=>()=>{const l=new WeakMap;let u=null,h=null;const d=async(p,m)=>{let _=e(p);const v=Qe(_,m);if(!v){const y={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=t(m,y),u!==null&&_.start(u),h!==null&&_.stop(h)}return l.set(m,_),v?await r(m,p.offset,_.offset):await i(m,p.offset,_.offset),await a(p,m,_),_};return{set start(p){u=p},set stop(p){h=p},render(p,m){const _=l.get(m);return _!==void 0?Promise.resolve(_):d(p,m)}}},i2=r=>t=>(r[0]=t,r[0]),s2={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},r2=(r,t,e,i,a,l)=>class extends r{constructor(h,d){const p=i(h),m={...s2,...d},_=e(p,m),y=a(p)?t():null;super(h,!1,_,y),this._isBufferNullified=!1,this._nativeConvolverNode=_,m.buffer!==null&&l(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(h){if(this._nativeConvolverNode.buffer=h,h===null&&this._nativeConvolverNode.buffer!==null){const d=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=d.createBuffer(1,1,d.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(h){this._nativeConvolverNode.normalize=h}},a2=(r,t,e)=>()=>{const i=new WeakMap,a=async(l,u)=>{let h=t(l);if(!Qe(h,u)){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,disableNormalization:!h.normalize};h=r(u,p)}return i.set(u,h),_a(h)?await e(l,u,h.inputs[0]):await e(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(l,u)}}},o2=(r,t)=>(e,i,a)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,i,a)}catch(l){throw l.name==="SyntaxError"?r():l}},l2=()=>new DOMException("","DataCloneError"),W0=r=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(i=>{const a=()=>{e.onmessage=null,t.close(),e.close(),i()};e.onmessage=()=>a();try{t.postMessage(r,[r])}catch{}finally{a()}})},c2=(r,t,e,i,a,l,u,h,d,p,m)=>(_,v)=>{const y=u(_)?_:l(_);if(a.has(v)){const x=e();return Promise.reject(x)}try{a.add(v)}catch{}return t(d,()=>d(y))?y.decodeAudioData(v).then(x=>(W0(v).catch(()=>{}),t(h,()=>h(x))||m(x),r.add(x),x)):new Promise((x,w)=>{const S=async()=>{try{await W0(v)}catch{}},A=R=>{w(R),S()};try{y.decodeAudioData(v,R=>{typeof R.copyFromChannel!="function"&&(p(R),ap(R)),r.add(R),S().then(()=>x(R))},R=>{A(R===null?i():R)})}catch(R){A(R)}})},u2=(r,t,e,i,a,l,u,h)=>(d,p)=>{const m=t.get(d);if(m===void 0)throw new Error("Missing the expected cycle count.");const _=l(d.context),v=h(_);if(m===p){if(t.delete(d),!v&&u(d)){const y=i(d),{outputs:x}=e(d);for(const w of x)if(jo(w)){const S=i(w[0]);r(y,S,w[1],w[2])}else{const S=a(w[0]);y.connect(S,w[1])}}}else t.set(d,m-p)},h2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},d2=(r,t,e,i,a,l,u)=>class extends r{constructor(d,p){const m=a(d),_={...h2,...p},v=i(m,_),y=l(m),x=y?e(_.maxDelayTime):null;super(d,!1,v,x),this._delayTime=t(this,y,v.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},f2=(r,t,e,i,a)=>l=>{const u=new WeakMap,h=async(d,p)=>{let m=e(d);const _=Qe(m,p);if(!_){const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:l};m=t(p,v)}return u.set(p,m),_?await r(p,d.delayTime,m.delayTime):await i(p,d.delayTime,m.delayTime),await a(d,p,m),m};return{render(d,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):h(d,p)}}},p2=r=>(t,e,i,a)=>r(t[a],l=>l[0]===e&&l[1]===i),m2=r=>(t,e)=>{r(t).delete(e)},g2=r=>"delayTime"in r,_2=(r,t,e)=>function i(a,l){const u=Lc(l)?l:e(r,l);if(g2(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:h}=t(u);return Array.from(h).map(d=>i([...a,u],d[0])).reduce((d,p)=>d.concat(p),[])},Mc=(r,t,e)=>{const i=t[e];if(i===void 0)throw r();return i},y2=r=>(t,e=void 0,i=void 0,a=0)=>e===void 0?t.forEach(l=>l.disconnect()):typeof e=="number"?Mc(r,t,e).disconnect():Yc(e)?i===void 0?t.forEach(l=>l.disconnect(e)):a===void 0?Mc(r,t,i).disconnect(e,0):Mc(r,t,i).disconnect(e,0,a):i===void 0?t.forEach(l=>l.disconnect(e)):Mc(r,t,i).disconnect(e,0),v2={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},b2=(r,t,e,i,a,l,u,h)=>class extends r{constructor(p,m){const _=l(p),v={...v2,...m},y=i(_,v),x=u(_),w=x?e():null;super(p,!1,y,w),this._attack=t(this,x,y.attack),this._knee=t(this,x,y.knee),this._nativeDynamicsCompressorNode=y,this._ratio=t(this,x,y.ratio),this._release=t(this,x,y.release),this._threshold=t(this,x,y.threshold),h(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=m,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},x2=(r,t,e,i,a)=>()=>{const l=new WeakMap,u=async(h,d)=>{let p=e(h);const m=Qe(p,d);if(!m){const _={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=t(d,_)}return l.set(d,p),m?(await r(d,h.attack,p.attack),await r(d,h.knee,p.knee),await r(d,h.ratio,p.ratio),await r(d,h.release,p.release),await r(d,h.threshold,p.threshold)):(await i(d,h.attack,p.attack),await i(d,h.knee,p.knee),await i(d,h.ratio,p.ratio),await i(d,h.release,p.release),await i(d,h.threshold,p.threshold)),await a(h,d,p),p};return{render(h,d){const p=l.get(d);return p!==void 0?Promise.resolve(p):u(h,d)}}},S2=()=>new DOMException("","EncodingError"),T2=r=>t=>new Promise((e,i)=>{if(r===null){i(new SyntaxError);return}const a=r.document.head;if(a===null)i(new SyntaxError);else{const l=r.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),h=URL.createObjectURL(u),d=r.onerror,p=()=>{r.onerror=d,URL.revokeObjectURL(h)};r.onerror=(m,_,v,y,x)=>{if(_===h||_===r.location.href&&v===1&&y===1)return p(),i(x),!1;if(d!==null)return d(m,_,v,y,x)},l.onerror=()=>{p(),i(new SyntaxError)},l.onload=()=>{p(),e()},l.src=h,l.type="module",a.appendChild(l)}}),w2=r=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,i,a){if(i!==null){let l=this._listeners.get(i);l===void 0&&(l=r(this,i),typeof i=="function"&&this._listeners.set(i,l)),this._nativeEventTarget.addEventListener(e,l,a)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,i,a){const l=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(e,l===void 0?null:l,a)}},C2=r=>(t,e,i)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return i()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},A2=r=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw r()},M2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},E2=(r,t,e,i,a,l)=>class extends r{constructor(h,d){const p=a(h),m={...M2,...d},_=i(p,m),v=l(p),y=v?e():null;super(h,!1,_,y),this._gain=t(this,v,_.gain,tn,bn)}get gain(){return this._gain}},k2=(r,t,e,i,a)=>()=>{const l=new WeakMap,u=async(h,d)=>{let p=e(h);const m=Qe(p,d);if(!m){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=t(d,_)}return l.set(d,p),m?await r(d,h.gain,p.gain):await i(d,h.gain,p.gain),await a(h,d,p),p};return{render(h,d){const p=l.get(d);return p!==void 0?Promise.resolve(p):u(h,d)}}},R2=(r,t)=>e=>t(r,e),D2=r=>t=>{const e=r(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},O2=r=>t=>{var e;return(e=r.get(t))!==null&&e!==void 0?e:0},N2=r=>t=>{const e=r(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},z2=r=>t=>r.get(t),Oe=()=>new DOMException("","InvalidStateError"),B2=r=>t=>{const e=r.get(t);if(e===void 0)throw Oe();return e},H2=(r,t)=>e=>{let i=r.get(e);if(i!==void 0)return i;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),r.set(e,i),i},P2=r=>t=>{const e=r.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},iu=()=>new DOMException("","InvalidAccessError"),V2=r=>{r.getFrequencyResponse=(t=>(e,i,a)=>{if(e.length!==i.length||i.length!==a.length)throw iu();return t.call(r,e,i,a)})(r.getFrequencyResponse)},I2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},U2=(r,t,e,i,a,l)=>class extends r{constructor(h,d){const p=i(h),m=a(p),_={...I2,...d},v=t(p,m?null:h.baseLatency,_),y=m?e(_.feedback,_.feedforward):null;super(h,!1,v,y),V2(v),this._nativeIIRFilterNode=v,l(this,1)}getFrequencyResponse(h,d,p){return this._nativeIIRFilterNode.getFrequencyResponse(h,d,p)}},Rb=(r,t,e,i,a,l,u,h,d,p,m)=>{const _=p.length;let v=h;for(let y=0;y<_;y+=1){let x=e[0]*p[y];for(let w=1;w<a;w+=1){const S=v-w&d-1;x+=e[w]*l[S],x-=r[w]*u[S]}for(let w=a;w<i;w+=1)x+=e[w]*l[v-w&d-1];for(let w=a;w<t;w+=1)x-=r[w]*u[v-w&d-1];l[v]=p[y],u[v]=x,v=v+1&d-1,m[y]=x}return v},G2=(r,t,e,i)=>{const a=e instanceof Float64Array?e:new Float64Array(e),l=i instanceof Float64Array?i:new Float64Array(i),u=a.length,h=l.length,d=Math.min(u,h);if(a[0]!==1){for(let x=0;x<u;x+=1)l[x]/=a[0];for(let x=1;x<h;x+=1)a[x]/=a[0]}const p=32,m=new Float32Array(p),_=new Float32Array(p),v=t.createBuffer(r.numberOfChannels,r.length,r.sampleRate),y=r.numberOfChannels;for(let x=0;x<y;x+=1){const w=r.getChannelData(x),S=v.getChannelData(x);m.fill(0),_.fill(0),Rb(a,u,l,h,d,m,_,0,p,w,S)}return v},L2=(r,t,e,i,a)=>(l,u)=>{const h=new WeakMap;let d=null;const p=async(m,_)=>{let v=null,y=t(m);const x=Qe(y,_);if(_.createIIRFilter===void 0?v=r(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(y=_.createIIRFilter(u,l)),h.set(_,v===null?y:v),v!==null){if(d===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const S=new e(m.context.destination.channelCount,m.context.length,_.sampleRate);d=(async()=>{await i(m,S,S.destination);const A=await a(S);return G2(A,_,l,u)})()}const w=await d;return v.buffer=w,v.start(0),v}return await i(m,_,y),y};return{render(m,_){const v=h.get(_);return v!==void 0?Promise.resolve(v):p(m,_)}}},q2=(r,t,e,i,a,l)=>u=>(h,d)=>{const p=r.get(h);if(p===void 0){if(!u&&l(h)){const m=i(h),{outputs:_}=e(h);for(const v of _)if(jo(v)){const y=i(v[0]);t(m,y,v[1],v[2])}else{const y=a(v[0]);m.disconnect(y,v[1])}}r.set(h,d)}else r.set(h,p+d)},F2=(r,t)=>e=>{const i=r.get(e);return t(i)||t(e)},Y2=(r,t)=>e=>r.has(e)||t(e),X2=(r,t)=>e=>r.has(e)||t(e),j2=(r,t)=>e=>{const i=r.get(e);return t(i)||t(e)},W2=r=>t=>r!==null&&t instanceof r,Z2=r=>t=>r!==null&&typeof r.AudioNode=="function"&&t instanceof r.AudioNode,Q2=r=>t=>r!==null&&typeof r.AudioParam=="function"&&t instanceof r.AudioParam,$2=(r,t)=>e=>r(e)||t(e),K2=r=>t=>r!==null&&t instanceof r,J2=r=>r!==null&&r.isSecureContext,tE=(r,t,e,i)=>class extends r{constructor(l,u){const h=e(l),d=t(h,u);if(i(h))throw TypeError();super(l,!0,d,null),this._nativeMediaElementAudioSourceNode=d}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},eE={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},nE=(r,t,e,i)=>class extends r{constructor(l,u){const h=e(l);if(i(h))throw new TypeError;const d={...eE,...u},p=t(h,d);super(l,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},iE=(r,t,e,i)=>class extends r{constructor(l,u){const h=e(l),d=t(h,u);if(i(h))throw new TypeError;super(l,!0,d,null),this._nativeMediaStreamAudioSourceNode=d}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},sE=(r,t,e)=>class extends r{constructor(a,l){const u=e(a),h=t(u,l);super(a,!0,h,null)}},rE=(r,t,e,i,a,l)=>class extends e{constructor(h,d){super(h),this._nativeContext=h,eu.set(this,h),i(h)&&a.set(h,new Set),this._destination=new r(this,d),this._listener=t(this,h),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(h){const d=typeof h=="function"?l(this,h):null;this._nativeContext.onstatechange=d;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===d?h:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Go=r=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=r.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},aE=(r,t)=>(e,i,a)=>{const l=new Set;return e.connect=(u=>(h,d=0,p=0)=>{const m=l.size===0;if(t(h))return u.call(e,h,d,p),r(l,[h,d,p],_=>_[0]===h&&_[1]===d&&_[2]===p,!0),m&&i(),h;u.call(e,h,d),r(l,[h,d],_=>_[0]===h&&_[1]===d,!0),m&&i()})(e.connect),e.disconnect=(u=>(h,d,p)=>{const m=l.size>0;if(h===void 0)u.apply(e),l.clear();else if(typeof h=="number"){u.call(e,h);for(const v of l)v[1]===h&&l.delete(v)}else{t(h)?u.call(e,h,d,p):u.call(e,h,d);for(const v of l)v[0]===h&&(d===void 0||v[1]===d)&&(p===void 0||v[2]===p)&&l.delete(v)}const _=l.size===0;m&&_&&a()})(e.disconnect),e},ee=(r,t,e)=>{const i=t[e];i!==void 0&&i!==r[e]&&(r[e]=i)},Ce=(r,t)=>{ee(r,t,"channelCount"),ee(r,t,"channelCountMode"),ee(r,t,"channelInterpretation")},Z0=r=>typeof r.getFloatTimeDomainData=="function",oE=r=>{r.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);r.getByteTimeDomainData(e);const i=Math.max(e.length,r.fftSize);for(let a=0;a<i;a+=1)t[a]=(e[a]-128)*.0078125;return t}},lE=(r,t)=>(e,i)=>{const a=e.createAnalyser();if(Ce(a,i),!(i.maxDecibels>i.minDecibels))throw t();return ee(a,i,"fftSize"),ee(a,i,"maxDecibels"),ee(a,i,"minDecibels"),ee(a,i,"smoothingTimeConstant"),r(Z0,()=>Z0(a))||oE(a),a},cE=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,he=(r,t,e)=>{const i=t[e];i!==void 0&&i!==r[e].value&&(r[e].value=i)},uE=r=>{r.start=(t=>{let e=!1;return(i=0,a=0,l)=>{if(e)throw Oe();t.call(r,i,a,l),e=!0}})(r.start)},cp=r=>{r.start=(t=>(e=0,i=0,a)=>{if(typeof a=="number"&&a<0||i<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(r,e,i,a)})(r.start)},up=r=>{r.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(r,e)})(r.stop)},hE=(r,t,e,i,a,l,u,h,d,p,m)=>(_,v)=>{const y=_.createBufferSource();return Ce(y,v),he(y,v,"playbackRate"),ee(y,v,"buffer"),ee(y,v,"loop"),ee(y,v,"loopEnd"),ee(y,v,"loopStart"),t(e,()=>e(_))||uE(y),t(i,()=>i(_))||d(y),t(a,()=>a(_))||p(y,_),t(l,()=>l(_))||cp(y),t(u,()=>u(_))||m(y,_),t(h,()=>h(_))||up(y),r(_,y),y},dE=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,fE=(r,t)=>(e,i,a)=>{const l=e.destination;if(l.channelCount!==i)try{l.channelCount=i}catch{}a&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:i});const u=r(e,{channelCount:i,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return t(u,"channelCount",h=>()=>h.call(u),h=>d=>{h.call(u,d);try{l.channelCount=d}catch(p){if(d>l.maxChannelCount)throw p}}),t(u,"channelCountMode",h=>()=>h.call(u),h=>d=>{h.call(u,d),l.channelCountMode=d}),t(u,"channelInterpretation",h=>()=>h.call(u),h=>d=>{h.call(u,d),l.channelInterpretation=d}),Object.defineProperty(u,"maxChannelCount",{get:()=>l.maxChannelCount}),u.connect(l),u},pE=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,mE=r=>{const{port1:t}=new MessageChannel;try{t.postMessage(r)}finally{t.close()}},gE=(r,t,e,i,a)=>(l,u,h,d,p,m)=>{if(h!==null)try{const _=new h(l,d,m),v=new Map;let y=null;if(Object.defineProperties(_,{channelCount:{get:()=>m.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>y,set:x=>{typeof y=="function"&&_.removeEventListener("processorerror",y),y=typeof x=="function"?x:null,typeof y=="function"&&_.addEventListener("processorerror",y)}}}),_.addEventListener=(x=>(...w)=>{if(w[0]==="processorerror"){const S=typeof w[1]=="function"?w[1]:typeof w[1]=="object"&&w[1]!==null&&typeof w[1].handleEvent=="function"?w[1].handleEvent:null;if(S!==null){const A=v.get(w[1]);A!==void 0?w[1]=A:(w[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),S(R)):S(new ErrorEvent(w[0],{...R}))},v.set(S,w[1]))}}return x.call(_,"error",w[1],w[2]),x.call(_,...w)})(_.addEventListener),_.removeEventListener=(x=>(...w)=>{if(w[0]==="processorerror"){const S=v.get(w[1]);S!==void 0&&(v.delete(w[1]),w[1]=S)}return x.call(_,"error",w[1],w[2]),x.call(_,w[0],w[1],w[2])})(_.removeEventListener),m.numberOfOutputs!==0){const x=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(x).connect(l.destination),a(_,()=>x.disconnect(),()=>x.connect(l.destination))}return _}catch(_){throw _.code===11?i():_}if(p===void 0)throw i();return mE(m),t(l,u,p,m)},Db=(r,t)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*t))))),_E=r=>new Promise((t,e)=>{const{port1:i,port2:a}=new MessageChannel;i.onmessage=({data:l})=>{i.close(),a.close(),t(l)},i.onmessageerror=({data:l})=>{i.close(),a.close(),e(l)},a.postMessage(r)}),yE=async(r,t)=>{const e=await _E(t);return new r(e)},vE=(r,t,e,i)=>{let a=Df.get(r);a===void 0&&(a=new WeakMap,Df.set(r,a));const l=yE(e,i);return a.set(t,l),l},bE=(r,t,e,i,a,l,u,h,d,p,m,_,v)=>(y,x,w,S)=>{if(S.numberOfInputs===0&&S.numberOfOutputs===0)throw d();const A=Array.isArray(S.outputChannelCount)?S.outputChannelCount:Array.from(S.outputChannelCount);if(A.some(it=>it<1))throw d();if(A.length!==S.numberOfOutputs)throw t();if(S.channelCountMode!=="explicit")throw d();const R=S.channelCount*S.numberOfInputs,O=A.reduce((it,ct)=>it+ct,0),V=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length;if(R+V>6||O>6)throw d();const k=new MessageChannel,N=[],H=[];for(let it=0;it<S.numberOfInputs;it+=1)N.push(u(y,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1})),H.push(a(y,{channelCount:S.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:S.channelCount}));const I=[];if(w.parameterDescriptors!==void 0)for(const{defaultValue:it,maxValue:ct,minValue:Wt,name:Ht}of w.parameterDescriptors){const kt=l(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:S.parameterData[Ht]!==void 0?S.parameterData[Ht]:it===void 0?0:it});Object.defineProperties(kt.offset,{defaultValue:{get:()=>it===void 0?0:it},maxValue:{get:()=>ct===void 0?tn:ct},minValue:{get:()=>Wt===void 0?bn:Wt}}),I.push(kt)}const F=i(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+V)}),L=Db(x,y.sampleRate),j=h(y,L,R+V,Math.max(1,O)),$=a(y,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),rt=[];for(let it=0;it<S.numberOfOutputs;it+=1)rt.push(i(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[it]}));for(let it=0;it<S.numberOfInputs;it+=1){N[it].connect(H[it]);for(let ct=0;ct<S.channelCount;ct+=1)H[it].connect(F,ct,it*S.channelCount+ct)}const ot=new Eb(w.parameterDescriptors===void 0?[]:w.parameterDescriptors.map(({name:it},ct)=>{const Wt=I[ct];return Wt.connect(F,0,R+ct),Wt.start(0),[it,Wt.offset]}));F.connect(j);let ut=S.channelInterpretation,T=null;const E=S.numberOfOutputs===0?[j]:rt,D={get bufferSize(){return L},get channelCount(){return S.channelCount},set channelCount(it){throw e()},get channelCountMode(){return S.channelCountMode},set channelCountMode(it){throw e()},get channelInterpretation(){return ut},set channelInterpretation(it){for(const ct of N)ct.channelInterpretation=it;ut=it},get context(){return j.context},get inputs(){return N},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get onprocessorerror(){return T},set onprocessorerror(it){typeof T=="function"&&D.removeEventListener("processorerror",T),T=typeof it=="function"?it:null,typeof T=="function"&&D.addEventListener("processorerror",T)},get parameters(){return ot},get port(){return k.port2},addEventListener(...it){return j.addEventListener(it[0],it[1],it[2])},connect:r.bind(null,E),disconnect:p.bind(null,E),dispatchEvent(...it){return j.dispatchEvent(it[0])},removeEventListener(...it){return j.removeEventListener(it[0],it[1],it[2])}},P=new Map;k.port1.addEventListener=(it=>(...ct)=>{if(ct[0]==="message"){const Wt=typeof ct[1]=="function"?ct[1]:typeof ct[1]=="object"&&ct[1]!==null&&typeof ct[1].handleEvent=="function"?ct[1].handleEvent:null;if(Wt!==null){const Ht=P.get(ct[1]);Ht!==void 0?ct[1]=Ht:(ct[1]=kt=>{m(y.currentTime,y.sampleRate,()=>Wt(kt))},P.set(Wt,ct[1]))}}return it.call(k.port1,ct[0],ct[1],ct[2])})(k.port1.addEventListener),k.port1.removeEventListener=(it=>(...ct)=>{if(ct[0]==="message"){const Wt=P.get(ct[1]);Wt!==void 0&&(P.delete(ct[1]),ct[1]=Wt)}return it.call(k.port1,ct[0],ct[1],ct[2])})(k.port1.removeEventListener);let C=null;Object.defineProperty(k.port1,"onmessage",{get:()=>C,set:it=>{typeof C=="function"&&k.port1.removeEventListener("message",C),C=typeof it=="function"?it:null,typeof C=="function"&&(k.port1.addEventListener("message",C),k.port1.start())}}),w.prototype.port=k.port1;let B=null;vE(y,D,w,S).then(it=>B=it);const Q=jc(S.numberOfInputs,S.channelCount),K=jc(S.numberOfOutputs,A),J=w.parameterDescriptors===void 0?[]:w.parameterDescriptors.reduce((it,{name:ct})=>({...it,[ct]:new Float32Array(128)}),{});let lt=!0;const ft=()=>{S.numberOfOutputs>0&&j.disconnect($);for(let it=0,ct=0;it<S.numberOfOutputs;it+=1){const Wt=rt[it];for(let Ht=0;Ht<A[it];Ht+=1)$.disconnect(Wt,ct+Ht,Ht);ct+=A[it]}},nt=new Map;j.onaudioprocess=({inputBuffer:it,outputBuffer:ct})=>{if(B!==null){const Wt=_(D);for(let Ht=0;Ht<L;Ht+=128){for(let kt=0;kt<S.numberOfInputs;kt+=1)for(let Zt=0;Zt<S.channelCount;Zt+=1)Xc(it,Q[kt],Zt,Zt,Ht);w.parameterDescriptors!==void 0&&w.parameterDescriptors.forEach(({name:kt},Zt)=>{Xc(it,J,kt,R+Zt,Ht)});for(let kt=0;kt<S.numberOfInputs;kt+=1)for(let Zt=0;Zt<A[kt];Zt+=1)K[kt][Zt].byteLength===0&&(K[kt][Zt]=new Float32Array(128));try{const kt=Q.map((Ge,ai)=>{if(Wt[ai].size>0)return nt.set(ai,L/128),Ge;const rn=nt.get(ai);return rn===void 0?[]:(Ge.every(Su=>Su.every(nl=>nl===0))&&(rn===1?nt.delete(ai):nt.set(ai,rn-1)),Ge)});lt=m(y.currentTime+Ht/y.sampleRate,y.sampleRate,()=>B.process(kt,K,J));for(let Ge=0,ai=0;Ge<S.numberOfOutputs;Ge+=1){for(let Ms=0;Ms<A[Ge];Ms+=1)kb(ct,K[Ge],Ms,ai+Ms,Ht);ai+=A[Ge]}}catch(kt){lt=!1,D.dispatchEvent(new ErrorEvent("processorerror",{colno:kt.colno,filename:kt.filename,lineno:kt.lineno,message:kt.message}))}if(!lt){for(let kt=0;kt<S.numberOfInputs;kt+=1){N[kt].disconnect(H[kt]);for(let Zt=0;Zt<S.channelCount;Zt+=1)H[Ht].disconnect(F,Zt,kt*S.channelCount+Zt)}if(w.parameterDescriptors!==void 0){const kt=w.parameterDescriptors.length;for(let Zt=0;Zt<kt;Zt+=1){const Ge=I[Zt];Ge.disconnect(F,0,R+Zt),Ge.stop()}}F.disconnect(j),j.onaudioprocess=null,_t?ft():jt();break}}}};let _t=!1;const ht=u(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),qt=()=>j.connect(ht).connect(y.destination),jt=()=>{j.disconnect(ht),ht.disconnect()},fe=()=>{if(lt){jt(),S.numberOfOutputs>0&&j.connect($);for(let it=0,ct=0;it<S.numberOfOutputs;it+=1){const Wt=rt[it];for(let Ht=0;Ht<A[it];Ht+=1)$.connect(Wt,ct+Ht,Ht);ct+=A[it]}}_t=!0},ze=()=>{lt&&(qt(),ft()),_t=!1};return qt(),v(D,fe,ze)},Ob=(r,t)=>{const e=r.createBiquadFilter();return Ce(e,t),he(e,t,"Q"),he(e,t,"detune"),he(e,t,"frequency"),he(e,t,"gain"),ee(e,t,"type"),e},xE=(r,t)=>(e,i)=>{const a=e.createChannelMerger(i.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&t(e,a),Ce(a,i),a},SE=r=>{const t=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Oe()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Oe()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Oe()}})},Wo=(r,t)=>{const e=r.createChannelSplitter(t.numberOfOutputs);return Ce(e,t),SE(e),e},TE=(r,t,e,i,a)=>(l,u)=>{if(l.createConstantSource===void 0)return e(l,u);const h=l.createConstantSource();return Ce(h,u),he(h,u,"offset"),t(i,()=>i(l))||cp(h),t(a,()=>a(l))||up(h),r(l,h),h},ya=(r,t)=>(r.connect=t.connect.bind(t),r.disconnect=t.disconnect.bind(t),r),wE=(r,t,e,i)=>(a,{offset:l,...u})=>{const h=a.createBuffer(1,2,44100),d=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=e(a,{...u,gain:l}),m=h.getChannelData(0);m[0]=1,m[1]=1,d.buffer=h,d.loop=!0;const _={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(x){p.channelCount=x},get channelCountMode(){return p.channelCountMode},set channelCountMode(x){p.channelCountMode=x},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(x){p.channelInterpretation=x},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return d.onended},set onended(x){d.onended=x},addEventListener(...x){return d.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return d.dispatchEvent(x[0])},removeEventListener(...x){return d.removeEventListener(x[0],x[1],x[2])},start(x=0){d.start.call(d,x)},stop(x=0){d.stop.call(d,x)}},v=()=>d.connect(p),y=()=>d.disconnect(p);return r(a,d),i(ya(_,p),v,y)},CE=(r,t)=>(e,i)=>{const a=e.createConvolver();if(Ce(a,i),i.disableNormalization===a.normalize&&(a.normalize=!i.disableNormalization),ee(a,i,"buffer"),i.channelCount>2||(t(a,"channelCount",l=>()=>l.call(a),l=>u=>{if(u>2)throw r();return l.call(a,u)}),i.channelCountMode==="max"))throw r();return t(a,"channelCountMode",l=>()=>l.call(a),l=>u=>{if(u==="max")throw r();return l.call(a,u)}),a},Nb=(r,t)=>{const e=r.createDelay(t.maxDelayTime);return Ce(e,t),he(e,t,"delayTime"),e},AE=r=>(t,e)=>{const i=t.createDynamicsCompressor();if(Ce(i,e),e.channelCount>2||e.channelCountMode==="max")throw r();return he(i,e,"attack"),he(i,e,"knee"),he(i,e,"ratio"),he(i,e,"release"),he(i,e,"threshold"),i},hn=(r,t)=>{const e=r.createGain();return Ce(e,t),he(e,t,"gain"),e},ME=r=>(t,e,i)=>{if(t.createIIRFilter===void 0)return r(t,e,i);const a=t.createIIRFilter(i.feedforward,i.feedback);return Ce(a,i),a};function EE(r,t){const e=t[0]*t[0]+t[1]*t[1];return[(r[0]*t[0]+r[1]*t[1])/e,(r[1]*t[0]-r[0]*t[1])/e]}function kE(r,t){return[r[0]*t[0]-r[1]*t[1],r[0]*t[1]+r[1]*t[0]]}function Q0(r,t){let e=[0,0];for(let i=r.length-1;i>=0;i-=1)e=kE(e,t),e[0]+=r[i];return e}const RE=(r,t,e,i)=>(a,l,{channelCount:u,channelCountMode:h,channelInterpretation:d,feedback:p,feedforward:m})=>{const _=Db(l,a.sampleRate),v=p instanceof Float64Array?p:new Float64Array(p),y=m instanceof Float64Array?m:new Float64Array(m),x=v.length,w=y.length,S=Math.min(x,w);if(x===0||x>20)throw i();if(v[0]===0)throw t();if(w===0||w>20)throw i();if(y[0]===0)throw t();if(v[0]!==1){for(let I=0;I<w;I+=1)y[I]/=v[0];for(let I=1;I<x;I+=1)v[I]/=v[0]}const A=e(a,_,u,u);A.channelCount=u,A.channelCountMode=h,A.channelInterpretation=d;const R=32,O=[],V=[],k=[];for(let I=0;I<u;I+=1){O.push(0);const F=new Float32Array(R),L=new Float32Array(R);F.fill(0),L.fill(0),V.push(F),k.push(L)}A.onaudioprocess=I=>{const F=I.inputBuffer,L=I.outputBuffer,j=F.numberOfChannels;for(let $=0;$<j;$+=1){const rt=F.getChannelData($),ot=L.getChannelData($);O[$]=Rb(v,x,y,w,S,V[$],k[$],O[$],R,rt,ot)}};const N=a.sampleRate/2;return ya({get bufferSize(){return _},get channelCount(){return A.channelCount},set channelCount(I){A.channelCount=I},get channelCountMode(){return A.channelCountMode},set channelCountMode(I){A.channelCountMode=I},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(I){A.channelInterpretation=I},get context(){return A.context},get inputs(){return[A]},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},addEventListener(...I){return A.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return A.dispatchEvent(I[0])},getFrequencyResponse(I,F,L){if(I.length!==F.length||F.length!==L.length)throw r();const j=I.length;for(let $=0;$<j;$+=1){const rt=-Math.PI*(I[$]/N),ot=[Math.cos(rt),Math.sin(rt)],ut=Q0(y,ot),T=Q0(v,ot),E=EE(ut,T);F[$]=Math.sqrt(E[0]*E[0]+E[1]*E[1]),L[$]=Math.atan2(E[1],E[0])}},removeEventListener(...I){return A.removeEventListener(I[0],I[1],I[2])}},A)},DE=(r,t)=>r.createMediaElementSource(t.mediaElement),OE=(r,t)=>{const e=r.createMediaStreamDestination();return Ce(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},NE=(r,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((l,u)=>l.id<u.id?-1:l.id>u.id?1:0);const i=e.slice(0,1),a=r.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(a,"mediaStream",{value:t}),a},zE=(r,t)=>(e,{mediaStreamTrack:i})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(i);const a=new MediaStream([i]),l=e.createMediaStreamSource(a);if(i.kind!=="audio")throw r();if(t(e))throw new TypeError;return l},BE=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,HE=(r,t,e,i,a,l)=>(u,h)=>{const d=u.createOscillator();return Ce(d,h),he(d,h,"detune"),he(d,h,"frequency"),h.periodicWave!==void 0?d.setPeriodicWave(h.periodicWave):ee(d,h,"type"),t(e,()=>e(u))||cp(d),t(i,()=>i(u))||l(d,u),t(a,()=>a(u))||up(d),r(u,d),d},PE=r=>(t,e)=>{const i=t.createPanner();return i.orientationX===void 0?r(t,e):(Ce(i,e),he(i,e,"orientationX"),he(i,e,"orientationY"),he(i,e,"orientationZ"),he(i,e,"positionX"),he(i,e,"positionY"),he(i,e,"positionZ"),ee(i,e,"coneInnerAngle"),ee(i,e,"coneOuterAngle"),ee(i,e,"coneOuterGain"),ee(i,e,"distanceModel"),ee(i,e,"maxDistance"),ee(i,e,"panningModel"),ee(i,e,"refDistance"),ee(i,e,"rolloffFactor"),i)},VE=(r,t,e,i,a,l,u,h,d,p)=>(m,{coneInnerAngle:_,coneOuterAngle:v,coneOuterGain:y,distanceModel:x,maxDistance:w,orientationX:S,orientationY:A,orientationZ:R,panningModel:O,positionX:V,positionY:k,positionZ:N,refDistance:H,rolloffFactor:I,...F})=>{const L=m.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw u();Ce(L,F);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},$=e(m,{...j,channelInterpretation:"speakers",numberOfInputs:6}),rt=i(m,{...F,gain:1}),ot=i(m,{...j,gain:1}),ut=i(m,{...j,gain:0}),T=i(m,{...j,gain:0}),E=i(m,{...j,gain:0}),D=i(m,{...j,gain:0}),P=i(m,{...j,gain:0}),C=a(m,256,6,1),B=l(m,{...j,curve:new Float32Array([1,1]),oversample:"none"});let Y=[S,A,R],Q=[V,k,N];const K=new Float32Array(1);C.onaudioprocess=({inputBuffer:nt})=>{const _t=[d(nt,K,0),d(nt,K,1),d(nt,K,2)];_t.some((qt,jt)=>qt!==Y[jt])&&(L.setOrientation(..._t),Y=_t);const ht=[d(nt,K,3),d(nt,K,4),d(nt,K,5)];ht.some((qt,jt)=>qt!==Q[jt])&&(L.setPosition(...ht),Q=ht)},Object.defineProperty(ut.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return L.channelCount},set channelCount(nt){if(nt>2)throw u();rt.channelCount=nt,L.channelCount=nt},get channelCountMode(){return L.channelCountMode},set channelCountMode(nt){if(nt==="max")throw u();rt.channelCountMode=nt,L.channelCountMode=nt},get channelInterpretation(){return L.channelInterpretation},set channelInterpretation(nt){rt.channelInterpretation=nt,L.channelInterpretation=nt},get coneInnerAngle(){return L.coneInnerAngle},set coneInnerAngle(nt){L.coneInnerAngle=nt},get coneOuterAngle(){return L.coneOuterAngle},set coneOuterAngle(nt){L.coneOuterAngle=nt},get coneOuterGain(){return L.coneOuterGain},set coneOuterGain(nt){if(nt<0||nt>1)throw t();L.coneOuterGain=nt},get context(){return L.context},get distanceModel(){return L.distanceModel},set distanceModel(nt){L.distanceModel=nt},get inputs(){return[rt]},get maxDistance(){return L.maxDistance},set maxDistance(nt){if(nt<0)throw new RangeError;L.maxDistance=nt},get numberOfInputs(){return L.numberOfInputs},get numberOfOutputs(){return L.numberOfOutputs},get orientationX(){return ot.gain},get orientationY(){return ut.gain},get orientationZ(){return T.gain},get panningModel(){return L.panningModel},set panningModel(nt){L.panningModel=nt},get positionX(){return E.gain},get positionY(){return D.gain},get positionZ(){return P.gain},get refDistance(){return L.refDistance},set refDistance(nt){if(nt<0)throw new RangeError;L.refDistance=nt},get rolloffFactor(){return L.rolloffFactor},set rolloffFactor(nt){if(nt<0)throw new RangeError;L.rolloffFactor=nt},addEventListener(...nt){return rt.addEventListener(nt[0],nt[1],nt[2])},dispatchEvent(...nt){return rt.dispatchEvent(nt[0])},removeEventListener(...nt){return rt.removeEventListener(nt[0],nt[1],nt[2])}};_!==J.coneInnerAngle&&(J.coneInnerAngle=_),v!==J.coneOuterAngle&&(J.coneOuterAngle=v),y!==J.coneOuterGain&&(J.coneOuterGain=y),x!==J.distanceModel&&(J.distanceModel=x),w!==J.maxDistance&&(J.maxDistance=w),S!==J.orientationX.value&&(J.orientationX.value=S),A!==J.orientationY.value&&(J.orientationY.value=A),R!==J.orientationZ.value&&(J.orientationZ.value=R),O!==J.panningModel&&(J.panningModel=O),V!==J.positionX.value&&(J.positionX.value=V),k!==J.positionY.value&&(J.positionY.value=k),N!==J.positionZ.value&&(J.positionZ.value=N),H!==J.refDistance&&(J.refDistance=H),I!==J.rolloffFactor&&(J.rolloffFactor=I),(Y[0]!==1||Y[1]!==0||Y[2]!==0)&&L.setOrientation(...Y),(Q[0]!==0||Q[1]!==0||Q[2]!==0)&&L.setPosition(...Q);const lt=()=>{rt.connect(L),r(rt,B,0,0),B.connect(ot).connect($,0,0),B.connect(ut).connect($,0,1),B.connect(T).connect($,0,2),B.connect(E).connect($,0,3),B.connect(D).connect($,0,4),B.connect(P).connect($,0,5),$.connect(C).connect(m.destination)},ft=()=>{rt.disconnect(L),h(rt,B,0,0),B.disconnect(ot),ot.disconnect($),B.disconnect(ut),ut.disconnect($),B.disconnect(T),T.disconnect($),B.disconnect(E),E.disconnect($),B.disconnect(D),D.disconnect($),B.disconnect(P),P.disconnect($),$.disconnect(C),C.disconnect(m.destination)};return p(ya(J,L),lt,ft)},IE=r=>(t,{disableNormalization:e,imag:i,real:a})=>{const l=i instanceof Float32Array?i:new Float32Array(i),u=a instanceof Float32Array?a:new Float32Array(a),h=t.createPeriodicWave(u,l,{disableNormalization:e});if(Array.from(i).length<2)throw r();return h},Zo=(r,t,e,i)=>r.createScriptProcessor(t,e,i),UE=(r,t)=>(e,i)=>{const a=i.channelCountMode;if(a==="clamped-max")throw t();if(e.createStereoPanner===void 0)return r(e,i);const l=e.createStereoPanner();return Ce(l,i),he(l,i,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw t()}}),l},GE=(r,t,e,i,a,l)=>{const h=new Float32Array([1,1]),d=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...p,oversample:"none"},_=(x,w,S,A)=>{const R=new Float32Array(16385),O=new Float32Array(16385);for(let F=0;F<16385;F+=1){const L=F/16384*d;R[F]=Math.cos(L),O[F]=Math.sin(L)}const V=e(x,{...p,gain:0}),k=i(x,{...m,curve:R}),N=i(x,{...m,curve:h}),H=e(x,{...p,gain:0}),I=i(x,{...m,curve:O});return{connectGraph(){w.connect(V),w.connect(N.inputs===void 0?N:N.inputs[0]),w.connect(H),N.connect(S),S.connect(k.inputs===void 0?k:k.inputs[0]),S.connect(I.inputs===void 0?I:I.inputs[0]),k.connect(V.gain),I.connect(H.gain),V.connect(A,0,0),H.connect(A,0,1)},disconnectGraph(){w.disconnect(V),w.disconnect(N.inputs===void 0?N:N.inputs[0]),w.disconnect(H),N.disconnect(S),S.disconnect(k.inputs===void 0?k:k.inputs[0]),S.disconnect(I.inputs===void 0?I:I.inputs[0]),k.disconnect(V.gain),I.disconnect(H.gain),V.disconnect(A,0,0),H.disconnect(A,0,1)}}},v=(x,w,S,A)=>{const R=new Float32Array(16385),O=new Float32Array(16385),V=new Float32Array(16385),k=new Float32Array(16385),N=Math.floor(16385/2);for(let E=0;E<16385;E+=1)if(E>N){const D=(E-N)/(16384-N)*d;R[E]=Math.cos(D),O[E]=Math.sin(D),V[E]=0,k[E]=1}else{const D=E/(16384-N)*d;R[E]=1,O[E]=0,V[E]=Math.cos(D),k[E]=Math.sin(D)}const H=t(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),I=e(x,{...p,gain:0}),F=i(x,{...m,curve:R}),L=e(x,{...p,gain:0}),j=i(x,{...m,curve:O}),$=i(x,{...m,curve:h}),rt=e(x,{...p,gain:0}),ot=i(x,{...m,curve:V}),ut=e(x,{...p,gain:0}),T=i(x,{...m,curve:k});return{connectGraph(){w.connect(H),w.connect($.inputs===void 0?$:$.inputs[0]),H.connect(I,0),H.connect(L,0),H.connect(rt,1),H.connect(ut,1),$.connect(S),S.connect(F.inputs===void 0?F:F.inputs[0]),S.connect(j.inputs===void 0?j:j.inputs[0]),S.connect(ot.inputs===void 0?ot:ot.inputs[0]),S.connect(T.inputs===void 0?T:T.inputs[0]),F.connect(I.gain),j.connect(L.gain),ot.connect(rt.gain),T.connect(ut.gain),I.connect(A,0,0),rt.connect(A,0,0),L.connect(A,0,1),ut.connect(A,0,1)},disconnectGraph(){w.disconnect(H),w.disconnect($.inputs===void 0?$:$.inputs[0]),H.disconnect(I,0),H.disconnect(L,0),H.disconnect(rt,1),H.disconnect(ut,1),$.disconnect(S),S.disconnect(F.inputs===void 0?F:F.inputs[0]),S.disconnect(j.inputs===void 0?j:j.inputs[0]),S.disconnect(ot.inputs===void 0?ot:ot.inputs[0]),S.disconnect(T.inputs===void 0?T:T.inputs[0]),F.disconnect(I.gain),j.disconnect(L.gain),ot.disconnect(rt.gain),T.disconnect(ut.gain),I.disconnect(A,0,0),rt.disconnect(A,0,0),L.disconnect(A,0,1),ut.disconnect(A,0,1)}}},y=(x,w,S,A,R)=>{if(w===1)return _(x,S,A,R);if(w===2)return v(x,S,A,R);throw a()};return(x,{channelCount:w,channelCountMode:S,pan:A,...R})=>{if(S==="max")throw a();const O=r(x,{...R,channelCount:1,channelCountMode:S,numberOfInputs:2}),V=e(x,{...R,channelCount:w,channelCountMode:S,gain:1}),k=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:A});let{connectGraph:N,disconnectGraph:H}=y(x,w,V,k,O);Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"maxValue",{get:()=>1}),Object.defineProperty(k.gain,"minValue",{get:()=>-1});const I={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount($){V.channelCount!==$&&(F&&H(),{connectGraph:N,disconnectGraph:H}=y(x,$,V,k,O),F&&N()),V.channelCount=$},get channelCountMode(){return V.channelCountMode},set channelCountMode($){if($==="clamped-max"||$==="max")throw a();V.channelCountMode=$},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation($){V.channelInterpretation=$},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return k.gain},addEventListener(...$){return V.addEventListener($[0],$[1],$[2])},dispatchEvent(...$){return V.dispatchEvent($[0])},removeEventListener(...$){return V.removeEventListener($[0],$[1],$[2])}};let F=!1;const L=()=>{N(),F=!0},j=()=>{H(),F=!1};return l(ya(I,O),L,j)}},LE=(r,t,e,i,a,l,u)=>(h,d)=>{const p=h.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&h.createGain().gain.automationRate===void 0)return e(h,d);Ce(p,d);const m=d.curve===null||d.curve instanceof Float32Array?d.curve:new Float32Array(d.curve);if(m!==null&&m.length<2)throw t();ee(p,{curve:m},"curve"),ee(p,d,"oversample");let _=null,v=!1;return u(p,"curve",w=>()=>w.call(p),w=>S=>(w.call(p,S),v&&(i(S)&&_===null?_=r(h,p):!i(S)&&_!==null&&(_(),_=null)),S)),a(p,()=>{v=!0,i(p.curve)&&(_=r(h,p))},()=>{v=!1,_!==null&&(_(),_=null)})},qE=(r,t,e,i,a)=>(l,{curve:u,oversample:h,...d})=>{const p=l.createWaveShaper(),m=l.createWaveShaper();Ce(p,d),Ce(m,d);const _=e(l,{...d,gain:1}),v=e(l,{...d,gain:-1}),y=e(l,{...d,gain:1}),x=e(l,{...d,gain:-1});let w=null,S=!1,A=null;const R={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(k){_.channelCount=k,v.channelCount=k,p.channelCount=k,y.channelCount=k,m.channelCount=k,x.channelCount=k},get channelCountMode(){return p.channelCountMode},set channelCountMode(k){_.channelCountMode=k,v.channelCountMode=k,p.channelCountMode=k,y.channelCountMode=k,m.channelCountMode=k,x.channelCountMode=k},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(k){_.channelInterpretation=k,v.channelInterpretation=k,p.channelInterpretation=k,y.channelInterpretation=k,m.channelInterpretation=k,x.channelInterpretation=k},get context(){return p.context},get curve(){return A},set curve(k){if(k!==null&&k.length<2)throw t();if(k===null)p.curve=k,m.curve=k;else{const N=k.length,H=new Float32Array(N+2-N%2),I=new Float32Array(N+2-N%2);H[0]=k[0],I[0]=-k[N-1];const F=Math.ceil((N+1)/2),L=(N+1)/2-1;for(let j=1;j<F;j+=1){const $=j/F*L,rt=Math.floor($),ot=Math.ceil($);H[j]=rt===ot?k[rt]:(1-($-rt))*k[rt]+(1-(ot-$))*k[ot],I[j]=rt===ot?-k[N-1-rt]:-((1-($-rt))*k[N-1-rt])-(1-(ot-$))*k[N-1-ot]}H[F]=N%2===1?k[F-1]:(k[F-2]+k[F-1])/2,p.curve=H,m.curve=I}A=k,S&&(i(A)&&w===null?w=r(l,_):w!==null&&(w(),w=null))},get inputs(){return[_]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(k){p.oversample=k,m.oversample=k},addEventListener(...k){return _.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return _.dispatchEvent(k[0])},removeEventListener(...k){return _.removeEventListener(k[0],k[1],k[2])}};u!==null&&(R.curve=u instanceof Float32Array?u:new Float32Array(u)),h!==R.oversample&&(R.oversample=h);const O=()=>{_.connect(p).connect(y),_.connect(v).connect(m).connect(x).connect(y),S=!0,i(A)&&(w=r(l,_))},V=()=>{_.disconnect(p),p.disconnect(y),_.disconnect(v),v.disconnect(m),m.disconnect(x),x.disconnect(y),S=!1,w!==null&&(w(),w=null)};return a(ya(R,y),O,V)},sn=()=>new DOMException("","NotSupportedError"),FE={numberOfChannels:1},YE=(r,t,e,i,a)=>class extends r{constructor(u,h,d){let p;if(typeof u=="number"&&h!==void 0&&d!==void 0)p={length:h,numberOfChannels:u,sampleRate:d};else if(typeof u=="object")p=u;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:_,sampleRate:v}={...FE,...p},y=i(_,m,v);t(Go,()=>Go(y))||y.addEventListener("statechange",(()=>{let x=0;const w=S=>{this._state==="running"&&(x>0?(y.removeEventListener("statechange",w),S.stopImmediatePropagation(),this._waitForThePromiseToSettle(S)):x+=1)};return w})()),super(y,_),this._length=m,this._nativeOfflineAudioContext=y,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,wb(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},XE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jE=(r,t,e,i,a,l,u)=>class extends r{constructor(d,p){const m=a(d),_={...XE,...p},v=e(m,_),y=l(m),x=y?i():null,w=d.sampleRate/2;super(d,!1,v,x),this._detune=t(this,y,v.detune,153600,-153600),this._frequency=t(this,y,v.frequency,w,-w),this._nativeOscillatorNode=v,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?u(this,d):null;this._nativeOscillatorNode.onended=p;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===p?d:m}get type(){return this._nativeOscillatorNode.type}set type(d){this._nativeOscillatorNode.type=d,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(d){this._nativeOscillatorNode.setPeriodicWave(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=d)}start(d=0){if(this._nativeOscillatorNode.start(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=d),this.context.state!=="closed"){da(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),qi(this)&&Yo(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(d=0){this._nativeOscillatorNode.stop(d),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=d)}},WE=(r,t,e,i,a)=>()=>{const l=new WeakMap;let u=null,h=null,d=null;const p=async(m,_)=>{let v=e(m);const y=Qe(v,_);if(!y){const x={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,detune:v.detune.value,frequency:v.frequency.value,periodicWave:u===null?void 0:u,type:v.type};v=t(_,x),h!==null&&v.start(h),d!==null&&v.stop(d)}return l.set(_,v),y?(await r(_,m.detune,v.detune),await r(_,m.frequency,v.frequency)):(await i(_,m.detune,v.detune),await i(_,m.frequency,v.frequency)),await a(m,_,v),v};return{set periodicWave(m){u=m},set start(m){h=m},set stop(m){d=m},render(m,_){const v=l.get(_);return v!==void 0?Promise.resolve(v):p(m,_)}}},ZE={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},QE=(r,t,e,i,a,l,u)=>class extends r{constructor(d,p){const m=a(d),_={...ZE,...p},v=e(m,_),y=l(m),x=y?i():null;super(d,!1,v,x),this._nativePannerNode=v,this._orientationX=t(this,y,v.orientationX,tn,bn),this._orientationY=t(this,y,v.orientationY,tn,bn),this._orientationZ=t(this,y,v.orientationZ,tn,bn),this._positionX=t(this,y,v.positionX,tn,bn),this._positionY=t(this,y,v.positionY,tn,bn),this._positionZ=t(this,y,v.positionZ,tn,bn),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(d){this._nativePannerNode.coneInnerAngle=d}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(d){this._nativePannerNode.coneOuterAngle=d}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(d){this._nativePannerNode.coneOuterGain=d}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(d){this._nativePannerNode.distanceModel=d}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(d){this._nativePannerNode.maxDistance=d}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(d){this._nativePannerNode.panningModel=d}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(d){this._nativePannerNode.refDistance=d}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(d){this._nativePannerNode.rolloffFactor=d}},$E=(r,t,e,i,a,l,u,h,d,p)=>()=>{const m=new WeakMap;let _=null;const v=async(y,x)=>{let w=null,S=l(y);const A={channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation},R={...A,coneInnerAngle:S.coneInnerAngle,coneOuterAngle:S.coneOuterAngle,coneOuterGain:S.coneOuterGain,distanceModel:S.distanceModel,maxDistance:S.maxDistance,panningModel:S.panningModel,refDistance:S.refDistance,rolloffFactor:S.rolloffFactor},O=Qe(S,x);if("bufferSize"in S)w=i(x,{...A,gain:1});else if(!O){const V={...R,orientationX:S.orientationX.value,orientationY:S.orientationY.value,orientationZ:S.orientationZ.value,positionX:S.positionX.value,positionY:S.positionY.value,positionZ:S.positionZ.value};S=a(x,V)}if(m.set(x,w===null?S:w),w!==null){if(_===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=new u(6,y.context.length,x.sampleRate),$=t(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});$.connect(j.destination),_=(async()=>{const rt=await Promise.all([y.orientationX,y.orientationY,y.orientationZ,y.positionX,y.positionY,y.positionZ].map(async(ot,ut)=>{const T=e(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ut===0?1:0});return await h(j,ot,T.offset),T}));for(let ot=0;ot<6;ot+=1)rt[ot].connect($,0,ot),rt[ot].start(0);return p(j)})()}const V=await _,k=i(x,{...A,gain:1});await d(y,x,k);const N=[];for(let j=0;j<V.numberOfChannels;j+=1)N.push(V.getChannelData(j));let H=[N[0][0],N[1][0],N[2][0]],I=[N[3][0],N[4][0],N[5][0]],F=i(x,{...A,gain:1}),L=a(x,{...R,orientationX:H[0],orientationY:H[1],orientationZ:H[2],positionX:I[0],positionY:I[1],positionZ:I[2]});k.connect(F).connect(L.inputs[0]),L.connect(w);for(let j=128;j<V.length;j+=128){const $=[N[0][j],N[1][j],N[2][j]],rt=[N[3][j],N[4][j],N[5][j]];if($.some((ot,ut)=>ot!==H[ut])||rt.some((ot,ut)=>ot!==I[ut])){H=$,I=rt;const ot=j/x.sampleRate;F.gain.setValueAtTime(0,ot),F=i(x,{...A,gain:0}),L=a(x,{...R,orientationX:H[0],orientationY:H[1],orientationZ:H[2],positionX:I[0],positionY:I[1],positionZ:I[2]}),F.gain.setValueAtTime(1,ot),k.connect(F).connect(L.inputs[0]),L.connect(w)}}return w}return O?(await r(x,y.orientationX,S.orientationX),await r(x,y.orientationY,S.orientationY),await r(x,y.orientationZ,S.orientationZ),await r(x,y.positionX,S.positionX),await r(x,y.positionY,S.positionY),await r(x,y.positionZ,S.positionZ)):(await h(x,y.orientationX,S.orientationX),await h(x,y.orientationY,S.orientationY),await h(x,y.orientationZ,S.orientationZ),await h(x,y.positionX,S.positionX),await h(x,y.positionY,S.positionY),await h(x,y.positionZ,S.positionZ)),_a(S)?await d(y,x,S.inputs[0]):await d(y,x,S),S};return{render(y,x){const w=m.get(x);return w!==void 0?Promise.resolve(w):v(y,x)}}},KE={disableNormalization:!1},JE=(r,t,e,i)=>class zb{constructor(l,u){const h=t(l),d=i({...KE,...u}),p=r(h,d);return e.add(p),p}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===zb.prototype||e.has(l)}},tk=(r,t)=>(e,i,a)=>(r(i).replay(a),t(i,e,a)),ek=(r,t,e)=>async(i,a,l)=>{const u=r(i);await Promise.all(u.activeInputs.map((h,d)=>Array.from(h).map(async([p,m])=>{const v=await t(p).render(p,a),y=i.context.destination;!e(p)&&(i!==y||!e(i))&&v.connect(l,m,d)})).reduce((h,d)=>[...h,...d],[]))},nk=(r,t,e)=>async(i,a,l)=>{const u=t(i);await Promise.all(Array.from(u.activeInputs).map(async([h,d])=>{const m=await r(h).render(h,a);e(h)||m.connect(l,d)}))},ik=(r,t,e,i)=>a=>r(Go,()=>Go(a))?Promise.resolve(r(i,i)).then(l=>{if(!l){const u=e(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(l=>{const u=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=h=>{u.disconnect(),l(h.renderedBuffer)},u.connect(a.destination),a.startRendering()}),sk=r=>(t,e)=>{r.set(t,e)},rk=r=>(t,e)=>r.set(t,e),ak=(r,t,e,i,a,l,u,h)=>(d,p)=>e(d).render(d,p).then(()=>Promise.all(Array.from(i(p)).map(m=>e(m).render(m,p)))).then(()=>a(p)).then(m=>(typeof m.copyFromChannel!="function"?(u(m),ap(m)):t(l,()=>l(m))||h(m),r.add(m),m)),ok={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},lk=(r,t,e,i,a,l)=>class extends r{constructor(h,d){const p=a(h),m={...ok,...d},_=e(p,m),v=l(p),y=v?i():null;super(h,!1,_,y),this._pan=t(this,v,_.pan)}get pan(){return this._pan}},ck=(r,t,e,i,a)=>()=>{const l=new WeakMap,u=async(h,d)=>{let p=e(h);const m=Qe(p,d);if(!m){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=t(d,_)}return l.set(d,p),m?await r(d,h.pan,p.pan):await i(d,h.pan,p.pan),_a(p)?await a(h,d,p.inputs[0]):await a(h,d,p),p};return{render(h,d){const p=l.get(d);return p!==void 0?Promise.resolve(p):u(h,d)}}},uk=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},hk=(r,t)=>async()=>{if(r===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),a=URL.createObjectURL(e);let l=!1,u=!1;try{await i.audioWorklet.addModule(a);const h=new r(i,"a",{numberOfOutputs:0}),d=i.createOscillator();h.port.onmessage=()=>l=!0,h.onprocessorerror=()=>u=!0,d.connect(h),d.start(0),await i.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(a)}return l&&!u},dk=(r,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),i=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{e.oncomplete=()=>{i.disconnect(),a(e.currentTime!==0)},e.startRendering()})},fk=()=>new DOMException("","UnknownError"),pk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},mk=(r,t,e,i,a,l,u)=>class extends r{constructor(d,p){const m=a(d),_={...pk,...p},v=e(m,_),x=l(m)?i():null;super(d,!0,v,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=v,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(d){if(d===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(d.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=d}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(d){this._nativeWaveShaperNode.oversample=d}},gk=(r,t,e)=>()=>{const i=new WeakMap,a=async(l,u)=>{let h=t(l);if(!Qe(h,u)){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,curve:h.curve,oversample:h.oversample};h=r(u,p)}return i.set(u,h),_a(h)?await e(l,u,h.inputs[0]):await e(l,u,h),h};return{render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):a(l,u)}}},_k=()=>typeof window>"u"?null:window,yk=(r,t)=>e=>{e.copyFromChannel=(i,a,l=0)=>{const u=r(l),h=r(a);if(h>=e.numberOfChannels)throw t();const d=e.length,p=e.getChannelData(h),m=i.length;for(let _=u<0?-u:0;_+u<d&&_<m;_+=1)i[_]=p[_+u]},e.copyToChannel=(i,a,l=0)=>{const u=r(l),h=r(a);if(h>=e.numberOfChannels)throw t();const d=e.length,p=e.getChannelData(h),m=i.length;for(let _=u<0?-u:0;_+u<d&&_<m;_+=1)p[_+u]=i[_]}},vk=r=>t=>{t.copyFromChannel=(e=>(i,a,l=0)=>{const u=r(l),h=r(a);if(u<t.length)return e.call(t,i,h,u)})(t.copyFromChannel),t.copyToChannel=(e=>(i,a,l=0)=>{const u=r(l),h=r(a);if(u<t.length)return e.call(t,i,h,u)})(t.copyToChannel)},bk=r=>(t,e)=>{const i=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=i),r(t,"buffer",a=>()=>{const l=a.call(t);return l===i?null:l},a=>l=>a.call(t,l===null?i:l))},xk=(r,t)=>(e,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const a=e.createBufferSource();t(i,()=>{const h=i.numberOfInputs;for(let d=0;d<h;d+=1)a.connect(i,0,d)},()=>a.disconnect(i))},Bb=(r,t,e)=>r.copyFromChannel===void 0?r.getChannelData(e)[0]:(r.copyFromChannel(t,e),t[0]),Hb=r=>{if(r===null)return!1;const t=r.length;return t%2!==0?r[Math.floor(t/2)]!==0:r[t/2-1]+r[t/2]!==0},Qo=(r,t,e,i)=>{let a=r;for(;!a.hasOwnProperty(t);)a=Object.getPrototypeOf(a);const{get:l,set:u}=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(r,t,{get:e(l),set:i(u)})},Sk=r=>({...r,outputChannelCount:r.outputChannelCount!==void 0?r.outputChannelCount:r.numberOfInputs===1&&r.numberOfOutputs===1?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}),Tk=r=>({...r,channelCount:r.numberOfOutputs}),wk=r=>{const{imag:t,real:e}=r;return t===void 0?e===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(e,()=>0),real:e}:e===void 0?{...r,imag:t,real:Array.from(t,()=>0)}:{...r,imag:t,real:e}},Pb=(r,t,e)=>{try{r.setValueAtTime(t,e)}catch(i){if(i.code!==9)throw i;Pb(r,t,e+1e-7)}},Ck=r=>{const t=r.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},Ak=r=>{const t=r.createBufferSource(),e=r.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},Mk=r=>{const t=r.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},hp=r=>{const t=r.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},Vb=r=>{const t=r.createBuffer(1,1,44100),e=r.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},dp=r=>{const t=r.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},Ek=r=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(r)}finally{t.close(),e.close()}},kk=r=>{r.start=(t=>(e=0,i=0,a)=>{const l=r.buffer,u=l===null?i:Math.min(l.duration,i);l!==null&&u>l.duration-.5/r.context.sampleRate?t.call(r,e,0,0):t.call(r,e,u,a)})(r.start)},Ib=(r,t)=>{const e=t.createGain();r.connect(e);const i=(a=>()=>{a.call(r,e),r.removeEventListener("ended",i)})(r.disconnect);r.addEventListener("ended",i),ya(r,e),r.stop=(a=>{let l=!1;return(u=0)=>{if(l)try{a.call(r,u)}catch{e.gain.setValueAtTime(0,u)}else a.call(r,u),l=!0}})(r.stop)},va=(r,t)=>e=>{const i={value:r};return Object.defineProperties(e,{currentTarget:i,target:i}),typeof t=="function"?t.call(r,e):t.handleEvent.call(r,e)},Rk=QA(fr),Dk=nM(fr),Ok=p2(nu),Ub=new WeakMap,Nk=O2(Ub),ii=FM(new Map,new WeakMap),mi=_k(),Gb=lE(ii,vi),fp=D2(nn),Ue=ek(nn,fp,ur),zk=oM(Gb,te,Ue),Kt=B2(eu),Yi=BE(mi),Lt=K2(Yi),Lb=new WeakMap,qb=w2(va),$o=dE(mi),pp=W2($o),mp=Z2(mi),Fb=Q2(mi),Lo=pE(mi),me=OM($A(_b),eM(Rk,Dk,qc,Ok,Fc,nn,Nk,Fo,te,fr,qi,ur,Nc),ii,q2(kf,Fc,nn,te,Uo,qi),vi,iu,sn,u2(qc,kf,nn,te,Uo,Kt,qi,Lt),_2(Lb,nn,ei),qb,Kt,pp,mp,Fb,Lt,Lo),Bk=aM(me,zk,vi,Gb,Kt,Lt),gp=new WeakSet,$0=cE(mi),Yb=i2(new Uint32Array(1)),_p=yk(Yb,vi),yp=vk(Yb),Xb=cM(gp,ii,sn,$0,Yi,uk($0),_p,yp),su=iM(hn),jb=nk(fp,Xo,ur),bi=$M(jb),ba=hE(su,ii,Ck,Ak,Mk,hp,Vb,dp,kk,bk(Qo),Ib),xi=tk(N2(Xo),jb),Hk=dM(bi,ba,te,xi,Ue),si=NM(KA(yb),Lb,rp,zM,FA,YA,XA,jA,WA,Af,mb,$o,Pb),Pk=hM(me,Hk,si,Oe,ba,Kt,Lt,va),Vk=xM(me,SM,vi,Oe,fE(hn,Qo),Kt,Lt,Ue),Ik=qM(bi,Ob,te,xi,Ue),pr=rk(Ub),Uk=LM(me,si,Ik,iu,Ob,Kt,Lt,pr),ws=aE(fr,mp),Gk=xk(Oe,ws),Cs=xE($o,Gk),Lk=jM(Cs,te,Ue),qk=XM(me,Lk,Cs,Kt,Lt),Fk=QM(Wo,te,Ue),Yk=ZM(me,Fk,Wo,Kt,Lt,Tk),Xk=wE(su,ba,hn,ws),xa=TE(su,ii,Xk,hp,dp),jk=n2(bi,xa,te,xi,Ue),Wk=e2(me,si,jk,xa,Kt,Lt,va),Wb=CE(sn,Qo),Zk=a2(Wb,te,Ue),Qk=r2(me,Zk,Wb,Kt,Lt,pr),$k=f2(bi,Nb,te,xi,Ue),Kk=d2(me,si,$k,Nb,Kt,Lt,pr),Zb=AE(sn),Jk=x2(bi,Zb,te,xi,Ue),tR=b2(me,si,Jk,Zb,sn,Kt,Lt,pr),eR=k2(bi,hn,te,xi,Ue),nR=E2(me,si,eR,hn,Kt,Lt),iR=RE(iu,Oe,Zo,sn),ru=ik(ii,hn,Zo,dk(hn,Yi)),sR=L2(ba,te,Yi,Ue,ru),rR=ME(iR),aR=U2(me,rR,sR,Kt,Lt,pr),oR=TM(si,Cs,xa,Zo,sn,Bb,Lt,Qo),Qb=new WeakMap,lR=rE(Vk,oR,qb,Lt,Qb,va),$b=HE(su,ii,hp,Vb,dp,Ib),cR=WE(bi,$b,te,xi,Ue),uR=jE(me,si,$b,cR,Kt,Lt,va),Kb=JM(ba),hR=qE(Kb,Oe,hn,Hb,ws),au=LE(Kb,Oe,hR,Hb,ws,$o,Qo),dR=VE(qc,Oe,Cs,hn,Zo,au,sn,Fc,Bb,ws),Jb=PE(dR),fR=$E(bi,Cs,xa,hn,Jb,te,Yi,xi,Ue,ru),pR=QE(me,si,Jb,fR,Kt,Lt,pr),mR=IE(vi),gR=JE(mR,Kt,new WeakSet,wk),_R=GE(Cs,Wo,hn,au,sn,ws),tx=UE(_R,sn),yR=ck(bi,tx,te,xi,Ue),vR=lk(me,si,tx,yR,Kt,Lt),bR=gk(au,te,Ue),xR=mk(me,Oe,au,bR,Kt,Lt,pr),ex=J2(mi),vp=C2(mi),nx=new WeakMap,SR=H2(nx,Yi),TR=ex?tM(ii,sn,T2(mi),vp,A2(ZA),Kt,SR,Lt,Lo,new WeakMap,new WeakMap,hk(Lo,Yi),mi):void 0,wR=$2(pp,Lt),CR=c2(gp,ii,l2,S2,new WeakSet,Kt,wR,Gc,Go,_p,yp),ix=UM(TR,Bk,Xb,Pk,Uk,qk,Yk,Wk,Qk,CR,Kk,tR,nR,aR,lR,uR,pR,gR,vR,xR),AR=tE(me,DE,Kt,Lt),MR=nE(me,OE,Kt,Lt),ER=iE(me,NE,Kt,Lt),kR=zE(Oe,Lt),RR=sE(me,kR,Kt),DR=bM(ix,Oe,sn,fk,AR,MR,ER,RR,$o),bp=P2(Qb),OR=sM(bp),sx=KM(vi),NR=m2(bp),rx=y2(vi),ax=new WeakMap,zR=R2(ax,ei),BR=bE(sx,vi,Oe,Cs,Wo,xa,hn,Zo,sn,rx,vp,zR,ws),HR=gE(Oe,BR,hn,sn,ws),PR=IM(bi,sx,ba,Cs,Wo,xa,hn,NR,rx,vp,te,Lo,Yi,xi,Ue,ru),VR=z2(nx),IR=sk(ax),K0=ex?HM(OR,me,si,PR,HR,nn,VR,Kt,Lt,Lo,Sk,IR,Ek,va):void 0,UR=o2(sn,Yi),GR=ak(gp,ii,fp,bp,ru,Gc,_p,yp),LR=YE(ix,ii,Oe,UR,GR),qR=F2(eu,pp),FR=Y2(sp,mp),YR=X2(rp,Fb),XR=j2(eu,Lt);function Gn(r){return r===void 0}function Rt(r){return r!==void 0}function jR(r){return typeof r=="function"}function gi(r){return typeof r=="number"}function ar(r){return Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object}function ox(r){return typeof r=="boolean"}function Cn(r){return Array.isArray(r)}function Fi(r){return typeof r=="string"}function Ec(r){return Fi(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function vt(r,t){if(!r)throw new Error(t)}function xs(r,t,e=1/0){if(!(t<=r&&r<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${r}`)}function lx(r){!r.isOffline&&r.state!=="running"&&ou('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let cx=!1,J0=!1;function tv(r){cx=r}function WR(r){Gn(r)&&cx&&!J0&&(J0=!0,ou("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let ux=console;function ZR(...r){ux.log(...r)}function ou(...r){ux.warn(...r)}function QR(r){return new DR(r)}function $R(r,t,e){return new LR(r,t,e)}const xn=typeof self=="object"?self:null,KR=xn&&(xn.hasOwnProperty("AudioContext")||xn.hasOwnProperty("webkitAudioContext"));function JR(r,t,e){return vt(Rt(K0),"AudioWorkletNode only works in a secure context (https or localhost)"),new(r instanceof(xn==null?void 0:xn.BaseAudioContext)?xn==null?void 0:xn.AudioWorkletNode:K0)(r,t,e)}function ri(r,t,e,i){var a=arguments.length,l=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,t,e,i);else for(var h=r.length-1;h>=0;h--)(u=r[h])&&(l=(a<3?u(l):a>3?u(t,e,l):u(t,e))||l);return a>3&&l&&Object.defineProperty(t,e,l),l}function Se(r,t,e,i){function a(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function h(m){try{p(i.next(m))}catch(_){u(_)}}function d(m){try{p(i.throw(m))}catch(_){u(_)}}function p(m){m.done?l(m.value):a(m.value).then(h,d)}p((i=i.apply(r,t||[])).next())})}class tD{constructor(t,e,i,a){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function hr(r){return YR(r)}function bs(r){return FR(r)}function zc(r){return XR(r)}function na(r){return qR(r)}function eD(r){return r instanceof Xb}function nD(r,t){return r==="value"||hr(t)||bs(t)||eD(t)}function or(r,...t){if(!t.length)return r;const e=t.shift();if(ar(r)&&ar(e))for(const i in e)nD(i,e[i])?r[i]=e[i]:ar(e[i])?(r[i]||Object.assign(r,{[i]:{}}),or(r[i],e[i])):Object.assign(r,{[i]:e[i]});return or(r,...t)}function iD(r,t){return r.length===t.length&&r.every((e,i)=>t[i]===e)}function xt(r,t,e=[],i){const a={},l=Array.from(t);if(ar(l[0])&&i&&!Reflect.has(l[0],i)&&(Object.keys(l[0]).some(h=>Reflect.has(r,h))||(or(a,{[i]:l[0]}),e.splice(e.indexOf(i),1),l.shift())),l.length===1&&ar(l[0]))or(a,l[0]);else for(let u=0;u<e.length;u++)Rt(l[u])&&(a[e[u]]=l[u]);return or(r,a)}function sD(r){return r.constructor.getDefaults()}function lr(r,t){return Gn(r)?t:r}function zf(r,t){return t.forEach(e=>{Reflect.has(r,e)&&delete r[e]}),r}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Xi{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||xn&&this.toString()===xn.TONE_DEBUG_CLASS)&&ZR(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Xi.version=pb;const xp=1e-6;function fa(r,t){return r>t+xp}function Bf(r,t){return fa(r,t)||$n(r,t)}function Wc(r,t){return r+xp<t}function $n(r,t){return Math.abs(r-t)<xp}function rD(r,t,e){return Math.max(Math.min(r,e),t)}class Ln extends Xi{constructor(){super(),this.name="Timeline",this._timeline=[];const t=xt(Ln.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(vt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];vt(Bf(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const i=this._search(t,e);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const i=this._search(t);return i-1>=0?this._timeline[i-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if($n(this._timeline[e].time,t)){for(let i=e;i>=0&&$n(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Bf(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let i=0;const a=this._timeline.length;let l=a;if(a>0&&this._timeline[a-1][e]<=t)return a-1;for(;i<l;){let u=Math.floor(i+(l-i)/2);const h=this._timeline[u],d=this._timeline[u+1];if($n(h[e],t)){for(let p=u;p<this._timeline.length;p++){const m=this._timeline[p];if($n(m[e],t))u=p;else break}return u}else{if(Wc(h[e],t)&&fa(d[e],t))return u;fa(h[e],t)?l=u:i=u+1}}return-1}_iterate(t,e=0,i=this._timeline.length-1){this._timeline.slice(e,i+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const i=this._search(t);return i!==-1&&this._iterate(e,0,i),this}forEachAfter(t,e){const i=this._search(t);return this._iterate(e,i+1),this}forEachBetween(t,e,i){let a=this._search(t),l=this._search(e);return a!==-1&&l!==-1?(this._timeline[a].time!==t&&(a+=1),this._timeline[l].time===e&&(l-=1),this._iterate(i,a,l)):a===-1&&this._iterate(i,0,l),this}forEachFrom(t,e){let i=this._search(t);for(;i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this}forEachAtTime(t,e){const i=this._search(t);if(i!==-1&&$n(this._timeline[i].time,t)){let a=i;for(let l=i;l>=0&&$n(this._timeline[l].time,t);l--)a=l;this._iterate(l=>{e(l)},a,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const hx=[];function lu(r){hx.push(r)}function aD(r){hx.forEach(t=>t(r))}const dx=[];function cu(r){dx.push(r)}function oD(r){dx.forEach(t=>t(r))}class Ko extends Xi{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(a=>{Gn(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(e)}),this}once(t,e){const i=(...a)=>{e(...a),this.off(t,i)};return this.on(t,i),this}off(t,e){return t.split(/\W+/).forEach(a=>{if(Gn(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Gn(e))this._events[a]=[];else{const l=this._events[a];for(let u=l.length-1;u>=0;u--)l[u]===e&&l.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const i=this._events[t].slice(0);for(let a=0,l=i.length;a<l;a++)i[a].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const i=Object.getOwnPropertyDescriptor(Ko.prototype,e);Object.defineProperty(t.prototype,e,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class fx extends Ko{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Jo extends fx{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ln,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=xt(Jo.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=QR({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new tD(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(aD(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,i){return this._context.createBuffer(t,e,i)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,i){return this._context.createPeriodicWave(t,e,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return vt(na(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return vt(na(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return vt(na(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){vt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){vt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){vt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){vt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return JR(this.rawContext,t,e)}addAudioWorkletModule(t){return Se(this,void 0,void 0,function*(){vt(Rt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return Se(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return na(this._context)?this._context.resume():Promise.resolve()}close(){return Se(this,void 0,void 0,function*(){na(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&oD(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0);for(let l=0;l<i.length;l++)i[l]=t;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=e,a.loop=!0,a.start(0),this._constants.set(t,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:i+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const i=++this._timeoutIds,a=()=>{const l=this.now();this._timeouts.add({callback:()=>{t(),a()},id:i,time:l+e})};return a(),i}}class lD extends fx{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,i){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return Se(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function de(r,t){Cn(t)?t.forEach(e=>de(r,e)):Object.defineProperty(r,t,{enumerable:!0,writable:!1})}function px(r,t){Cn(t)?t.forEach(e=>px(r,e)):Object.defineProperty(r,t,{writable:!0})}const Vt=()=>{};class Jt extends Xi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Vt;const t=xt(Jt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Fi(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Vt,onload:Vt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Sn().sampleRate}set(t){return t instanceof Jt?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return Se(this,void 0,void 0,function*(){const e=Jt.load(t).then(i=>{this.set(i),this.onload(this)});Jt.downloads.push(e);try{yield e}finally{const i=Jt.downloads.indexOf(e);Jt.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Cn(t)&&t[0].length>0,i=e?t.length:1,a=e?t[0].length:t.length,l=Sn(),u=l.createBuffer(i,a,l.sampleRate),h=!e&&i===1?[t]:t;for(let d=0;d<i;d++)u.copyToChannel(h[d],d);return this._buffer=u,this}toMono(t){if(gi(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const i=this.numberOfChannels;for(let a=0;a<i;a++){const l=this.toArray(a);for(let u=0;u<l.length;u++)e[u]+=l[u]}e=e.map(a=>a/i),this.fromArray(e)}return this}toArray(t){if(gi(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){vt(this.loaded,"Buffer is not loaded");const i=Math.floor(t*this.sampleRate),a=Math.floor(e*this.sampleRate);vt(i<a,"The start time must be less than the end time");const l=a-i,u=Sn().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let h=0;h<this.numberOfChannels;h++)u.copyToChannel(this.getChannelData(h).subarray(i,a),h);return new Jt(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Jt().fromArray(t)}static fromUrl(t){return Se(this,void 0,void 0,function*(){return yield new Jt().load(t)})}static load(t){return Se(this,void 0,void 0,function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const d=e[1].split("|");let p=d[0];for(const m of d)if(Jt.supportsType(m)){p=m;break}t=t.replace(e[0],p)}const i=Jt.baseUrl===""||Jt.baseUrl.endsWith("/")?Jt.baseUrl:Jt.baseUrl+"/",a=document.createElement("a");a.href=i+t,a.pathname=(a.pathname+a.hash).split("/").map(encodeURIComponent).join("/");const l=yield fetch(a.href);if(!l.ok)throw new Error(`could not load url: ${t}`);const u=yield l.arrayBuffer();return yield Sn().decodeAudioData(u)})}static supportsType(t){const e=t.split("."),i=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return Se(this,void 0,void 0,function*(){for(yield Promise.resolve();Jt.downloads.length;)yield Jt.downloads[0]})}}Jt.baseUrl="";Jt.downloads=[];class Sp extends Jo{constructor(){super({clockSource:"offline",context:zc(arguments[0])?arguments[0]:$R(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:zc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=zc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return Se(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const i=Math.floor(this.sampleRate/128);t&&e%i===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return Se(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Jt(e)})}close(){return Promise.resolve()}}const mx=new lD;let sr=mx;function Sn(){return sr===mx&&KR&&cD(new Jo),sr}function cD(r,t=!1){t&&sr.dispose(),na(r)?sr=new Jo(r):zc(r)?sr=new Sp(r):sr=r}function uD(){return sr.resume()}if(xn&&!xn.TONE_SILENCE_LOGGING){const t=` * Tone.js v${pb} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function hD(r){return Math.pow(10,r/20)}function dD(r){return 20*(Math.log(r)/Math.LN10)}function gx(r){return Math.pow(2,r/12)}let uu=440;function fD(){return uu}function pD(r){uu=r}function rr(r){return Math.round(_x(r))}function _x(r){return 69+12*Math.log2(r/uu)}function yx(r){return uu*Math.pow(2,(r-69)/12)}class Tp extends Xi{constructor(t,e,i){super(),this.defaultUnits="s",this._val=e,this._units=i,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const i=parseInt(t,10),a=e==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/i)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,i)=>{let a=0;return t&&t!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(a+=this._beatsToUnits(parseFloat(e))),i&&i!=="0"&&(a+=this._beatsToUnits(parseFloat(i)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Tp&&this.fromType(this._val),Gn(this._val))return this._noArg();if(Fi(this._val)&&Gn(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(ar(this._val)){let t=0;for(const e in this._val)if(Rt(this._val[e])){const i=this._val[e],a=new this.constructor(this.context,e).valueOf()*i;t+=a}return t}if(Rt(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Fi(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Kn extends Tp{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Kn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const i=new this.constructor(this.context,t).valueOf(),a=this.valueOf(),h=Math.round(a/i)*i-a;return a+h*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let l=1;l<9;l++){const u=Math.pow(2,l);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let i=e[0],a=new Kn(this.context,e[0]).toSeconds();return e.forEach(l=>{const u=new Kn(this.context,l).toSeconds();Math.abs(u-t)<Math.abs(a-t)&&(i=l,a=u)}),i}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const i=Math.floor(e/this._getTimeSignature());let a=e%1*4;e=Math.floor(e)%this._getTimeSignature();const l=a.toString();return l.length>3&&(a=parseFloat(parseFloat(l).toFixed(3))),[i,e,a].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return rr(this.toFrequency())}_now(){return this.context.now()}}class Tn extends Kn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return fD()}static set A4(t){pD(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:Tn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const a=mD[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?a:Tn.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,i){let a=1;return t&&t!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(a*=this._beatsToUnits(parseFloat(e))),i&&i!=="0"&&(a*=this._beatsToUnits(parseFloat(i)/4)),a}}})}transpose(t){return new Tn(this.context,this.valueOf()*gx(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return rr(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Tn.A4);let i=Math.round(12*e)+57;const a=Math.floor(i/12);return a<0&&(i+=-12*a),gD[i%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return yx(t)}static ftom(t){return rr(t)}}const mD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},gD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class No extends Kn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class je extends Xi{constructor(){super();const t=xt(je.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Sn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return WR(t),new Kn(this.context,t).toSeconds()}toFrequency(t){return new Tn(this.context,t).toFrequency()}toTicks(t){return new No(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(i=>{Gn(t[i])&&delete e[i]}),e}get(){const t=sD(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const i=this[e];Rt(i)&&Rt(i.value)&&Rt(i.setValueAtTime)?t[e]=i.value:i instanceof je?t[e]=i._getPartialProperties(t[e]):Cn(i)||gi(i)||Fi(i)||ox(i)?t[e]=i:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Rt(this[e])&&(this[e]&&Rt(this[e].value)&&Rt(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof je?this[e].set(t[e]):this[e]=t[e])}),this}}class hu extends Ln{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,i){return xs(e,0),this.add(Object.assign({},i,{state:t,time:e})),this}getLastState(t,e){const i=this._search(e);for(let a=i;a>=0;a--){const l=this._timeline[a];if(l.state===t)return l}}getNextState(t,e){const i=this._search(e);if(i!==-1)for(let a=i;a<this._timeline.length;a++){const l=this._timeline[a];if(l.state===t)return l}}}class re extends je{constructor(){const t=xt(re.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,vt(Rt(t.param)&&(hr(t.param)||t.param instanceof re),"param must be an AudioParam");!hr(t.param);)t.param=t.param._param;this._swappable=Rt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ln(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Rt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Rt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Rt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Rt(this.maxValue)&&Rt(this.minValue)&&xs(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?hD(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?dD(t):t}setValueAtTime(t,e){const i=this.toSeconds(e),a=this._fromType(t);return vt(isFinite(a)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,i),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),a=this._events.get(e);let l=this._initialValue;if(a===null)l=this._initialValue;else if(a.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let h;u===null?h=this._initialValue:h=u.value,a.type==="setTargetAtTime"&&(l=this._exponentialApproach(a.time,h,a.value,a.constant,e))}else if(i===null)l=a.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const h=this._events.getBefore(a.time);h===null?u=this._initialValue:u=h.value}i.type==="linearRampToValueAtTime"?l=this._linearInterpolate(a.time,u,i.time,i.value,e):l=this._exponentialInterpolate(a.time,u,i.time,i.value,e)}else l=a.value;return this._toType(l)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const i=this._fromType(t),a=this.toSeconds(e);return vt(isFinite(i)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this._events.add({time:a,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,a),this._param.linearRampToValueAtTime(i,a),this}exponentialRampToValueAtTime(t,e){let i=this._fromType(t);i=$n(i,0)?this._minOutput:i,this._assertRange(i);const a=this.toSeconds(e);return vt(isFinite(i)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,a),this._param.exponentialRampToValueAtTime(i,a),this}exponentialRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this}linearRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this}targetRampTo(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this}exponentialApproachValueAtTime(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);const a=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,a),this.cancelAndHoldAtTime(e+i*.9),this.linearRampToValueAtTime(t,e+i),this}setTargetAtTime(t,e,i){const a=this._fromType(t);vt(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(e);return this._assertRange(a),vt(isFinite(a)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:i,time:l,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",t,l,i),this._param.setTargetAtTime(a,l,i),this}setValueCurveAtTime(t,e,i,a=1){i=this.toSeconds(i),e=this.toSeconds(e);const l=this._fromType(t[0])*a;this.setValueAtTime(this._toType(l),e);const u=i/(t.length-1);for(let h=1;h<t.length;h++){const d=this._fromType(t[h])*a;this.linearRampToValueAtTime(this._toType(d),e+h*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return vt(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));vt(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);const a=this._events.get(e),l=this._events.getAfter(e);return a&&$n(a.time,e)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),e):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this}rampTo(t,e=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const i=this._events.get(e);if(i&&i.type==="setTargetAtTime"){const a=this._events.getAfter(i.time),l=a?a.time:e+2,u=(l-e)/10;for(let h=e;h<l;h+=u)t.linearRampToValueAtTime(this.getValueAtTime(h),h)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?t.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?t.setTargetAtTime(a.value,a.time,a.constant):t[a.type](a.value,a.time)}),this}setParam(t){vt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,i,a,l){return i+(e-i)*Math.exp(-(l-t)/a)}_linearInterpolate(t,e,i,a,l){return e+(a-e)*((l-t)/(i-t))}_exponentialInterpolate(t,e,i,a,l){return e*Math.pow(a/e,(l-t)/(i-t))}}class Et extends je{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Rt(this.input)?hr(this.input)||this.input instanceof re?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Rt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Rt(t)&&(t instanceof Et||bs(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=>{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();vt(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,i=0){return Sa(this,t,e,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ou("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,i=0){return _D(this,t,e,i),this}chain(...t){return Hf(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Rt(this.input)&&(this.input instanceof Et?this.input.dispose():bs(this.input)&&this.input.disconnect()),Rt(this.output)&&(this.output instanceof Et?this.output.dispose():bs(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Hf(...r){const t=r.shift();r.reduce((e,i)=>(e instanceof Et?e.connect(i):bs(e)&&Sa(e,i),i),t)}function Sa(r,t,e=0,i=0){for(vt(Rt(r),"Cannot connect from undefined node"),vt(Rt(t),"Cannot connect to undefined node"),(t instanceof Et||bs(t))&&vt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),vt(r.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Et||t instanceof re;)Rt(t.input)&&(t=t.input);for(;r instanceof Et;)Rt(r.output)&&(r=r.output);hr(t)?r.connect(t,e):r.connect(t,e,i)}function _D(r,t,e=0,i=0){if(Rt(t))for(;t instanceof Et;)t=t.input;for(;!bs(r);)Rt(r.output)&&(r=r.output);hr(t)?r.disconnect(t,e):bs(t)?r.disconnect(t,e,i):r.disconnect()}class We extends Et{constructor(){const t=xt(We.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new re({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),de(this,"gain")}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class pa extends Et{constructor(t){super(t),this.onended=Vt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new We({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const i=this.toSeconds(e);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Et.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Vt})}_startGain(t,e=1){vt(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){vt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Vt&&(this.onended(this),this.onended=Vt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),vt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Vt,this}}class wp extends pa{constructor(){const t=xt(wp.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Sa(this._source,this._gainNode),this.offset=new re({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(pa.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ne extends Et{constructor(){const t=xt(Ne.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new wp({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Et.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,i=0){return Cp(this,t,e,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,i){return this._param.exponentialRampTo(t,e,i),this}linearRampTo(t,e,i){return this._param.linearRampTo(t,e,i),this}targetRampTo(t,e,i){return this._param.targetRampTo(t,e,i),this}exponentialApproachValueAtTime(t,e,i){return this._param.exponentialApproachValueAtTime(t,e,i),this}setTargetAtTime(t,e,i){return this._param.setTargetAtTime(t,e,i),this}setValueCurveAtTime(t,e,i,a){return this._param.setValueCurveAtTime(t,e,i,a),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,i){return this._param.rampTo(t,e,i),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Cp(r,t,e,i){(t instanceof re||hr(t)||t instanceof Ne&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ne&&(t.overridden=!0)),Sa(r,t,e,i)}class Ap extends re{constructor(){const t=xt(Ap.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Ln(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(re.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);const a=this._fromType(t),l=this._events.get(e),u=Math.round(Math.max(1/i,1));for(let h=0;h<=u;h++){const d=i*h+e,p=this._exponentialApproach(l.time,l.value,a,i,d);this.linearRampToValueAtTime(this._toType(p),d)}return this}setValueAtTime(t,e){const i=this.toSeconds(e);super.setValueAtTime(t,e);const a=this._events.get(i),l=this._events.previousEvent(a),u=this._getTicksUntilEvent(l,i);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const i=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const a=this._events.get(i),l=this._events.previousEvent(a),u=this._getTicksUntilEvent(l,i);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const i=this._fromType(t),a=this._events.get(e),l=Math.round(Math.max((e-a.time)*10,1)),u=(e-a.time)/l;for(let h=0;h<=l;h++){const d=u*h+a.time,p=this._exponentialInterpolate(a.time,a.value,e,i,d);this.linearRampToValueAtTime(this._toType(p),d)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Gn(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const i=this._fromType(this.getValueAtTime(t.time));let a=this._fromType(this.getValueAtTime(e));const l=this._events.get(e);return l&&l.time===e&&l.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(i+a)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)}getDurationOfTicks(t,e){const i=this.toSeconds(e),a=this.getTicksAtTime(e);return this.getTimeOfTick(a+t)-i}getTimeOfTick(t){const e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&i.type==="linearRampToValueAtTime"&&e.value!==i.value){const a=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(i.time))-a)/(i.time-e.time),h=Math.sqrt(Math.pow(a,2)-2*u*(e.ticks-t)),d=(-a+h)/u,p=(-a-h)/u;return(d>0?d:p)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const i=this.toSeconds(e),a=this.toSeconds(t),l=this.getTicksAtTime(i);return this.getTicksAtTime(i+a)-l}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class Mp extends Ne{constructor(){const t=xt(Mp.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new Ap({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ne.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Ep extends je{constructor(){const t=xt(Ep.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new hu,this._tickOffset=new Ln,this._ticksAtTime=new Ln,this._secondsAtTime=new Ln,this.frequency=new Mp({context:this.context,units:t.units,value:t.frequency}),de(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},je.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const i=this.toSeconds(t);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),Rt(e)&&this.setTicksAtTime(e,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),i=this._state.getLastState("stopped",e),a=this._ticksAtTime.get(e),l={state:"paused",time:e};this._state.add(l);let u=a||i,h=a?a.ticks:0,d=null;return this._state.forEachBetween(u.time,e+this.sampleTime,p=>{let m=u.time;const _=this._tickOffset.get(p.time);_&&_.time>=u.time&&(h=_.ticks,m=_.time),u.state==="started"&&p.state!=="started"&&(h+=this.frequency.getTicksAtTime(p.time)-this.frequency.getTicksAtTime(m),p.time!==l.time&&(d={state:p.state,time:p.time,ticks:h})),u=p}),this._state.remove(l),d&&this._ticksAtTime.add(d),h}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),i={state:"paused",time:t};this._state.add(i);const a=this._secondsAtTime.get(t);let l=a||e,u=a?a.seconds:0,h=null;return this._state.forEachBetween(l.time,t+this.sampleTime,d=>{let p=l.time;const m=this._tickOffset.get(d.time);m&&m.time>=l.time&&(u=m.seconds,p=m.time),l.state==="started"&&d.state!=="started"&&(u+=d.time-p,d.time!==i.time&&(h={state:d.state,time:d.time,seconds:u})),l=d}),this._state.remove(i),h&&this._secondsAtTime.add(h),u}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const i=this._tickOffset.get(e),a=this._state.get(e),l=Math.max(i.time,a.time),u=this.frequency.getTicksAtTime(l)+t-i.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,i){let a=this._state.get(t);this._state.forEachBetween(t,e,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,t),u.time-this.sampleTime,i),a=u});let l=null;if(a&&a.state==="started"){const u=Math.max(a.time,t),h=this.frequency.getTicksAtTime(u),d=this.frequency.getTicksAtTime(a.time),p=h-d;let m=Math.ceil(p)-p;m=$n(m,1)?0:m;let _=this.frequency.getTimeOfTick(h+m);for(;_<e;){try{i(_,Math.round(this.getTicksAtTime(_)))}catch(v){l=v;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class du extends je{constructor(){const t=xt(du.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Vt,this._lastUpdate=0,this._state=new hu("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new Ep({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,de(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(je.getDefaults(),{callback:Vt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){lx(this.context);const i=this.toSeconds(t);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const i=this.toSeconds(e),a=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(a+t,i)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,i=>{switch(i.state){case"started":const a=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,a);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(t,e,(i,a)=>{this.callback(i,a)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ko.mixin(du);class Ta extends Et{constructor(){const t=xt(Ta.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new We({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,de(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class kp extends Et{constructor(){const t=xt(kp.getDefaults(),arguments);super(t),this.name="Destination",this.input=new Ta({context:this.context}),this.output=new We({context:this.context}),this.volume=this.input.volume,Hf(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Hf(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}lu(r=>{r.destination=new kp({context:r})});cu(r=>{r.destination.dispose()});class yD extends Et{constructor(){super(...arguments),this.name="Listener",this.positionX=new re({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new re({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new re({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new re({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new re({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new re({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new re({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new re({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new re({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Et.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}lu(r=>{r.listener=new yD({context:r})});cu(r=>{r.listener.dispose()});class Rp extends Xi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=xt(Rp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const i=t.urls[e];this.add(e,i,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Vt,onload:Vt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return vt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,i=Vt,a=Vt){return Fi(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Jt(this.baseUrl+e,i,a))):this._buffers.set(t.toString(),new Jt(e,i,a)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Zc extends Tn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return rr(super._frequencyToUnits(t))}_ticksToUnits(t){return rr(super._ticksToUnits(t))}_beatsToUnits(t){return rr(super._beatsToUnits(t))}_secondsToUnits(t){return rr(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return yx(this.toMidi())}transpose(t){return new Zc(this.context,this.toMidi()+t)}}class In extends No{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class vD extends je{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ln,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}lu(r=>{r.draw=new vD({context:r})});cu(r=>{r.draw.dispose()});class bD extends Xi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){vt(Rt(t.time),"Events must have a time property"),vt(Rt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new xD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const i of e)if(i.event===t){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let i,a=null;if(e>0)if(t.left.right===null)i=t.left,i.right=t.right,a=i;else{for(i=t.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,a=i.parent,i.left=t.left,i.right=t.right)}else if(t.right.left===null)i=t.right,i.left=t.left,a=i;else{for(i=t.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,a=i.parent,i.left=t.left,i.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),a&&this._rebalance(a)}t.dispose()}_rotateLeft(t){const e=t.parent,i=t.isLeftChild(),a=t.right;a&&(t.right=a.left,a.left=t),e!==null?i?e.left=a:e.right=a:this._setRoot(a)}_rotateRight(t){const e=t.parent,i=t.isLeftChild(),a=t.left;a&&(t.left=a.right,a.right=t),e!==null?i?e.left=a:e.right=a:this._setRoot(a)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let i=e[0];for(let a=1;a<e.length;a++)e[a].low>i.low&&(i=e[a]);return i.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(i=>e.push(i)),e.forEach(i=>{i.event&&t(i.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const i=[];this._root.search(t,i),i.forEach(a=>{a.event&&e(a.event)})}return this}forEachFrom(t,e){if(this._root!==null){const i=[];this._root.searchAfter(t,i),i.forEach(a=>{a.event&&e(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class xD{constructor(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class SD extends Xi{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ln({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class ma extends Et{constructor(){super(xt(ma.getDefaults(),arguments,["context"]))}connect(t,e=0,i=0){return Cp(this,t,e,i),this}}class tl extends ma{constructor(){const t=xt(tl.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Cn(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):jR(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ne.getDefaults(),{length:1024})}setMap(t,e=1024){const i=new Float32Array(e);for(let a=0,l=e;a<l;a++){const u=a/(l-1)*2-1;i[a]=t(u,a)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(i=>i.includes(t));vt(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Dp extends ma{constructor(){const t=xt(Dp.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new tl({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(ma.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ss{constructor(t,e){this.id=Ss._eventId++,this._remainderTime=0;const i=Object.assign(Ss.getDefaults(),e);this.transport=t,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:Vt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ss._eventId=0;class Op extends Ss{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(Op.getDefaults(),e);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ss.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return Wc(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new In(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){Wc(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new In(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);fa(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class fu extends je{constructor(){const t=xt(fu.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new SD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ln,this._repeatedEvents=new bD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new du({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),de(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(je.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const i=e%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(i*Math.PI)*this._swingAmount;t+=new In(this.context,this._swingTicks*2/3).toSeconds()*a}tv(!0),this._timeline.forEachAtTime(e,i=>i.invoke(t)),tv(!1)}schedule(t,e){const i=new Ss(this,{callback:t,time:new No(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(t,e,i,a=1/0){const l=new Op(this,{callback:t,duration:new Kn(this.context,a).toTicks(),interval:new Kn(this.context,e).toTicks(),time:new No(this.context,i).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(t,e){const i=new Ss(this,{callback:t,once:!0,time:new No(this.context,e).toTicks()});return this._addEvent(i,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(e,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new In(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let i;return Rt(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Cn(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Kn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Kn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new In(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new In(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(e),a=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,e),l=e+a;this.emit("stop",l),this._clock.setTicksAtTime(t,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),i=this.getTicksAtTime(e),a=t-i%t;return this._clock.nextTickTime(a,e)}}syncSignal(t,e){const i=this.now();let a=this.bpm,l=1/(60/a.getValueAtTime(i)/this.PPQ),u=[];if(t.units==="time"){const d=.015625/l,p=new We(d),m=new Dp(-1),_=new We(d);a.chain(p,m,_),a=_,l=1/l,u=[p,m,_]}e||(t.getValueAtTime(i)!==0?e=t.getValueAtTime(i)/l:e=0);const h=new We(e);return a.connect(h),h.connect(t._param),u.push(h),this._syncedSignals.push({initial:t.value,nodes:u,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const i=this._syncedSignals[e];i.signal===t&&(i.nodes.forEach(a=>a.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),px(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ko.mixin(fu);lu(r=>{r.transport=new fu({context:r})});cu(r=>{r.transport.dispose()});class An extends Et{constructor(t){super(t),this.input=void 0,this._state=new hu("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Vt,this._syncedStop=Vt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ta({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,de(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,onstop:Vt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,i){let a=Gn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")vt(fa(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,e,i);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const l=this._state.get(a);l&&(l.offset=this.toSeconds(lr(e,0)),l.duration=i?this.toSeconds(i):void 0);const u=this.context.transport.schedule(h=>{this._start(h,e,i)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else lx(this.context),this._start(a,e,i);return this}stop(t){let e=Gn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||Rt(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const i=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(i)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,i){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(fa(e,0)){const i=this._state.get(e);if(i&&i.state==="started"&&i.time!==e){const a=e-this.toSeconds(i.time);let l;i.duration&&(l=this.toSeconds(i.duration)-a),this._start(t,this.toSeconds(i.offset)+a,l)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Vt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class pu extends pa{constructor(){const t=xt(pu.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Sa(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new re({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Jt(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(pa.getDefaults(),{url:new Jt,loop:!1,loopEnd:0,loopStart:0,onload:Vt,onerror:Vt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,i,a=1){vt(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(t);this._startGain(l,a),this.loop?e=lr(e,this.loopStart):e=lr(e,0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const h=this.toSeconds(this.loopEnd)||this.buffer.duration,d=this.toSeconds(this.loopStart),p=h-d;Bf(u,h)&&(u=(u-d)%p+d),$n(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Wc(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,u)),Rt(i)){let h=this.toSeconds(i);h=Math.max(h,0),this.stop(l+h)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function mr(r,t){return Se(this,void 0,void 0,function*(){const e=t/r.context.sampleRate,i=new Sp(1,e,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/e,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class Np extends pa{constructor(){const t=xt(Np.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Sa(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new re({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new re({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),de(this,["frequency","detune"])}static getDefaults(){return Object.assign(pa.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class be extends An{constructor(){const t=xt(be.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),de(this,"frequency"),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),de(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(An.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),i=new Np({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return be._periodicWaveCache.find(e=>e.phase===this._phase&&iD(e.partials,this._partials));{const t=be._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const i=this._getCachedPeriodicWave();if(Rt(i)){const{partials:a,wave:l}=i;this._wave=l,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,l]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(a,l);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),be._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),be._periodicWaveCache.length>100&&be._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){xs(t,0);let e=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(e=i[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const a=new Float32Array(t);this._partials.forEach((l,u)=>a[u]=l),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(t,e){let a=2048;const l=new Float32Array(a),u=new Float32Array(a);let h=1;if(t==="custom"){if(h=this._partials.length+1,this._partialCount=this._partials.length,a=h,this._partials.length===0)return[l,u]}else{const d=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);d?(h=parseInt(d[2],10)+1,this._partialCount=parseInt(d[2],10),t=d[1],h=Math.max(h,2),a=h):this._partialCount=0,this._partials=[]}for(let d=1;d<a;++d){const p=2/(d*Math.PI);let m;switch(t){case"sine":m=d<=h?1:0,this._partials[d-1]=m;break;case"square":m=d&1?2*p:0,this._partials[d-1]=m;break;case"sawtooth":m=p*(d&1?1:-1),this._partials[d-1]=m;break;case"triangle":d&1?m=2*(p*p)*(d-1>>1&1?-1:1):m=0,this._partials[d-1]=m;break;case"custom":m=this._partials[d-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}m!==0?(l[d]=-m*Math.sin(e*d),u[d]=m*Math.cos(e*d)):(l[d]=0,u[d]=0)}return[l,u]}_inverseFFT(t,e,i){let a=0;const l=t.length;for(let u=0;u<l;u++)a+=t[u]*Math.cos(u*i)+e[u]*Math.sin(u*i);return a}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let i=0;const a=Math.PI*2,l=32;for(let u=0;u<l;u++)i=Math.max(this._inverseFFT(t,e,u/l*a),i);return rD(-this._inverseFFT(t,e,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}be._periodicWaveCache=[];class TD extends ma{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new tl({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ga extends Ne{constructor(){const t=xt(ga.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new We({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ne.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class mu extends An{constructor(){const t=xt(mu.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new TD({context:this.context}),this._modulationNode=new We({context:this.context}),this._carrier=new be({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new be({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ga({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),de(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(be.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class gu extends An{constructor(){const t=xt(gu.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new We({context:this.context,gain:0}),this._carrier=new be({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new be({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new ga({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new ga({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),de(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(be.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class el extends An{constructor(){const t=xt(el.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new We({context:this.context,gain:0}),this._thresh=new tl({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Ne({context:this.context,units:"audioRange",value:t.width}),this._triangle=new be({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),de(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(An.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class _u extends An{constructor(){const t=xt(_u.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,de(this,["frequency","detune"])}static getDefaults(){return Object.assign(be.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,i=t/(this._oscillators.length-1);this._forEach((a,l)=>a.detune.value=e+i*l)}}get count(){return this._oscillators.length}set count(t){if(xs(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const i=new be({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):Vt});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,i)=>e.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class yu extends An{constructor(){const t=xt(yu.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ga({context:this.context,value:2}),this._pulse=new el({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new be({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),de(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(An.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ev={am:mu,fat:_u,fm:gu,oscillator:be,pulse:el,pwm:yu};class Qc extends An{constructor(){const t=xt(Qc.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),de(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(be.getDefaults(),gu.getDefaults(),mu.getDefaults(),_u.getDefaults(),el.getDefaults(),yu.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=ev[t],i=this.now();if(this._oscillator){const a=this._oscillator;a.stop(i),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof ev[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&gi(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&gi(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Fi(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Se(this,arguments,void 0,function*(t=1024){return mr(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function vx(r,t=1/0){const e=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(l){xs(l,r,t),e.set(this,l)}})}}function ji(r,t=1/0){const e=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(l){xs(this.toSeconds(l),r,t),e.set(this,l)}})}}class vu extends An{constructor(){const t=xt(vu.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Jt({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(An.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Vt,onerror:Vt,playbackRate:1,reverse:!1})}load(t){return Se(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Vt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,i){return super.start(t,e,i),this}_start(t,e,i){this._loop?e=lr(e,this._loopStart):e=lr(e,0);const a=this.toSeconds(e),l=i;i=lr(i,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(i);u=u/this._playbackRate,t=this.toSeconds(t);const h=new pu({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(h),this._loop&&Gn(l)?h.start(t,a):h.start(t,a,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(i=>i.stop(e))}restart(t,e,i){return super.restart(t,e,i),this}_restart(t,e,i){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(t),this._start(t,e,i)}seek(t,e){const i=this.toSeconds(e);if(this._state.getValueAtTime(i)==="started"){const a=this.toSeconds(t);this._stop(i),this._start(i,a)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&xs(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&xs(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),i=this._state.getNextState("stopped",e);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ri([ji(0)],vu.prototype,"fadeIn",void 0);ri([ji(0)],vu.prototype,"fadeOut",void 0);class As extends Et{constructor(){const t=xt(As.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Ne({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Et.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Fi(t))return t;{let i;for(i in kc)if(kc[i][e]===t)return i;return t}}_setCurve(t,e,i){if(Fi(i)&&Reflect.has(kc,i)){const a=kc[i];ar(a)?t!=="_decayCurve"&&(this[t]=a[e]):this[t]=a}else if(Cn(i)&&t!=="_decayCurve")this[t]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let a=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){const h=1/a;a=(1-u)/h}if(a<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,a,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,a,t);else{this._sig.cancelAndHoldAtTime(t);let h=this._attackCurve;for(let d=1;d<h.length;d++)if(h[d-1]<=u&&u<=h[d]){h=this._attackCurve.slice(d),h[0]=u;break}this._sig.setValueCurveAtTime(h,t,a,e)}if(l&&this.sustain<1){const h=e*this.sustain,d=t+a;this.log("decay",d),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(h,l+d):this._sig.exponentialApproachValueAtTime(h,d,l)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,t):(vt(Cn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,i,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,i=1){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,i=0){return Cp(this,t,e,i),this}asArray(){return Se(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,i=new Sp(1,e,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=a+this.toSeconds(this.release),u=l*.1,h=l+u,d=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/h,decay:e*this.toSeconds(this.decay)/h,release:e*this.toSeconds(this.release)/h,context:i}));return d._sig.toDestination(),d.triggerAttackRelease(e*(a+u)/h,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ri([ji(0)],As.prototype,"attack",void 0);ri([ji(0)],As.prototype,"decay",void 0);ri([vx(0,1)],As.prototype,"sustain",void 0);ri([ji(0)],As.prototype,"release",void 0);const kc=(()=>{let t,e;const i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));const a=[],l=6.4;for(t=0;t<127;t++){e=t/127;const v=Math.sin(e*(Math.PI*2)*l-Math.PI/2)+1;a[t]=v/10+e*.83}a[127]=1;const u=[],h=5;for(t=0;t<128;t++)u[t]=Math.ceil(t/127*h)/h;const d=[];for(t=0;t<128;t++)e=t/127,d[t]=.5*(1-Math.cos(Math.PI*e));const p=[];for(t=0;t<128;t++){e=t/127;const v=Math.pow(e,3)*4+.2,y=Math.cos(v*Math.PI*2*e);p[t]=Math.abs(y*(1-e))}function m(v){const y=new Array(v.length);for(let x=0;x<v.length;x++)y[x]=1-v[x];return y}function _(v){return v.slice(0).reverse()}return{bounce:{In:m(p),Out:p},cosine:{In:i,Out:_(i)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:m(a)},sine:{In:d,Out:m(d)},step:{In:u,Out:m(u)}}})();class Ts extends Et{constructor(){const t=xt(Ts.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new Ta({context:this.context,volume:t.volume}),this.volume=this._volume.volume,de(this,"volume")}static getDefaults(){return Object.assign(Et.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const i=this["_original_"+t]=this[t];this[t]=(...a)=>{const l=a[e],u=this.context.transport.schedule(h=>{a[e]=h,i.apply(this,a)},l);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,i,a){const l=this.toSeconds(i),u=this.toSeconds(e);return this.triggerAttack(t,l,a),this.triggerRelease(l+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class dr extends Ts{constructor(){const t=xt(dr.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Ts.getDefaults(),{detune:0,onsilence:Vt,portamento:0})}triggerAttack(t,e,i=1){this.log("triggerAttack",t,e,i);const a=this.toSeconds(e);return this._triggerEnvelopeAttack(a,i),this.setNote(t,a),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const i=this.toSeconds(e),a=t instanceof Tn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,l,i)}else this.frequency.setValueAtTime(a,i);return this}}ri([ji(0)],dr.prototype,"portamento",void 0);class zp extends As{constructor(){super(xt(zp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new We({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class qo extends dr{constructor(){const t=xt(qo.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new Qc(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new zp(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),de(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(dr.getDefaults(),{envelope:Object.assign(zf(As.getDefaults(),Object.keys(Et.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(zf(Qc.getDefaults(),[...Object.keys(An.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+i+a)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class bu extends qo{constructor(){const t=xt(bu.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,de(this,["oscillator","envelope"])}static getDefaults(){return or(dr.getDefaults(),qo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const i=this.toSeconds(e),a=this.toFrequency(t instanceof Tn?t.toFrequency():t),l=a*this.octaves;return this.oscillator.frequency.setValueAtTime(l,i),this.oscillator.frequency.exponentialRampToValueAtTime(a,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ri([vx(0)],bu.prototype,"octaves",void 0);ri([ji(0)],bu.prototype,"pitchDecay",void 0);const bx=new Set;function Bp(r){bx.add(r)}function xx(r,t){const e=`registerProcessor("${r}", ${t})`;bx.add(e)}const wD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Bp(wD);const CD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Bp(CD);const AD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Bp(AD);const MD="feedback-comb-filter",ED=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;xx(MD,ED);class Hp extends Ts{constructor(){const t=xt(Hp.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),vt(!gi(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const i=this._voices.indexOf(this._dummyVoice);this._voices.splice(i,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Ts.getDefaults(),{maxPolyphony:32,options:{},voice:qo})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex(i=>i.voice===t);this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return vt(t instanceof dr,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}else ou("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,i){t.forEach(a=>{const l=new Zc(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,e,i),this._activeVoices.push({midi:l,voice:u,released:!1}),this.log("triggerAttack",a,e))})}_triggerRelease(t,e){t.forEach(i=>{const a=new Zc(this.context,i).toMidi(),l=this._activeVoices.find(({midi:u,released:h})=>u===a&&!h);l&&(l.voice.triggerRelease(e),l.released=!0,this.log("triggerRelease",i,e))})}_scheduleEvent(t,e,i,a){vt(!this.disposed,"Synth was already disposed"),i<=this.now()?t==="attack"?this._triggerAttack(e,i,a):this._triggerRelease(e,i):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,e,i,a)},i-this.now())}triggerAttack(t,e,i){Array.isArray(t)||(t=[t]);const a=this.toSeconds(e);return this._scheduleEvent("attack",t,a,i),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const i=this.toSeconds(e);return this._scheduleEvent("release",t,i),this}triggerAttackRelease(t,e,i,a){const l=this.toSeconds(i);if(this.triggerAttack(t,l,a),Cn(e)){vt(Cn(t),"If the duration is an array, the notes must also be an array"),t=t;for(let u=0;u<t.length;u++){const h=e[Math.min(u,e.length-1)],d=this.toSeconds(h);vt(d>0,"The duration must be greater than 0"),this.triggerRelease(t[u],l+d)}}else{const u=this.toSeconds(e);vt(u>0,"The duration must be greater than 0"),this.triggerRelease(t,l+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const e=zf(t,["onsilence","context"]);return this.options=or(this.options,e),this._voices.forEach(i=>i.set(e)),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach(({voice:i})=>{i.triggerRelease(e)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class xu extends Ts{constructor(){const t=xt(xu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(i=>{const a=parseInt(i,10);if(vt(Ec(i)||gi(a)&&isFinite(a),`url key is neither a note or midi pitch: ${i}`),Ec(i)){const l=new Tn(this.context,i).toMidi();e[l]=t.urls[i]}else gi(a)&&isFinite(a)&&(e[a]=t.urls[a])}),this._buffers=new Rp({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Ts.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Vt,onerror:Vt,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i<96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,i=1){return this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]),t.forEach(a=>{const l=_x(new Tn(this.context,a).toFrequency()),u=Math.round(l),h=l-u,d=this._findClosest(u),p=u-d,m=this._buffers.get(p),_=gx(d+h),v=new pu({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);v.start(e,0,m.duration/_,i),Cn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(v),v.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const y=this._activeSources.get(u),x=y.indexOf(v);x!==-1&&y.splice(x,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(i=>{const a=new Tn(this.context,i).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const l=this._activeSources.get(a);e=this.toSeconds(e),l.forEach(u=>{u.stop(e)}),this._activeSources.set(a,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,i,a=1){const l=this.toSeconds(i);return this.triggerAttack(t,l,a),Cn(e)?(vt(Cn(t),"notes must be an array when duration is array"),t.forEach((u,h)=>{const d=e[Math.min(h,e.length-1)];this.triggerRelease(u,l+this.toSeconds(d))})):this.triggerRelease(t,l+this.toSeconds(e)),this}add(t,e,i){if(vt(Ec(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Ec(t)){const a=new Tn(this.context,t).toMidi();this._buffers.add(a,e,i)}else this._buffers.add(t,e,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}ri([ji(0)],xu.prototype,"attack",void 0);ri([ji(0)],xu.prototype,"release",void 0);class Pp extends je{constructor(){const t=xt(Pp.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new hu("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(je.getDefaults(),{callback:Vt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let i;if(e.state==="started"){e.id!==-1&&this.context.transport.clear(e.id);const a=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||gi(this._loop)&&this._loop>1){i=1/0,gi(this._loop)&&(i=this._loop*this._getLoopDuration());const l=this._state.getAfter(a);l!==null&&(i=Math.min(i,l.time-a)),i!==1/0&&(i=new In(this.context,i));const u=new In(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new In(this.context,a),i)}else e.id=this.context.transport.schedule(this._tick.bind(this),new In(this.context,a))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return this._state.getValueAtTime(e)==="stopped"&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if(this._state.getValueAtTime(e)==="started"){this._state.setStateAtTime("stopped",e,{id:-1});const i=this._state.getBefore(e);let a=e;i!==null&&(a=i.time),this._rescheduleEvents(a)}return this}cancel(t){t=lr(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,i=>{this.context.transport.clear(i.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(e)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;ox(this.humanize)||(i=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*i}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new In(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new In(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(e!==null&&e.state==="started"){const i=this._getLoopDuration();return(t-e.time)%i/i}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Vp extends Et{constructor(){const t=xt(Vp.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new re({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",de(this,"pan")}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const kD="bit-crusher",RD=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;xx(kD,RD);class ve extends Et{constructor(){const t=xt(ve.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new We({context:this.context}),ve._allSolos.has(this.context)||ve._allSolos.set(this.context,new Set),ve._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Et.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),ve._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ve._soloed.has(this.context)||ve._soloed.set(this.context,new Set),ve._soloed.get(this.context).add(this)}_removeSolo(){ve._soloed.has(this.context)&&ve._soloed.get(this.context).delete(this)}_isSoloed(){return ve._soloed.has(this.context)&&ve._soloed.get(this.context).has(this)}_noSolos(){return!ve._soloed.has(this.context)||ve._soloed.has(this.context)&&ve._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ve._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ve._allSolos=new Map;ve._soloed=new Map;class Ip extends Et{constructor(){const t=xt(Ip.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new Vp({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ta({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,de(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class sa extends Et{constructor(){const t=xt(sa.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new ve({solo:t.solo,context:this.context}),this._panVol=this.output=new Ip({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),de(this,["pan","volume"])}static getDefaults(){return Object.assign(Et.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return sa.buses.has(t)||sa.buses.set(t,new We({context:this.context})),sa.buses.get(t)}send(t,e=0){const i=this._getBus(t),a=new We({context:this.context,units:"decibels",gain:e});return this.connect(a),a.connect(i),a}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}sa.buses=new Map;Sn().transport;function DD(){return Sn().transport}Sn().destination;Sn().destination;Sn().listener;Sn().draw;Sn();class OD{constructor(){G(this,"transport");G(this,"synth");G(this,"isInitialized",!1);G(this,"midiNotes",new Map);this.transport=DD(),this.transport.bpm.value=120,this.synth=new Hp().toDestination()}async init(){this.isInitialized||(await uD(),this.isInitialized=!0,this.setupEvents())}setupEvents(){const t=ua.getInstance();t.on("daw:midi:note:added",({note:e})=>{this.scheduleNote(e)}),t.on("daw:midi:note:removed",({note:e})=>{this.removeNote(e)}),t.on("daw:midi:note:moved",({note:e})=>{this.removeNote(e),this.scheduleNote(e)}),t.on("daw:midi:note:resized",({note:e})=>{this.removeNote(e),this.scheduleNote(e)}),t.on("daw:audio:preview",({note:e})=>{this.previewNote(e)})}scheduleNote(t){const e=`${t.pitch}-${t.time}`,i=this.getMidiNoteName(t.pitch),a=`${t.time}*4n`,l=`${t.duration}*4n`,u=t.velocity/127,h=new Pp(d=>{this.synth.triggerAttackRelease(i,l,d,u)},{});h.start(a),this.midiNotes.set(e,h)}removeNote(t){const e=`${t.pitch}-${t.time}`,i=this.midiNotes.get(e);i&&(i.dispose(),this.midiNotes.delete(e))}previewNote(t){this.synth.triggerAttackRelease(t,"8n")}getMidiNoteName(t){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(t/12)-1;return`${e[t%12]}${i}`}play(){this.transport.start()}pause(){this.transport.pause()}stop(){this.transport.stop()}setBPM(t){this.transport.bpm.value=t}getCurrentTime(){return this.transport.seconds}setPosition(t){this.transport.seconds=t}playTestNote(t="C4",e="8n"){this.synth.triggerAttackRelease(t,e)}playChord(t=["C4","E4","G4"],e="4n"){this.synth.triggerAttackRelease(t,e)}playScale(){["C4","D4","E4","F4","G4","A4","B4","C5"].forEach((e,i)=>{this.transport.schedule(a=>{this.synth.triggerAttackRelease(e,"8n")},`+${i*.25}`)})}destroy(){this.transport.stop(),this.transport.cancel(),this.midiNotes.forEach(t=>t.dispose()),this.midiNotes.clear(),this.synth.dispose(),Sn().dispose()}}const Zn=class Zn extends Ze{constructor(e){super();G(this,"background");G(this,"dragHandle");G(this,"nameText");G(this,"isDragging",!1);G(this,"dragStartY",0);G(this,"originalY",0);this.track=e,this.init()}init(){this.background=new wt,this.createBackground(),this.dragHandle=new wt,this.createDragHandle(),this.createTrackName(),this.setupDragEvents()}createBackground(){this.background.fill({color:3355443}).rect(Zn.HANDLE_WIDTH,0,Zn.WIDTH-Zn.HANDLE_WIDTH,Zn.HEIGHT),this.container.addChild(this.background)}createDragHandle(){this.dragHandle.fill({color:4473924}).rect(0,0,Zn.HANDLE_WIDTH,Zn.HEIGHT),this.dragHandle.fill({color:6710886}).rect(8,32,14,2).rect(8,37,14,2).rect(8,42,14,2),this.dragHandle.eventMode="static",this.dragHandle.cursor="grab",this.dragHandle.on("pointerover",()=>{this.isDragging||(this.dragHandle.tint=6710886,this.dragHandle.fill({color:8947848}).rect(8,32,14,2).rect(8,37,14,2).rect(8,42,14,2))}).on("pointerout",()=>{this.isDragging||(this.dragHandle.tint=16777215,this.dragHandle.fill({color:6710886}).rect(8,32,14,2).rect(8,37,14,2).rect(8,42,14,2))}),this.container.addChild(this.dragHandle)}createTrackName(){this.nameText=new Ie({text:this.track.name,style:{fontSize:14*(window.devicePixelRatio||1),fill:16777215,fontFamily:"Arial",align:"left"}}),this.nameText.scale.set(1/(window.devicePixelRatio||1)),this.nameText.position.set(40,30),this.nameText.eventMode="static",this.nameText.cursor="pointer",this.nameText.on("click",this.handleNameClick.bind(this)),this.container.addChild(this.nameText)}setupDragEvents(){this.dragHandle.eventMode="static",this.dragHandle.cursor="grab";let e=0;const i=16;let a=0;const l=h=>{if(!this.isDragging)return;const d=performance.now();if(d-e>=i){const p=h.clientY;a=p,this.eventManager.emit("track:drag",{trackId:this.track.id,y:p}),e=d}},u=()=>{this.isDragging&&(this.isDragging=!1,this.dragHandle.cursor="grab",this.dragHandle.tint=16777215,this.dragHandle.fill({color:6710886}).rect(8,32,14,2).rect(8,37,14,2).rect(8,42,14,2),window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",u),this.eventManager.emit("track:dragend",{trackId:this.track.id,y:a}))};this.dragHandle.on("pointerdown",h=>{this.isDragging=!0,this.dragStartY=h.global.y,this.originalY=this.container.parent.y,a=h.global.y,this.dragHandle.cursor="grabbing",this.dragHandle.tint=8947848,this.dragHandle.fill({color:8947848}).rect(8,32,14,2).rect(8,37,14,2).rect(8,42,14,2),window.addEventListener("pointermove",l),window.addEventListener("pointerup",u),this.eventManager.emit("track:dragstart",{trackId:this.track.id,y:h.global.y})})}onDragStart(e){this.isDragging=!0,this.dragStartY=e.global.y,this.originalY=this.container.parent.y,this.dragHandle.cursor="grabbing",this.eventManager.emit("track:dragstart",{trackId:this.track.id,y:e.global.y})}onDragEnd(){this.isDragging&&(this.isDragging=!1,this.dragHandle.cursor="grab",this.eventManager.emit("track:dragend",{trackId:this.track.id,y:this.container.parent.y}))}handleNameClick(){const e=document.createElement("input");e.type="text",e.value=this.track.name,e.style.position="absolute",e.style.width="150px",e.style.height="24px",e.style.fontSize="14px",e.style.backgroundColor="#2d2d2d",e.style.color="#ffffff",e.style.border="1px solid #444",e.style.borderRadius="4px",e.style.padding="0 8px";const i=this.nameText.getGlobalPosition();e.style.left=`${i.x}px`,e.style.top=`${i.y}px`;const a=()=>{const l=e.value.trim()||this.track.name;this.setName(l),this.eventManager.emit("track:rename",{trackId:this.track.id,name:l}),document.body.removeChild(e)};e.onblur=a,e.onkeydown=l=>{l.key==="Enter"&&a(),l.key==="Escape"&&document.body.removeChild(e)},document.body.appendChild(e),e.focus(),e.select()}setName(e){this.track.name=e,this.nameText.text=e}setY(e){this.container.y=e}getY(){return this.container.y}destroy(){this.container.removeAllListeners(),this.container.destroy({children:!0})}updateName(e){this.nameText&&(this.track.name=e,this.nameText.text=e,this.nameText.style.fontSize=14*(window.devicePixelRatio||1),this.nameText.scale.set(1/(window.devicePixelRatio||1)))}update(){this.nameText&&(this.nameText.style.fontSize=14*(window.devicePixelRatio||1),this.nameText.scale.set(1/(window.devicePixelRatio||1))),this.createBackground(),this.createDragHandle()}};G(Zn,"WIDTH",200),G(Zn,"HEIGHT",80),G(Zn,"HANDLE_WIDTH",30);let Pf=Zn;class ND extends Ze{constructor(e,i,a,l){super();G(this,"background");G(this,"noteData");G(this,"gridSize");G(this,"noteHeight");G(this,"isDragging",!1);G(this,"isResizing",!1);G(this,"dragStartX",0);G(this,"dragStartY",0);G(this,"originalX",0);G(this,"originalY",0);G(this,"resizeHandle");G(this,"onDelete");this.noteData=e,this.gridSize=i,this.noteHeight=a,this.onDelete=l,this.init()}init(){this.background=new wt,this.resizeHandle=new wt,this.container.position.x=this.noteData.time*this.gridSize,this.container.position.y=0,this.drawNote(),this.setupEvents()}drawNote(){this.background.fill({color:4886754}).rect(0,0,this.noteData.duration*this.gridSize,this.noteHeight),this.resizeHandle.fill({color:2777768}).rect(this.noteData.duration*this.gridSize-5,0,5,this.noteHeight),this.container.addChild(this.background),this.container.addChild(this.resizeHandle)}setupEvents(){this.container.eventMode="static",this.container.cursor="move",this.resizeHandle.eventMode="static",this.resizeHandle.cursor="ew-resize",this.container.on("pointerdown",this.onDragStart.bind(this)),this.container.on("pointermove",this.onDragMove.bind(this)),this.container.on("pointerup",this.onDragEnd.bind(this)),this.container.on("pointerupoutside",this.onDragEnd.bind(this)),this.resizeHandle.on("pointerdown",this.onResizeStart.bind(this)),this.resizeHandle.on("pointermove",this.onResizeMove.bind(this)),this.resizeHandle.on("pointerup",this.onResizeEnd.bind(this)),this.resizeHandle.on("pointerupoutside",this.onResizeEnd.bind(this)),this.container.on("pointertap",e=>{e.detail===2&&this.onDelete()})}onDragStart(e){this.isResizing||(this.isDragging=!0,this.dragStartX=e.globalX,this.dragStartY=e.globalY,this.originalX=this.container.position.x,this.originalY=this.container.position.y,this.background.alpha=.7)}onDragMove(e){if(!this.isDragging)return;const i=e.globalX-this.dragStartX,a=e.globalY-this.dragStartY,l=Math.round((this.originalX+i)/this.gridSize)*this.gridSize;Math.round(a/this.noteHeight)*this.noteHeight,this.container.position.x=l}onDragEnd(){this.isDragging&&(this.isDragging=!1,this.background.alpha=1,this.noteData.time=Math.round(this.container.position.x/this.gridSize),this.eventManager.emit("daw:midi:note:moved",{note:this.noteData}))}onResizeStart(e){this.isResizing=!0,this.dragStartX=e.globalX,this.originalX=this.noteData.duration,e.stopPropagation()}onResizeMove(e){if(!this.isResizing)return;const i=e.globalX-this.dragStartX,a=Math.max(1,Math.round((this.originalX*this.gridSize+i)/this.gridSize));this.noteData.duration=a,this.redraw()}onResizeEnd(){this.isResizing&&(this.isResizing=!1,this.eventManager.emit("daw:midi:note:resized",{note:this.noteData}))}redraw(){this.background.clear(),this.resizeHandle.clear(),this.drawNote()}getData(){return{...this.noteData}}update(){}destroy(){this.background.destroy(),this.resizeHandle.destroy(),this.container.destroy({children:!0})}}class zD extends Ze{constructor(){super();G(this,"id");G(this,"container");G(this,"position");G(this,"size");G(this,"titleHeight");G(this,"minWidth");G(this,"minHeight");G(this,"minimized",!1);G(this,"background");G(this,"titleBar");G(this,"closeButton");G(this,"minimizeButton");G(this,"contentContainer");G(this,"isDragging",!1);G(this,"dragStart",{x:0,y:0});G(this,"isResizing",!1);G(this,"resizeStart",{x:0,y:0});G(this,"originalSize",{width:0,height:0});G(this,"gridContainer");G(this,"notesContainer");G(this,"pianoRoll");G(this,"notes",new Map);G(this,"width");G(this,"height");G(this,"gridSize",25);G(this,"noteHeight",20);G(this,"pianoRollWidth",100);G(this,"minNote",48);G(this,"maxNote",72);this.id="midi-editor",this.container=new Pt,this.container.zIndex=1e3,this.position={x:100,y:100},this.size={width:800,height:600},this.titleHeight=30,this.minWidth=400,this.minHeight=300,this.init()}init(){this.gridContainer=new Pt,this.notesContainer=new Pt,this.pianoRoll=new Pt,this.background=new wt,this.background.fill({color:2763306}).rect(0,0,this.size.width,this.size.height),this.titleBar=new wt,this.container.addChild(this.titleBar),this.contentContainer=new Pt,this.contentContainer.position.set(0,this.titleHeight),this.container.addChild(this.contentContainer),this.container.addChild(this.background),this.container.addChild(this.gridContainer),this.container.addChild(this.notesContainer),this.container.addChild(this.pianoRoll),this.initPianoRoll(),this.drawGrid(),this.createButtons(),this.draw(),this.setupEvents()}initPianoRoll(){this.pianoRoll.position.x=0;for(let e=this.maxNote;e>=this.minNote;e--){const i=[1,3,6,8,10].includes(e%12),a=new wt,l=(this.maxNote-e)*this.noteHeight;if(a.fill({color:i?0:16777215}).rect(0,l,this.pianoRollWidth,this.noteHeight),!i){const u=this.getMidiNoteName(e),h=new Ie({text:u,style:{fontSize:10,fill:0}});h.position.set(5,l+5),a.addChild(h)}a.eventMode="static",a.cursor="pointer",a.on("pointerdown",()=>{this.eventManager.emit("daw:audio:preview",{note:this.getMidiNoteName(e)})}),this.pianoRoll.addChild(a)}}drawGrid(){const e=new wt;e.position.x=this.pianoRollWidth;for(let a=0;a<=this.maxNote-this.minNote;a++){const l=a*this.noteHeight;e.setStrokeStyle({width:1,color:4473924,alpha:.5}).moveTo(0,l).lineTo(this.width-this.pianoRollWidth,l).stroke()}const i=Math.floor((this.width-this.pianoRollWidth)/this.gridSize);for(let a=0;a<=i;a++){const l=a*this.gridSize,u=a%4===0?.8:.3;e.setStrokeStyle({width:1,color:4473924,alpha:u}).moveTo(l,0).lineTo(l,this.height).stroke()}this.gridContainer.addChild(e)}createButtons(){this.closeButton=this.createButton("×",16733525),this.closeButton.position.set(this.size.width-30,0),this.closeButton.on("pointerdown",()=>this.close()),this.container.addChild(this.closeButton),this.minimizeButton=this.createButton("−",3815994),this.minimizeButton.position.set(this.size.width-60,0),this.minimizeButton.on("pointerdown",()=>this.toggleMinimize()),this.container.addChild(this.minimizeButton)}createButton(e,i){const a=new Pt,l=new wt().fill({color:i}).rect(0,0,30,this.titleHeight),u=new Ie({text:e,style:{fontSize:16,fill:16777215,fontFamily:"Arial"}});return u.position.set((30-u.width)/2,(this.titleHeight-u.height)/2),a.addChild(l,u),a.eventMode="static",a.cursor="pointer",a}draw(){this.background.clear().fill({color:2763306}).rect(0,0,this.size.width,this.size.height),this.titleBar.clear().fill({color:3815994}).rect(0,0,this.size.width,this.titleHeight).setStrokeStyle({width:1,color:4473924}).stroke().rect(0,this.titleHeight-1,this.size.width,1);const e=new Ie({text:"MIDI Editor",style:{fontSize:14,fill:16777215,fontFamily:"Arial"}});e.position.set(10,(this.titleHeight-e.height)/2),this.titleBar.addChild(e),this.closeButton.position.set(this.size.width-30,0),this.minimizeButton.position.set(this.size.width-60,0)}setupEvents(){this.notesContainer.position.x=this.pianoRollWidth,this.notesContainer.eventMode="static",this.notesContainer.on("pointerdown",i=>{const a=this.notesContainer.toLocal(i.global),l=this.maxNote-Math.floor(a.y/this.noteHeight),u=Math.floor(a.x/this.gridSize);l>=this.minNote&&l<=this.maxNote&&this.addNote({pitch:l,time:u,duration:1,velocity:100})}),this.titleBar.eventMode="static",this.titleBar.cursor="move",this.titleBar.on("pointerdown",this.startDrag.bind(this));const e=new wt().fill({color:0,alpha:0}).rect(this.size.width-10,this.size.height-10,10,10);this.container.addChild(e),e.eventMode="static",e.cursor="se-resize",e.on("pointerdown",this.startResize.bind(this)),this.app.stage.on("pointermove",this.handlePointerMove.bind(this)),this.app.stage.on("pointerup",this.handlePointerUp.bind(this))}startDrag(e){this.isDragging=!0,this.dragStart={x:e.global.x-this.position.x,y:e.global.y-this.position.y}}startResize(e){this.isResizing=!0,this.resizeStart={x:e.global.x,y:e.global.y},this.originalSize={...this.size}}handlePointerMove(e){if(this.isDragging)this.position={x:e.global.x-this.dragStart.x,y:e.global.y-this.dragStart.y},this.container.position.set(this.position.x,this.position.y);else if(this.isResizing){const i=e.global.x-this.resizeStart.x,a=e.global.y-this.resizeStart.y;this.size={width:Math.max(this.minWidth,this.originalSize.width+i),height:Math.max(this.minHeight,this.originalSize.height+a)},this.draw()}}handlePointerUp(){this.isDragging=!1,this.isResizing=!1}addNote(e){const i=new ND(e,this.gridSize,this.noteHeight,()=>this.removeNote(e)),a=`${e.pitch}-${e.time}`;this.notes.set(a,i),this.notesContainer.addChild(i.getContainer()),this.eventManager.emit("daw:midi:note:added",{note:e})}removeNote(e){const i=`${e.pitch}-${e.time}`,a=this.notes.get(i);a&&(a.destroy(),this.notes.delete(i),this.eventManager.emit("daw:midi:note:removed",{note:e}))}getMidiNoteName(e){const i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=Math.floor(e/12)-1;return`${i[e%12]}${a}`}getNotes(){return Array.from(this.notes.values()).map(e=>e.getData())}update(){}getContentContainer(){return this.contentContainer}enableDrag(){this.titleBar.eventMode="static",this.titleBar.cursor="move"}enableResize(){}enableClose(){this.closeButton.eventMode="static",this.closeButton.cursor="pointer"}enableMinimize(){this.minimizeButton.eventMode="static",this.minimizeButton.cursor="pointer"}toggleMinimize(){this.minimized=!this.minimized,this.contentContainer.visible=!this.minimized,this.size.height=this.minimized?this.titleHeight:this.originalSize.height,this.draw()}close(){this.container.visible=!1,this.eventManager.emit("daw:window:remove",{window:this})}bringToFront(){this.container.zIndex=1e3}destroy(){this.notes.forEach(e=>e.destroy()),this.background.destroy(),this.gridContainer.destroy({children:!0}),this.notesContainer.destroy({children:!0}),this.pianoRoll.destroy({children:!0}),this.container.destroy({children:!0})}}class BD extends Ze{constructor(e){super();G(this,"id");G(this,"position");G(this,"size");G(this,"titleHeight");G(this,"minWidth");G(this,"minHeight");G(this,"minimized",!1);G(this,"app");G(this,"background");G(this,"titleBar");G(this,"closeButton");G(this,"minimizeButton");G(this,"contentContainer");G(this,"isDragging",!1);G(this,"dragStart",{x:0,y:0});G(this,"isResizing",!1);G(this,"resizeStart",{x:0,y:0});G(this,"originalSize",{width:0,height:0});G(this,"midiEditor");this.app=e,this.id="midi-editor-window",this.position={x:100,y:100},this.size={width:800,height:600},this.titleHeight=30,this.minWidth=400,this.minHeight=300,this.init()}init(){this.background=new wt,this.background.fill({color:2763306}).rect(0,0,this.size.width,this.size.height),this.titleBar=new wt,this.container.addChild(this.titleBar),this.contentContainer=new Pt,this.contentContainer.position.set(0,this.titleHeight),this.container.addChild(this.contentContainer),this.container.addChild(this.background),this.midiEditor=new zD,this.contentContainer.addChild(this.midiEditor.getContainer()),this.createButtons(),this.draw(),this.setupEvents()}createButtons(){this.closeButton=this.createButton("×",16733525),this.closeButton.position.set(this.size.width-30,0),this.closeButton.on("pointerdown",()=>this.close()),this.container.addChild(this.closeButton),this.minimizeButton=this.createButton("−",3815994),this.minimizeButton.position.set(this.size.width-60,0),this.minimizeButton.on("pointerdown",()=>this.toggleMinimize()),this.container.addChild(this.minimizeButton)}createButton(e,i){const a=new Pt,l=new wt().fill({color:i}).rect(0,0,30,this.titleHeight),u=new Ie({text:e,style:{fontSize:20,fill:16777215,fontFamily:"Arial"}});u.position.set((30-u.width)/2,(this.titleHeight-u.height)/2),a.addChild(l,u),a.eventMode="static",a.cursor="pointer";const h=i,d=i===16733525?16742263:4868682;return a.on("pointerover",()=>{l.clear().fill({color:d}).rect(0,0,30,this.titleHeight)}),a.on("pointerout",()=>{l.clear().fill({color:h}).rect(0,0,30,this.titleHeight)}),a}draw(){this.titleBar.clear().fill({color:3815994}).rect(0,0,this.size.width,this.titleHeight),this.background.clear().fill({color:2763306}).rect(0,0,this.size.width,this.size.height),this.contentContainer.position.set(0,this.titleHeight),this.midiEditor.getContainer().position.set(0,0)}setupEvents(){this.titleBar.eventMode="static",this.titleBar.cursor="move",this.titleBar.on("pointerdown",i=>{this.isDragging=!0,this.dragStart={x:i.global.x-this.position.x,y:i.global.y-this.position.y}}),this.app.stage.on("pointermove",i=>{this.isDragging&&(this.position={x:i.global.x-this.dragStart.x,y:i.global.y-this.dragStart.y},this.container.position.set(this.position.x,this.position.y))}),this.app.stage.on("pointerup",()=>{this.isDragging=!1});const e=new wt().fill({color:3815994}).rect(this.size.width-10,this.size.height-10,10,10);this.container.addChild(e),e.eventMode="static",e.cursor="nwse-resize",e.on("pointerdown",i=>{this.isResizing=!0,this.resizeStart={x:i.global.x,y:i.global.y},this.originalSize={...this.size}}),this.app.stage.on("pointermove",i=>{if(this.isResizing){const a=i.global.x-this.resizeStart.x,l=i.global.y-this.resizeStart.y;this.size={width:Math.max(this.minWidth,this.originalSize.width+a),height:Math.max(this.minHeight,this.originalSize.height+l)},this.draw()}}),this.app.stage.on("pointerup",()=>{this.isResizing=!1})}update(){this.draw()}toggleMinimize(){this.minimized=!this.minimized,this.minimized?(this.contentContainer.visible=!1,this.size.height=this.titleHeight):(this.contentContainer.visible=!0,this.size.height=600),this.draw()}close(){this.eventManager.emit("daw:window:remove",{window:this.container})}destroy(){this.container.destroy({children:!0})}getContentContainer(){return this.contentContainer}enableDrag(){this.titleBar.eventMode="static",this.titleBar.cursor="move"}disableDrag(){this.titleBar.eventMode="none",this.titleBar.cursor="default"}enableResize(){const e=this.container.getChildByName("resizeHandle");e&&(e.eventMode="static",e.cursor="nwse-resize")}disableResize(){const e=this.container.getChildByName("resizeHandle");e&&(e.eventMode="none",e.cursor="default")}enableClose(){this.closeButton.eventMode="static",this.closeButton.cursor="pointer"}disableClose(){this.closeButton.eventMode="none",this.closeButton.cursor="default"}getMidiEditor(){return this.midiEditor}enableMinimize(){this.minimizeButton.eventMode="static",this.minimizeButton.cursor="pointer"}disableMinimize(){this.minimizeButton.eventMode="none",this.minimizeButton.cursor="default"}bringToFront(){this.container.parent&&this.container.parent.addChild(this.container)}}const ra=class ra extends Ze{constructor(e,i){super();G(this,"background");G(this,"resizeHandle");G(this,"nameText");G(this,"isDragging",!1);G(this,"isResizing",!1);G(this,"dragStartX",0);G(this,"originalX",0);G(this,"originalWidth",0);G(this,"gridSize");G(this,"midiEditor",null);G(this,"editorWindow",null);this.clipData=e,this.gridSize=i,this.background=new wt,this.resizeHandle=new wt,this.nameText=new Ie({text:this.clipData.name,style:{fontSize:12,fill:16777215,fontFamily:"Arial",fontWeight:"bold"}}),this.init()}init(){this.container=new Pt,this.container.position.set(this.clipData.startTime*this.gridSize,0),this.drawBackground(),this.createResizeHandle(),this.updateTextPosition(),this.container.addChild(this.background),this.container.addChild(this.resizeHandle),this.container.addChild(this.nameText),this.setupEvents(),this.container.eventMode="static",this.container.on("rightclick",e=>{e.stopPropagation(),this.eventManager.emit("daw:clip:contextmenu",{clipId:this.clipData.id,x:e.global.x,y:e.global.y})}),this.container.eventMode="static",this.container.on("pointertap",e=>{e.detail===2&&this.openMidiEditor()})}drawBackground(){this.background.clear();const e=Math.max(this.clipData.duration*this.gridSize,this.gridSize),i=ra.TRACK_HEIGHT;this.background.beginFill(this.clipData.color,.8).drawRect(0,0,e,i).endFill(),this.background.setStrokeStyle({width:1,color:16777215,alpha:.3,alignment:0}).drawRect(0,0,e,i),this.background.eventMode="static"}updateTextPosition(){this.nameText.position.set(5,(ra.TRACK_HEIGHT-this.nameText.height)/2)}createResizeHandle(){this.resizeHandle.clear(),this.resizeHandle.beginFill(16777215,.8).drawRect(-3,0,6,ra.TRACK_HEIGHT).endFill(),this.resizeHandle.position.x=this.clipData.duration*this.gridSize,this.resizeHandle.eventMode="static",this.resizeHandle.cursor="ew-resize"}setupEvents(){this.background.eventMode="static",this.background.cursor="grab",this.background.on("pointerdown",this.onDragStart.bind(this)).on("globalpointermove",this.onDragMove.bind(this)).on("pointerup",this.onDragEnd.bind(this)).on("pointerupoutside",this.onDragEnd.bind(this)),this.resizeHandle.on("pointerdown",this.onResizeStart.bind(this)).on("globalpointermove",this.onResizeMove.bind(this)).on("pointerup",this.onResizeEnd.bind(this)).on("pointerupoutside",this.onResizeEnd.bind(this))}onDragStart(e){this.isDragging=!0,this.dragStartX=e.global.x,this.originalX=this.container.x,this.container.alpha=.7,this.background.cursor="grabbing",this.container.zIndex=1}onDragMove(e){if(!this.isDragging)return;const i=e.global.x-this.dragStartX,a=Math.max(0,this.originalX+i),l=Math.round(a/this.gridSize)*this.gridSize;this.container.x=l,this.clipData.startTime=Math.floor(l/this.gridSize),this.eventManager.emit("daw:clip:moved",{clip:{...this.clipData}})}onDragEnd(){if(!this.isDragging)return;this.isDragging=!1,this.container.alpha=1,this.background.cursor="grab",this.container.zIndex=0;const e=Math.round(this.container.x/this.gridSize)*this.gridSize;this.container.x=e,this.clipData.startTime=Math.floor(e/this.gridSize),this.eventManager.emit("daw:clip:moved",{clip:{...this.clipData}})}onResizeStart(e){this.isResizing=!0,this.dragStartX=e.global.x,this.originalWidth=this.clipData.duration*this.gridSize}onResizeMove(e){if(!this.isResizing)return;const i=e.global.x-this.dragStartX,a=Math.max(this.gridSize,this.originalWidth+i),l=Math.max(1,Math.round(a/this.gridSize));this.clipData.duration!==l&&(this.clipData.duration=l,this.drawBackground(),this.createResizeHandle(),this.eventManager.emit("daw:clip:resized",{clip:{...this.clipData}}))}onResizeEnd(){if(!this.isResizing)return;this.isResizing=!1;const e=Math.max(1,Math.round(this.clipData.duration));this.clipData.duration!==e&&(this.clipData.duration=e,this.drawBackground(),this.createResizeHandle())}update(){this.drawBackground(),this.createResizeHandle(),this.updateTextPosition()}destroy(){this.closeMidiEditor(),this.container.removeAllListeners(),this.container.destroy({children:!0})}getId(){return this.clipData.id}getData(){return{...this.clipData}}openMidiEditor(){if(this.editorWindow)return;const e=new BD(this.clipData,()=>{this.editorWindow=null,this.midiEditor=null});this.editorWindow=e.getContainer(),this.midiEditor=e.getMidiEditor(),this.eventManager.emit("daw:window:add",{window:this.editorWindow,zIndex:9999})}closeMidiEditor(){this.editorWindow&&this.midiEditor&&(this.eventManager.emit("daw:window:remove",{window:this.editorWindow}),this.editorWindow=null,this.midiEditor=null)}};G(ra,"TRACK_HEIGHT",80);let Vf=ra;const aa=class aa extends Ze{constructor(e,i=50){super();G(this,"background");G(this,"clips",new Map);G(this,"gridSize");this.trackId=e,this.gridSize=i,this.init()}init(){this.container.eventMode="static",this.container.interactiveChildren=!0,this.container.visible=!0,this.container.sortableChildren=!0,this.background=new wt,this.drawBackground(),this.container.addChild(this.background)}drawBackground(){this.background.clear();const e=Math.max(window.innerWidth*2,3e3);this.background.fill({color:2763306}).rect(0,0,e,aa.TRACK_HEIGHT),this.background.setStrokeStyle({width:1,color:4473924,alpha:1}).moveTo(0,aa.TRACK_HEIGHT).lineTo(e,aa.TRACK_HEIGHT).stroke()}setupClipEvents(e){const i=e.getContainer();i.eventMode="static",i.on("rightclick",a=>{a.stopPropagation(),this.eventManager.emit("daw:clip:contextmenu",{clipId:e.getId(),x:a.global.x,y:a.global.y})})}addClip(e){const i=new Vf(e,this.gridSize);this.clips.set(e.id,i),this.container.addChild(i.getContainer()),i.getContainer().position.x=e.startTime*this.gridSize,this.setupClipEvents(i)}removeClip(e){const i=this.clips.get(e);i&&(this.container.removeChild(i.getContainer()),i.destroy(),this.clips.delete(e))}getClip(e){const i=this.clips.get(e);return i?i.getData():null}update(){this.drawBackground(),this.clips.forEach(e=>e.update())}setGridSize(e){this.gridSize=e,this.update()}destroy(){this.clips.forEach(e=>e.destroy()),this.container.destroy({children:!0})}};G(aa,"TRACK_HEIGHT",80);let If=aa;class Uf extends Ze{constructor(e,i,a=At.dimensions.gridSize){super();G(this,"controls");G(this,"content");G(this,"dragStartY",0);G(this,"initialY",0);G(this,"isPreviewTarget",!1);G(this,"onDragStartHandler");G(this,"onDragHandler");G(this,"onDragEndHandler");this.track=e,this.index=i,this.gridSize=a,this.init()}init(){this.container.eventMode="static",this.container.interactiveChildren=!0,this.container.visible=!0,this.container.sortableChildren=!0,this.controls=new Pf(this.track),this.controls.getContainer().zIndex=1,this.container.addChild(this.controls.getContainer()),this.content=new If(this.track.id,this.gridSize),this.content.getContainer().position.x=At.dimensions.controlsWidth,this.content.getContainer().zIndex=0,this.container.addChild(this.content.getContainer()),this.container.position.y=this.index*At.dimensions.trackHeight,this.setupControlEvents()}update(){this.controls.update(),this.content.update()}destroy(){this.eventManager.off("track:dragstart",this.onDragStartHandler),this.eventManager.off("track:drag",this.onDragHandler),this.eventManager.off("track:dragend",this.onDragEndHandler),this.container.removeAllListeners(),this.controls.destroy(),this.content.destroy(),this.container.destroy({children:!0})}setY(e){this.container.position.y=e}getY(){return this.container.position.y}setupControlEvents(){this.onDragStartHandler=e=>{e.trackId===this.track.id&&this.onDragStart(e.y)},this.onDragHandler=e=>{e.trackId===this.track.id&&this.onDrag(e.y)},this.onDragEndHandler=e=>{e.trackId===this.track.id&&this.onDragEnd()},this.eventManager.on("track:dragstart",this.onDragStartHandler),this.eventManager.on("track:drag",this.onDragHandler),this.eventManager.on("track:dragend",this.onDragEndHandler),this.container.eventMode="static",this.container.on("rightclick",e=>{e.stopPropagation(),this.eventManager.emit("daw:track:contextmenu",{trackId:this.track.id,x:e.global.x,y:e.global.y})})}onDragStart(e){this.container.zIndex=1,this.container.alpha=.8,this.dragStartY=e,this.initialY=this.container.position.y}onDrag(e){const i=e-this.dragStartY,a=this.initialY+i;this.setY(a)}onDragEnd(){this.container.zIndex=0,this.container.alpha=1,this.dragStartY=0,this.initialY=0}resetPreviewState(){this.container.alpha=1,this.container.zIndex=0,this.isPreviewTarget=!1}setPreviewState(e){this.isPreviewTarget=e,this.container.alpha=e?.7:1}setName(e){this.track.name=e,this.controls.updateName(e)}addClip(e){this.content.addClip(e)}removeClip(e){this.content.removeClip(e)}getClip(e){return this.content.getClip(e)}}G(Uf,"TRACK_HEIGHT",At.dimensions.trackHeight),G(Uf,"TIMELINE_HEIGHT",At.dimensions.topBarHeight);class HD extends Ze{constructor(e){super();G(this,"tracks");G(this,"trackOrder");G(this,"_lastTargetIndex");G(this,"_draggedTrackId",null);G(this,"background");this.app=e,this.tracks=new Map,this.trackOrder=[],this._lastTargetIndex=-1,this.init()}init(){this.container.sortableChildren=!0,this.container.eventMode="static",this.container.position.set(0,0),this.background=new wt,this.container.addChild(this.background),this.drawBackground(),this.setupEvents()}drawBackground(){const{width:e,height:i}=this.app.screen,a=Math.max(e*2,3e3);this.background.clear().fill({color:1710618}).rect(0,0,a,i)}setupEvents(){this.eventManager.on("track:drag",e=>this.handleTrackDrag(e)),this.eventManager.on("track:dragend",e=>this.handleTrackDragEnd(e))}handleTrackDrag({trackId:e,y:i}){const a=this.tracks.get(e);if(!a)return;this._draggedTrackId=e;const l=this.trackOrder.indexOf(e),u=this.calculateTargetIndex(i),h=i-At.dimensions.topBarHeight-At.dimensions.timelineHeight;a.setY(h),u!==this._lastTargetIndex&&u>=0&&u<this.trackOrder.length&&(this.handleTrackCrossover(l,u),this._lastTargetIndex=u)}handleTrackCrossover(e,i){if(!this._draggedTrackId)return;this.tracks.forEach(u=>u.resetPreviewState());let a=[...this.trackOrder];const l=a.splice(e,1)[0];a.splice(i,0,l),a.forEach((u,h)=>{if(u===this._draggedTrackId)return;const d=this.tracks.get(u);if(d){const p=h*At.dimensions.trackHeight;d.setPreviewState(!0),this.animateTrackPosition(d,p)}})}calculateTargetIndex(e){const{topBarHeight:i,timelineHeight:a,trackHeight:l}=At.dimensions,u=e-(i+a),h=Math.floor((u+l/2)/l);return Math.max(0,Math.min(h,this.trackOrder.length-1))}previewTrackSwap(e,i){const a=this.trackOrder[i],l=this.tracks.get(a);if(!l)return;const u=e*At.dimensions.trackHeight;this.animateTrackPosition(l,u)}animateTrackPosition(e,i){const a=e.getY(),l=150,u=performance.now(),h=d=>{const p=d-u,m=Math.min(p/l,1),_=1-Math.pow(1-m,2),v=a+(i-a)*_;e.setY(v),m<1&&requestAnimationFrame(h)};requestAnimationFrame(h)}handleTrackDragEnd({trackId:e,y:i}){const a=this.calculateTargetIndex(i),l=this.trackOrder.indexOf(e);a!==l&&a>=0&&a<this.trackOrder.length?(this.trackOrder.splice(l,1),this.trackOrder.splice(a,0,e),this.updateTrackPositions(),this.eventManager.emit("daw:track:reorder",{trackId:e,newIndex:a})):this.updateTrackPositions(),this.tracks.forEach(u=>u.resetPreviewState()),this._lastTargetIndex=-1,this._draggedTrackId=null}addTrack(e){try{if(console.log("Creating new track with data:",e),!e||!e.id)throw new Error("Invalid track data");if(this.tracks.has(e.id))throw new Error(`Track with id ${e.id} already exists`);const i=new Uf(e,this.tracks.size,At.dimensions.gridSize);if(!i.getContainer())throw new Error("Track container initialization failed");console.log("Track created successfully, adding to container"),this.tracks.set(e.id,i),this.trackOrder.push(e.id),this.container.addChild(i.getContainer()),this.updateTrackPositions(),console.log("Track added successfully:",e.id)}catch(i){throw console.error("Failed to add track:",i),i}}moveTrack(e,i){const a=this.tracks.get(e);if(!a)return;const l=this.trackOrder.indexOf(e);if(l===-1)return;if(l===i){this.tracks.forEach(p=>p.resetPreviewState());const d=l*At.dimensions.trackHeight;this.animateTrackPosition(a,d);return}const u=this.trackOrder[i],h=this.tracks.get(u);h&&([this.trackOrder[l],this.trackOrder[i]]=[this.trackOrder[i],this.trackOrder[l]],this.tracks.forEach(d=>d.resetPreviewState()),this.animateTrackPosition(a,i*At.dimensions.trackHeight),this.animateTrackPosition(h,l*At.dimensions.trackHeight),this.eventManager.emit("daw:track:reorder",{trackId:e,newIndex:i}))}updateTrackPositions(){this.trackOrder.forEach((e,i)=>{const a=this.tracks.get(e);if(a){const l=i*At.dimensions.trackHeight;this.animateTrackPosition(a,l)}})}getTrack(e){return this.tracks.get(e)}getTracks(){return Array.from(this.tracks.values())}update(){this.tracks.forEach(e=>e.update())}destroy(){this.tracks.forEach(e=>e.destroy()),this.tracks.clear(),this.trackOrder=[],this.container.destroy({children:!0}),this.eventManager.off("track:drag",this.handleTrackDrag),this.eventManager.off("track:dragend",this.handleTrackDragEnd)}removeTrack(e){const i=this.tracks.get(e);i&&(i.destroy(),this.tracks.delete(e),this.updateTrackPositions())}setPosition(e,i){this.container.position.set(e,i)}}class PD extends Ze{constructor(e){super();G(this,"trackList");G(this,"scrollContainer");G(this,"scrollBar");G(this,"grid");G(this,"isDragging",!1);G(this,"dragStart",{y:0});G(this,"scrollPosition",0);G(this,"maxScroll",0);G(this,"timelineState");this.app=e,this.timelineState={position:0,zoom:1,gridSize:50,isPlaying:!1,bpm:60},this.init()}init(){this.container.position.y=Ve.HEIGHT+Je.HEIGHT+At.dimensions.timelineHeight,this.container.zIndex=4;const e=new wt;e.fill({color:1710618}).rect(0,0,this.app.screen.width,this.getVisibleHeight()).setStrokeStyle({width:2,color:3815994,alpha:1}).rect(0,0,this.app.screen.width,this.getVisibleHeight()).stroke(),this.container.addChild(e),this.grid=new wt,this.container.addChild(this.grid),this.scrollContainer=new Pt,this.container.addChild(this.scrollContainer),this.trackList=new HD(this.app),this.scrollContainer.addChild(this.trackList.getContainer()),this.scrollBar=new wt,this.container.addChild(this.scrollBar),this.setupEvents(),this.drawGrid()}drawGrid(){this.grid.clear();const e=Math.max(this.app.screen.width*2,3e3),i=this.getVisibleHeight();for(let a=0;a<=e-At.dimensions.controlsWidth;a+=this.timelineState.gridSize)a/this.timelineState.gridSize%4===0?this.grid.setStrokeStyle({width:1,color:6710886,alpha:1}).moveTo(a+At.dimensions.controlsWidth,0).lineTo(a+At.dimensions.controlsWidth,i).stroke():this.grid.setStrokeStyle({width:1,color:4473924,alpha:.5}).moveTo(a+At.dimensions.controlsWidth,0).lineTo(a+At.dimensions.controlsWidth,i).stroke()}getVisibleHeight(){return(this.app.screen.height-Ve.HEIGHT-Je.HEIGHT-At.dimensions.timelineHeight-oa.HEIGHT)*.7}setupEvents(){this.container.eventMode="static",this.container.on("wheel",e=>{this.scrollPosition+=e.deltaY,this.scrollPosition=Math.max(0,Math.min(this.scrollPosition,this.maxScroll)),this.updateScrollPosition()}),this.scrollBar.eventMode="static",this.scrollBar.cursor="pointer",this.scrollBar.on("pointerdown",e=>{this.isDragging=!0,this.dragStart.y=e.global.y}),this.app.stage.on("pointermove",e=>{if(this.isDragging){const i=e.global.y-this.dragStart.y;this.scrollPosition+=i*(this.maxScroll/this.getVisibleHeight()),this.scrollPosition=Math.max(0,Math.min(this.scrollPosition,this.maxScroll)),this.updateScrollPosition(),this.dragStart.y=e.global.y}}),this.app.stage.on("pointerup",()=>{this.isDragging=!1})}updateScrollPosition(){this.scrollContainer.position.y=-this.scrollPosition,this.updateScrollBar()}updateScrollBar(){const e=this.getVisibleHeight(),i=Math.max(20,e*(e/this.trackList.getContainer().height)),a=(e-i)*(this.scrollPosition/this.maxScroll);this.scrollBar.clear().fill({color:3815994}).rect(this.app.screen.width-10,a,10,i)}getTrackList(){return this.trackList}update(){this.maxScroll=Math.max(0,this.trackList.getContainer().height-this.getVisibleHeight()),this.updateScrollBar(),this.drawGrid()}destroy(){this.trackList.destroy(),this.container.destroy({children:!0})}}class Bc{constructor(t){G(this,"eventManager");G(this,"timeline");G(this,"topBar");G(this,"transportBar");G(this,"playhead");G(this,"contextMenu");G(this,"background");G(this,"toolbar");G(this,"audioEngine");G(this,"trackArea");G(this,"timelineState");G(this,"isPlaying",!1);G(this,"lastTimestamp",0);G(this,"animationFrameId",null);G(this,"bpm",At.transport.defaultBPM);G(this,"clipboardData",null);G(this,"handleResize",()=>{this.background.clear().fill({color:1710618}).rect(0,Ve.HEIGHT+Je.HEIGHT,this.app.screen.width,this.app.screen.height-Ve.HEIGHT-Je.HEIGHT),this.topBar.update(this.app.screen.width),this.transportBar.update(this.app.screen.width),this.timeline.update(),this.trackArea.update(),this.transportBar.getContainer().position.y=Ve.HEIGHT,this.timeline.getContainer().position.y=Ve.HEIGHT+Je.HEIGHT,this.trackArea.getContainer().position.y=Ve.HEIGHT+Je.HEIGHT+At.dimensions.timelineHeight,this.playhead.getContainer().position.y=Ve.HEIGHT+Je.HEIGHT+At.dimensions.timelineHeight,this.playhead.setHeight(this.app.screen.height-Ve.HEIGHT-Je.HEIGHT-At.dimensions.timelineHeight),this.trackArea.getTrackList().update(),this.toolbar.getContainer().position.y=this.app.screen.height-oa.HEIGHT});G(this,"animate",()=>{if(!this.isPlaying)return;const t=performance.now(),e=(t-this.lastTimestamp)/1e3;this.lastTimestamp=t;const i=this.bpm/At.transport.secondsPerMinute,a=e*i,u=this.playhead.getPosition()+a;this.playhead.setTimePosition(u);const h=u/i;this.transportBar.setTime(h),this.timelineState.position+=h,this.timeline.update(),this.playhead.update(),this.trackArea.update(),this.animationFrameId=requestAnimationFrame(this.animate)});this.app=t,console.log("DAWManager constructor called"),this.eventManager=ua.getInstance(),this.app.stage.sortableChildren=!0,this.audioEngine=new OD,this.timelineState={position:0,zoom:1,gridSize:50,isPlaying:!1,bpm:60},this.background=new wt,this.background.zIndex=0,this.app.stage.addChild(this.background),this.topBar=new Ve(this.app.screen.width),this.topBar.getContainer().position.y=0,this.topBar.getContainer().zIndex=1,this.app.stage.addChild(this.topBar.getContainer()),this.transportBar=new Je(this.app.screen.width),this.transportBar.getContainer().position.y=Ve.HEIGHT,this.transportBar.getContainer().zIndex=2,this.app.stage.addChild(this.transportBar.getContainer()),this.timeline=new VA(this.app,this.timelineState),this.timeline.getContainer().position.y=Ve.HEIGHT+Je.HEIGHT,this.timeline.getContainer().zIndex=3,this.app.stage.addChild(this.timeline.getContainer()),this.trackArea=new PD(this.app),this.trackArea.getContainer().position.y=Ve.HEIGHT+Je.HEIGHT+At.dimensions.timelineHeight,this.trackArea.getContainer().zIndex=4,this.app.stage.addChild(this.trackArea.getContainer()),this.playhead=new Cf(this.app.screen.height-Ve.HEIGHT-Je.HEIGHT-At.dimensions.timelineHeight,this.timelineState.gridSize),this.playhead.getContainer().position.y=Ve.HEIGHT+Je.HEIGHT+At.dimensions.timelineHeight,this.playhead.getContainer().zIndex=10,this.app.stage.addChild(this.playhead.getContainer()),this.contextMenu=new UA,this.contextMenu.getContainer().zIndex=100,this.app.stage.addChild(this.contextMenu.getContainer()),this.toolbar=new oa(this.app.screen.width),this.toolbar.getContainer().position.y=this.app.screen.height-oa.HEIGHT-5,this.toolbar.getContainer().zIndex=50,this.app.stage.addChild(this.toolbar.getContainer()),this.trackArea.getTrackList().update(),this.init(),this.setupTrackEvents(),this.setupTransportEvents(),this.setupPlayheadEvents(),this.setupContextMenuEvents(),this.setupAudioEvents(),this.setupWindowEvents(),this.setBPM(this.timelineState.bpm)}init(){this.initAudio(),this.timeline.update(),this.trackArea.getTrackList().update(),this.playhead.setTimePosition(0)}setupTransportEvents(){this.eventManager.on("daw:transport",t=>{switch(t.action){case"play":this.play();break;case"pause":this.pause();break;case"stop":this.stop();break}}),this.eventManager.on("daw:playhead",t=>{this.seek(t.position)}),this.eventManager.on("daw:bpm:change",t=>{this.setBPM(t.bpm)})}setupTrackEvents(){this.eventManager.on("daw:track:reorder",({trackId:t,newIndex:e})=>{this.trackArea.getTrackList().moveTrack(t,e)}),this.eventManager.on("track:rename",({trackId:t,name:e})=>{const i=this.trackArea.getTrackList().getTrack(t);i&&i.setName(e)}),this.eventManager.on("daw:track:add",({track:t})=>{console.log("Adding new track:",t),this.addTrack(t)})}setupPlayheadEvents(){this.eventManager.on("daw:playhead:move",()=>{this.updateTimeFromPlayhead()})}play(){this.isPlaying||(this.isPlaying=!0,this.lastTimestamp=performance.now(),this.animate())}pause(){this.isPlaying&&(this.isPlaying=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null))}stop(){this.isPlaying=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.playhead.setTimePosition(0),this.updateTimeFromPlayhead()}seek(t){this.playhead.setTimePosition(t),this.updateTimeFromPlayhead()}updateTimeFromPlayhead(){const e=this.playhead.getPosition()/this.timelineState.bpm*At.transport.secondsPerMinute;this.transportBar.setTime(e)}destroy(){this.timeline.destroy(),this.trackArea.destroy(),this.topBar.destroy(),this.transportBar.destroy(),this.playhead.destroy(),this.toolbar.destroy(),this.audioEngine.destroy()}setupContextMenuEvents(){this.app.stage.eventMode="static",this.app.stage.hitArea=this.app.screen,this.app.stage.on("pointerdown",t=>{t.button!==2&&this.contextMenu.hide()}),this.eventManager.on("daw:track:contextmenu",t=>{this.contextMenu.hide(),this.contextMenu.show([{label:"重命名",action:()=>this.renameTrack(t.trackId),shortcut:"F2"},{label:"刪除",action:()=>this.deleteTrack(t.trackId),shortcut:"Del"},{label:"複製",action:()=>this.duplicateTrack(t.trackId),shortcut:"Ctrl+D"},{label:"靜音",action:()=>this.muteTrack(t.trackId),shortcut:"M"}],t.x,t.y)}),this.eventManager.on("daw:clip:contextmenu",t=>{this.contextMenu.hide(),this.contextMenu.show([{label:"剪切",action:()=>this.cutClip(t.clipId),shortcut:"Ctrl+X"},{label:"複製",action:()=>this.copyClip(t.clipId),shortcut:"Ctrl+C"},{label:"刪除",action:()=>this.deleteClip(t.clipId),shortcut:"Del"},{label:"分割",action:()=>this.splitClip(t.clipId),shortcut:"S"}],t.x,t.y)})}renameTrack(t){this.trackArea.getTrackList().getTrack(t)&&console.log("Rename track:",t)}deleteTrack(t){this.trackArea.getTrackList().getTrack(t)&&(this.trackArea.getTrackList().removeTrack(t),this.eventManager.emit("track:removed",{trackId:t}))}duplicateTrack(t){this.trackArea.getTrackList().getTrack(t)&&console.log("Duplicate track:",t)}muteTrack(t){this.trackArea.getTrackList().getTrack(t)&&console.log("Mute track:",t)}cutClip(t){const e=this.findClip(t);e&&(this.clipboardData={...e},this.deleteClip(t))}copyClip(t){const e=this.findClip(t);e&&(this.clipboardData={...e})}deleteClip(t){const e=this.trackArea.getTrackList().getTracks();e&&e.forEach(i=>i.removeClip(t)),this.eventManager.emit("daw:clip:removed",{clipId:t})}splitClip(t){const e=this.findClip(t);if(!e)return;const i=this.playhead.getPosition(),a=e.startTime,l=e.duration;if(i>a&&i<a+l){const u={...e,id:`${e.id}_left`,duration:i-a},h={...e,id:`${e.id}_right`,startTime:i,duration:l-(i-a)};this.deleteClip(t),this.addClip(u),this.addClip(h)}}findClip(t){const e=this.trackArea.getTrackList().getTracks();if(!e)return null;for(const i of e){const a=i.getClip(t);if(a)return a}return null}addClip(t){const e=this.trackArea.getTrackList().getTrack(t.trackId);e&&(e.addClip(t),this.eventManager.emit("clip:added",{clip:t}))}addTrack(t){try{console.log("Adding track:",t),this.trackArea.getTrackList().addTrack(t),this.eventManager.emit("daw:track:added",{track:t})}catch(e){throw console.error("Failed to add track:",e),e}}setBPM(t){this.timelineState.bpm=t,this.bpm=t,this.transportBar.setBPM(t),this.timeline.update(),this.isPlaying&&(this.lastTimestamp=performance.now())}setupAudioEvents(){this.eventManager.on("daw:audio:test",t=>{switch(t.type){case"note":this.audioEngine.playTestNote("C4","8n");break;case"chord":this.audioEngine.playChord(["C4","E4","G4"],"4n");break;case"scale":this.audioEngine.playScale();break}}),this.eventManager.on("daw:tool:changed",t=>{console.log("Tool changed:",t.tool)})}async initAudio(){await this.audioEngine.init()}setupWindowEvents(){this.eventManager.on("daw:window:add",({window:t,zIndex:e})=>{t.zIndex=e,this.app.stage.addChild(t)}),this.eventManager.on("daw:window:remove",({window:t})=>{t&&t.parent&&t.parent.removeChild(t)})}}G(Bc,"BEATS_PER_BAR",4),G(Bc,"SECONDS_PER_MINUTE",60),G(Bc,"GRIDS_PER_BEAT",1);const VD=()=>{const r=pc.useRef(null),t=pc.useRef(null),e=pc.useRef(null);pc.useEffect(()=>r.current?((async()=>{var l;console.log("1. Starting DAW initialization"),t.current=new PA(r.current),await t.current.init(),(l=t.current)!=null&&l.app&&(console.log("2. PixiManager initialized"),e.current=new Bc(t.current.app),console.log("3. DAWManager created"),console.log("Adding test tracks..."),e.current.addTrack({id:"1",name:"音軌 1",volume:1,isMuted:!1,isSolo:!1,color:3815994}),e.current.addTrack({id:"2",name:"音軌 2",volume:1,isMuted:!1,isSolo:!1,color:4868682}),e.current.addTrack({id:"3",name:"音軌 3",volume:1,isMuted:!1,isSolo:!1,color:5921370}),console.log("Adding test clip..."),e.current.addClip({id:"test-clip-1",trackId:"1",startTime:1,duration:4,color:5025616,name:"測試片段"}),e.current.addClip({id:"test-clip-2",trackId:"1",startTime:6,duration:3,color:2201331,name:"測試片段 2"}))})().catch(console.error),()=>{var l,u;console.log("Cleaning up DAW"),(l=e.current)==null||l.destroy(),(u=t.current)==null||u.destroy()}):void 0,[]);const i=a=>{a.preventDefault()};return Bo.jsx("div",{style:{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,backgroundColor:"#1a1a1a"},onContextMenu:i,children:Bo.jsx("div",{ref:r,style:{width:"100%",height:"100%",position:"relative"},onContextMenu:i})})};function ID(){return console.log("App rendering"),Bo.jsx("div",{className:"App",children:Bo.jsx(VD,{})})}KS.createRoot(document.getElementById("root")).render(Bo.jsx(ID,{}));export{Yv as $,Fv as A,un as B,Pt as C,Jn as D,It as E,ti as F,Jc as G,YT as H,Xy as I,Ho as J,_w as K,Aw as L,Nt as M,xe as N,De as O,Ye as P,Rw as Q,gf as R,Qw as S,vc as T,ff as U,Wy as V,Fd as W,Qy as X,WT as Y,Xe as Z,mv as _,_i as a,Yt as a0,ue as a1,Bw as a2,nC as a3,xC as a4,TC as a5,EC as a6,RC as a7,DC as a8,Qf as a9,cr as aa,NA as ab,zA as ac,Pc as ad,wf as ae,ta as af,EA as ag,rb as ah,d0 as ai,u0 as aj,fT as ak,wt as al,mT as am,lb as an,Vo as b,Dc as c,jf as d,qn as e,h0 as f,jw as g,Gv as h,Cv as i,yi as j,Uv as k,bC as l,SC as m,zy as n,AC as o,kC as p,Zv as q,ET as r,Wf as s,Xt as t,Hv as u,pT as v,wn as w,NC as x,Gi as y,dv as z};
